--- modules/modpython/codegen.pl.orig	2025-07-01 21:17:15 UTC
+++ modules/modpython/codegen.pl
@@ -174,7 +174,8 @@ namespace {
 #if PY_VERSION_HEX>=0x03000000
 						assert(0); /* Should never reach here in Python 3 */
 #endif
-						*cptr = SWIG_Python_str_AsChar(obj);
+						PyObject *bytes = NULL;
+						*cptr = (char *)SWIG_PyUnicode_AsUTF8AndSize(obj, NULL, &bytes);
 					}
 				}
 				if (psize) *psize = len + 1;
