patch files for kenjiro
--- clients/kenjiro/kenjiro.h.orig	Tue Jun 27 01:21:31 1995
+++ clients/kenjiro/kenjiro.h	Tue Jan 28 15:39:36 1997
@@ -41,7 +41,7 @@
 #define F(n) (1 << n)
 
 typedef struct {
-	char name[10];
+	char name[16];
 	unsigned char prompt[25];
 	int inputmode;
 	int filter;
--- clients/kenjiro/sub.c.orig	Tue Jun 27 01:21:31 1995
+++ clients/kenjiro/sub.c	Tue Jan 28 15:39:36 1997
@@ -1,6 +1,11 @@
 #include "kenjiro.h"
 
 static int sttylevel = 0;
+#ifdef TERMIOS
+#include <termios.h>
+#include <unistd.h>
+static struct termios ttyorg, ttynew;
+#else /* TERMIOS */
 #ifdef TERMIO
 #include <termio.h>
 #include <bsdtty.h>
@@ -10,6 +15,7 @@
 static struct tchars tcorg, tcnew;
 #endif
 static struct ltchars ltcorg, ltcnew;
+#endif /* TERMIOS */
 int numk;
 int mode;
 int fd1 = 0;
@@ -31,6 +37,26 @@
 	ttynew.c_cc[VQUIT] = 0;
 	if (ioctl(0, TCSETA, &ttynew) < 0) return;
 #else
+# ifdef TERMIOS
+	if (tcgetattr(0, &ttyorg) < 0) return;
+	ttynew = ttyorg;
+	ttynew.c_lflag &= ~ECHO;
+	ttynew.c_lflag &= ~ICANON;
+	ttynew.c_cc[VMIN] = 1;
+	ttynew.c_cc[VTIME] = 0;
+	ttynew.c_cc[VQUIT] = 0;
+	ttynew.c_cc[VLNEXT] = _POSIX_VDISABLE;
+#if   defined(VDSUSP)
+	ttynew.c_cc[VDSUSP] = _POSIX_VDISABLE;
+#else /* VDSUSP */
+# if defined(VEOL)
+	ttynew.c_cc[VEOL] = _POSIX_VDISABLE;
+# endif /* VEOL */
+#endif /* VDSUSP */
+	sttylevel++;
+	if (tcsetattr(0, TCSANOW, &ttynew) < 0) return;
+	sttylevel++;
+# else /* TERMIOS */
 	if (ioctl(0, TIOCGETP, &ttyorg) < 0) return;
 	ttynew = ttyorg;
 	ttynew.sg_flags |= CBREAK;
@@ -41,7 +67,9 @@
 	tcnew = tcorg;
 	tcnew.t_quitc = -1;
 	if (ioctl(0, TIOCSETC, &tcnew) < 0) return;
+# endif /* TERMIOS */
 #endif
+#ifndef TERMIOS
 	sttylevel++;
 	if (ioctl(0, TIOCGLTC, &ltcorg) < 0) return;
 	ltcnew = ltcorg;
@@ -49,6 +77,7 @@
 	ltcnew.t_dsuspc = -1;
 	if (ioctl(0, TIOCSLTC, &ltcnew) < 0) return;
 	sttylevel++;
+#endif /* TERMIOS */
 }
 
 void romakana_fixtty()
@@ -60,12 +89,18 @@
 	case 1:
 		ioctl(0, TCSETA, &ttyorg);
 #else
+# ifdef TERMIOS
+	case 2:
+	case 1:
+		tcsetattr(0, TCSANOW, &ttyorg);
+# else /* TERMIOS */
 	case 3:
 		ioctl(0, TIOCSLTC, &ltcorg);
 	case 2:
 		ioctl(0, TIOCSETC, &tcorg);
 	case 1:
 		ioctl(0, TIOCSETP, &ttyorg);
+# endif /* TERMIOS */
 #endif
 	}
 }
@@ -128,7 +163,7 @@
 
 void getttyval()
 {
-#ifdef TERMIO
+#if defined(TERMIO) || defined(TERMIOS)
 	struct winsize ws;
 
 	ioctl(0, TIOCGWINSZ, &ws);
--- clients/kenjiro/config.h.orig	Tue Jun 27 01:21:34 1995
+++ clients/kenjiro/config.h	Tue Jan 28 15:39:36 1997
@@ -1,7 +1,7 @@
-#define PAGER		"/usr/local/bin/less"	/* pager program */
+#define PAGER		"/usr/local/bin/jless"	/* pager program */
 #define HISTSIZE	20		/* history size */
 #define	KOUHO		10		/* number of kouho  (0 < n <= 10) */
-#define SERVER		"dserver"	/* hostname with server */
+#define SERVER		"localhost"	/* hostname with server */
 #define SERVICE		"ndtp"		/* service name */
 #define KANJICODE	JIS		/* default kanji code (JIS,EUC,SJIS)*/
 /*#define PORT		2010*/		/* port of service */
@@ -15,6 +15,9 @@
 	{ "eiwa"   , "¸¦µæ¼Ò±ÑÏÂ"	, ENG ,  },
 	{ "waei"   , "¸¦µæ¼ÒÏÂ±Ñ"	, JPN ,  },
 	{ "kojien" , "¹­¼­±ñ"		, JPN ,  },
+	{ "kojien-furoku" , "¹­¼­±ñÉÕÏ¿", JPN ,  },
 	{ "CDkojien" , "CD¹­¼­±ñ"		, JPN ,  },
-	{ "readers" , "¥ê¡¼¥À¡¼¤º±ÑÏÂ"		, ENG ,  },
+	{ "readers" , "¥ê¡¼¥À¡¼¥º±ÑÏÂ"		, ENG ,  },
+	{ "crfre"   , "»°¾ÊÆ²¥¯¥é¥¦¥óÊ©ÏÂ"	, ENG ,  },
+	{ "crger"   , "»°¾ÊÆ²¥¯¥é¥¦¥óÆÈÏÂ"	, ENG ,  },
 };
--- clients/kenjiro/Makefile.orig	Tue Jun 27 01:21:31 1995
+++ clients/kenjiro/Makefile	Tue Jan 28 15:39:36 1997
@@ -1,5 +1,6 @@
-CFLAGS = -O		# for termcap
+#CFLAGS = -O		# for termcap
 #CFLAGS = -O -DTERMIO	# for termio
+CFLAGS = -O -DTERMIOS	# for termios
 
 # if you have no bcopy sigmask sigblock (e.g. on Solaris 2.x)
 # define NO_BCOPY NO_SIGMASK NO_SIGBLOCK like
@@ -15,6 +16,11 @@
 
 all:	kenjiro kenjiro.l
 
+install: all
+	gzip -9Nf kenjiro.l
+	install -s kenjiro ${PREFIX}/bin/
+	install kenjiro.l.gz ${PREFIX}/man/manl/
+
 kenjiro: $(OBJS)
 	$(CC) $(CFLAGS) -o kenjiro $(OBJS) $(LIBS)
 
@@ -30,6 +36,6 @@
 		ln -s filter.c.euc filter.c
 
 clean:
-	rm -f *.o *.out kenjiro.l kenjiro core typescript
+	rm -f *.o *.out kenjiro.l* kenjiro core typescript
 
 # DO NOT DELETE
--- clients/diclookup-mule-2.3.0/Makefile.orig	Mon Jul 24 16:01:57 1995
+++ clients/diclookup-mule-2.3.0/Makefile	Tue Jan 28 15:39:36 1997
@@ -1,13 +1,13 @@
 EMACS = mule
 
-LISPDIR = /usr/local/lib/mule/site-lisp
+LISPDIR = ${PREFIX}/lib/mule/site-lisp
 
 RM = rm -f
 
 UTILS = cclc.elc
 
 ELCS = diclookup-mule.elc \
-	od-eiwa.elc od-chujiten.elc od-kojien.elc
+	od-eiwa.elc od-chujiten.elc od-kojien.elc od-crown.elc od-oxford.elc od-italian.elc od-readers.elc
 
 PROGRAMS = $(UTILS) $(ELCS)
 
@@ -19,7 +19,9 @@
 all: $(PROGRAMS)
 
 install: $(ELCS)
+	cp *.el $(LISPDIR)
 	cp $(ELCS) $(LISPDIR)
+	cp README ${PREFIX}/lib/dserver/doc/README.diclookup-mule
 
 clean:
 	$(RM) $(PROGRAMS)
