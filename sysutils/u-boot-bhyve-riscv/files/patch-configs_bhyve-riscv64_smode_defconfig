--- configs/bhyve-riscv64_smode_defconfig.orig
+++ configs/bhyve-riscv64_smode_defconfig
@@ -0,0 +1,41 @@
+CONFIG_RISCV=y
+CONFIG_SYS_MALLOC_LEN=0x800000
+CONFIG_NR_DRAM_BANKS=1
+CONFIG_HAS_CUSTOM_SYS_INIT_SP_ADDR=y
+CONFIG_CUSTOM_SYS_INIT_SP_ADDR=0x100200000
+CONFIG_ENV_SIZE=0x20000
+CONFIG_DEFAULT_DEVICE_TREE="bhyve-riscv"
+CONFIG_SYS_LOAD_ADDR=0x100000000
+CONFIG_TARGET_BHYVE=y
+CONFIG_ARCH_RV64I=y
+CONFIG_RISCV_SMODE=y
+CONFIG_FIT=y
+CONFIG_SYS_BOOTM_LEN=0x4000000
+CONFIG_DISTRO_DEFAULTS=y
+CONFIG_USE_PREBOOT=y
+CONFIG_PREBOOT="setenv fdt_addr ${fdtcontroladdr}; fdt addr ${fdtcontroladdr};"
+CONFIG_DISPLAY_CPUINFO=y
+CONFIG_DISPLAY_BOARDINFO=y
+CONFIG_CMD_BOOTEFI_SELFTEST=y
+CONFIG_CMD_NVEDIT_EFI=y
+# CONFIG_CMD_MII is not set
+# CONFIG_SYS_RELOC_GD_ENV_ADDR=y
+CONFIG_DM_MTD=y
+CONFIG_FLASH_SHOW_PROGRESS=0
+CONFIG_SYS_MAX_FLASH_BANKS=2
+CONFIG_DEBUG_UART=y
+CONFIG_DEBUG_UART_BASE=0x10000
+CONFIG_DEBUG_UART_NS16550=y
+CONFIG_DEBUG_UART_CLOCK=3686400
+CONFIG_DEBUG_SBI_CONSOLE=n
+CONFIG_SERIAL=y
+CONFIG_BAUDRATE=115200
+CONFIG_REQUIRE_SERIAL_CONSOLE=y
+CONFIG_SPECIFY_CONSOLE_INDEX=y
+CONFIG_SERIAL_PRESENT=y
+CONFIG_CONS_INDEX=1
+CONFIG_DM=y
+CONFIG_DM_SERIAL=y
+CONFIG_SYS_NS16550_SERIAL=y
+CONFIG_SERIAL_SEARCH_ALL=y
+CONFIG_DM_DEBUG=n
