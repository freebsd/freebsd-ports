diff -c -N ../xperfmon++/DEADJOE ./DEADJOE
*** ../xperfmon++/DEADJOE	Thu Jan  1 00:00:00 1970
--- ./DEADJOE	Tue Mar 14 21:09:19 1995
***************
*** 0 ****
--- 1,9 ----
+ 
+ *** Modified files in JOE when it aborted on Tue Mar 14 21:09:19 1995
+ *** JOE was aborted by signal 15
+ 
+ *** File '(Unnamed)'
+ bsd_system.c
+ 
+ *** File '(Unnamed)'
+ nfs
diff -c -N ../xperfmon++/Imakefile ./Imakefile
*** ../xperfmon++/Imakefile	Wed Jul 27 20:29:29 1994
--- ./Imakefile	Wed Mar 15 12:47:26 1995
***************
*** 17,31 ****
  SYS_MODULE=	sgi_system
  #endif
  
! EXTRA_LIBRARIES =     $(SUNFLAGS) $(MIPSFLAGS) $(SGIFLAGS)
  
     INSTPGMFLAGS =  $(INSTKMEMFLAGS)
  LOCAL_LIBRARIES = $(XAWLIB) $(XTOOLLIB) $(XMULIB) $(XLIB)
         INCLUDES = -I. -I$(TOOLKITSRC) -I$(TOP) -I$(TOP)/X11
! #       INCLUDES = -I. -I$(TOOLKITSRC) -I$(TOP) -I$(TOP)/X11 -I/usr/include/bsd
!      CDEBUGFLAGS = -O
!            SRCS = TimeChart.c StripChart.c misc.c $(SYS_MODULE).c xperfmon.c nfs.c
!            OBJS = TimeChart.o StripChart.o misc.o $(SYS_MODULE).o xperfmon.o nfs.o
  
  ComplexProgramTarget(xperfmon++)
  
--- 17,37 ----
  SYS_MODULE=	sgi_system
  #endif
  
! #if defined (i386BsdArchitecture)
! BSDFLAGS=	-lkvm
! SYS_MODULE=     bsd_system
! CC=		gcc
! #endif
! 
! EXTRA_LIBRARIES =     $(SUNFLAGS) $(MIPSFLAGS) $(SGIFLAGS) $(BSDFLAGS)
  
     INSTPGMFLAGS =  $(INSTKMEMFLAGS)
  LOCAL_LIBRARIES = $(XAWLIB) $(XTOOLLIB) $(XMULIB) $(XLIB)
         INCLUDES = -I. -I$(TOOLKITSRC) -I$(TOP) -I$(TOP)/X11
! #      SRCS = TimeChart.c StripChart.c misc.c $(SYS_MODULE).c xperfmon.c nfs.c
! #      OBJS = TimeChart.o StripChart.o misc.o $(SYS_MODULE).o xperfmon.o nfs.o
!        SRCS = TimeChart.c StripChart.c misc.c $(SYS_MODULE).c xperfmon.c
!        OBJS = TimeChart.o StripChart.o misc.o $(SYS_MODULE).o xperfmon.o
  
  ComplexProgramTarget(xperfmon++)
  
diff -c -N ../xperfmon++/Makefile ./Makefile
*** ../xperfmon++/Makefile	Wed Jul 27 20:29:30 1994
--- ./Makefile	Fri Mar 17 09:47:58 1995
***************
*** 1,65 ****
  # Makefile generated by imake - do not edit!
! # $XConsortium: imake.c,v 1.65 91/07/25 17:50:17 rws Exp $
  
  #
- # (c) Copyright 1989, 1990, 1991, 1992 OPEN SOFTWARE FOUNDATION, INC.
- # ALL RIGHTS RESERVED
- #
- #
- # Motif Release 1.2
- #
- #   $RCSfile: Imake.tmpl,v $ $Revision: 1.4.2.5 $ $Date: 1992/04/03 19:45:35 $
  
! # -------------------------------------------------------------------------
! # Makefile generated from "Imake.tmpl" and </tmp/IIf.a14838>
! # $XConsortium: Imake.tmpl,v 1.139 91/09/16 08:52:48 rws Exp $
! #
! # Platform-specific parameters may be set in the appropriate <vendor>.cf
! # configuration files.  Site-specific parameters should be set in the file
! # site.def.  Full rebuilds are recommended if any parameters are changed.
! #
! # If your C preprocessor does not define any unique symbols, you will need
! # to set BOOTSTRAPCFLAGS when rebuilding imake (usually when doing
! # "make World" the first time).
! #
  
! # -------------------------------------------------------------------------
  # site-specific configuration parameters that need to come before
  # the platform-specific parameters - edit site.def to change
  
! # site:  $XConsortium: site.def,v 1.2 91/07/30 20:26:44 rws Exp $
  
! # -------------------------------------------------------------------------
! # platform-specific configuration parameters - edit ultrix.cf to change
  
! # platform:  $XConsortium: ultrix.cf,v 1.45.1.1 92/11/11 09:58:08 rws Exp $
  
! # operating system:             Ultrix-32 4.2
  
! # -------------------------------------------------------------------------
  # site-specific configuration parameters that go after
  # the platform-specific parameters - edit site.def to change
  
! # site:  $XConsortium: site.def,v 1.2 91/07/30 20:26:44 rws Exp $
  
!             SHELL = 	/bin/sh
  
                TOP = .
        CURRENT_DIR = .
  
                 AR = ar clq
    BOOTSTRAPCFLAGS =
                 CC = cc
                 AS = as
  
           COMPRESS = compress
!               CPP = /lib/cpp $(STD_CPP_DEFINES)
!     PREPROCESSCMD = cc -E $(STD_CPP_DEFINES)
!           INSTALL = install
                 LD = ld
               LINT = lint
!       LINTLIBFLAG = -o
!          LINTOPTS = -ax
                 LN = ln -s
               MAKE = make
                 MV = mv
--- 1,144 ----
  # Makefile generated by imake - do not edit!
! # $XConsortium: imake.c,v 1.91 95/01/12 16:15:47 kaleb Exp $
  
+ # ----------------------------------------------------------------------
+ # Makefile generated from "Imake.tmpl" and </tmp/IIf.002969>
+ # $XConsortium: Imake.tmpl,v 1.224 94/12/27 03:57:50 gildea Exp $
+ # $XFree86: xc/config/cf/Imake.tmpl,v 3.8 1995/01/25 10:42:43 dawes Exp $
  #
  
! .SUFFIXES: .i
! 
! # $XConsortium: Imake.cf,v 1.19 95/01/05 19:24:32 kaleb Exp $
! # $XFree86: xc/config/cf/Imake.cf,v 3.13 1995/01/28 15:40:15 dawes Exp $
  
! # -----------------------------------------------------------------------
  # site-specific configuration parameters that need to come before
  # the platform-specific parameters - edit site.def to change
  
! # site:  $XConsortium: site.sample,v 1.9 94/04/08 17:02:06 rws Exp $
! # site:  $XFree86: xc/config/cf/site.def,v 3.7 1995/01/04 04:36:01 dawes Exp $
  
! # $XFree86: xc/config/cf/xf86site.def,v 3.35 1995/01/25 11:17:10 dawes Exp $
  
! # -----------------------------------------------------------------------
! # platform-specific configuration parameters - edit FreeBSD.cf to change
  
! # platform:  $XConsortium: FreeBSD.cf,v 1.4 95/01/05 19:39:23 kaleb Exp $
! # platform:  $XFree86: xc/config/cf/FreeBSD.cf,v 3.24 1995/01/28 15:40:13 dawes Exp $
! 
! # operating system:  FreeBSD 2.0
! 
!    COMPRESSMANCMD = gzip -9n
! 
! # $XConsortium: bsdLib.rules,v 1.1 94/03/29 15:34:45 gildea Exp $
! 
! # $XConsortium: xfree86.cf,v 1.9 95/01/25 16:42:40 kaleb Exp $
! # $XFree86: xc/config/cf/xfree86.cf,v 3.48 1995/01/28 15:40:38 dawes Exp $
! 
! LINKKITDIR = $(USRLIBDIR)/Server
! 
!        XF86SRC = $(SERVERSRC)/hw/xfree86
!   XF86ACCELSRC = $(XF86SRC)/accel
!     XF86COMSRC = $(XF86SRC)/common
!  XF86CONFIGSRC = $(XF86COMSRC)
!      XF86HWSRC = $(XF86SRC)/common_hw
!      XF86OSSRC = $(XF86SRC)/os-support
!   VGADRIVERSRC = $(XF86SRC)/vga256/drivers
! VGA16DRIVERSRC = $(XF86SRC)/vga16/drivers
!  VGA2DRIVERSRC = $(XF86SRC)/vga2/drivers
!  MONODRIVERSRC = $(XF86SRC)/mono/drivers
!    S3DRIVERSRC = $(XF86SRC)/accel/s3/drivers
! 
! XF86INIT   = $(XF86COMSRC)/xf86Init.o
! XF86MINIT  = $(XF86COMSRC)/xf86Init_m.o
! XF86CONFIG = $(XF86CONFIGSRC)/xf86_Option.o
! XF86COMLIB = $(XF86COMSRC)/libxf86.a
! XF86OSLIB  = $(XF86OSSRC)/libxf86_os.a
! XF86HWLIB  = $(XF86HWSRC)/libxf86_hw.a
! XF86LIBS   = $(XF86INIT) $(XF86CONFIG) $(XF86COMLIB) $(XF86HWLIB) $(XF86OSLIB)
! XF86MLIBS  = $(XF86MINIT) $(XF86CONFIG) $(XF86COMLIB) $(XF86HWLIB) $(XF86OSLIB)
! 
!         XFREE86DOCDIR = $(LIBDIR)/doc
!       XFREE86PSDOCDIR = $(XFREE86DOCDIR)/PostScript
!     XFREE86HTMLDOCDIR = $(XFREE86DOCDIR)/html
! XFREE86JAPANESEDOCDIR = $(XFREE86DOCDIR)/Japanese
  
! # $XConsortium: xf86.rules,v 1.7 95/01/25 16:34:39 kaleb Exp $
! # $XFree86: xc/config/cf/xf86.rules,v 3.7 1995/01/28 15:40:36 dawes Exp $
! 
! # -----------------------------------------------------------------------
  # site-specific configuration parameters that go after
  # the platform-specific parameters - edit site.def to change
  
! # site:  $XConsortium: site.sample,v 1.9 94/04/08 17:02:06 rws Exp $
! # site:  $XFree86: xc/config/cf/site.def,v 3.7 1995/01/04 04:36:01 dawes Exp $
! 
! # -----------------------------------------------------------------------
! # Imake rules for building libraries, programs, scripts, and data files
! # rules:  $XConsortium: Imake.rules,v 1.197 94/12/05 19:30:41 gildea Exp $
! # rules:  $XFree86: xc/config/cf/Imake.rules,v 3.11 1995/01/14 10:39:25 dawes Exp $
! 
!  _NULLCMD_ = @ echo -n
  
!           PATHSEP = /
!             SHELL = /bin/sh
  
                TOP = .
        CURRENT_DIR = .
  
+             IMAKE = imake
+            DEPEND = gccmakedep
+         MKDIRHIER = mkdirhier
+         CONFIGSRC = $(TOP)/config
+          IMAKESRC = $(CONFIGSRC)/imake
+         DEPENDSRC = $(CONFIGSRC)/util
+            IXXSRC = $(UNSUPPORTEDSRC)/programs/ixx
+               IXX = ixx
+          IXXFLAGS = -s BaseObject -m TypeObj -r RequestObj -p Xf
+       IXXINCLUDES = -i '<X11/Fresco/enter-scope.h>'
+ 
+           INCROOT = /usr/X11R6/include
+         USRLIBDIR = /usr/X11R6/lib
+          SHLIBDIR = /usr/X11R6/lib
+        LINTLIBDIR = $(USRLIBDIR)/lint
+           MANPATH = /usr/X11R6/man
+     MANSOURCEPATH = $(MANPATH)/man
+            MANDIR = $(MANSOURCEPATH)$(MANSUFFIX)
+         LIBMANDIR = $(MANSOURCEPATH)$(LIBMANSUFFIX)
+        FILEMANDIR = $(MANSOURCEPATH)$(FILEMANSUFFIX)
+ 
                 AR = ar clq
    BOOTSTRAPCFLAGS =
                 CC = cc
                 AS = as
  
+ .SUFFIXES: .cxx
+ 
+               CXX = g++
+     CXXDEBUGFLAGS = -m486 -O2
+  CXXEXTRA_DEFINES =
+ CXXEXTRA_INCLUDES =
+   CXXIDL_INCLUDES = -I$(TOP)/include
+    CXXSTD_DEFINES = -DCSRG_BASED
+        CXXOPTIONS =
+       CXXINCLUDES = $(INCLUDES) $(TOP_INCLUDES) $(CXXEXTRA_INCLUDES) $(CXXIDL_INCLUDES)
+        CXXDEFINES = $(CXXINCLUDES) $(CXXSTD_DEFINES) $(THREADS_CXXDEFINES) $(CXXEXTRA_DEFINES)
+          CXXFLAGS = $(CXXDEBUGFLAGS) $(CXXOPTIONS) $(THREADS_CXXFLAGS) $(CXXDEFINES)
+ 
           COMPRESS = compress
!               CPP = /usr/libexec/cpp $(STD_CPP_DEFINES)
!     PREPROCESSCMD = /usr/libexec/cpp $(STD_CPP_DEFINES)
!           INSTALL = /usr/bin/install
!      INSTALLFLAGS = -c
                 LD = ld
+               LEX = lex
+            LEXLIB = -ll
+              YACC = yacc
+            CCYACC = yacc
               LINT = lint
!       LINTLIBFLAG = -C
!          LINTOPTS = -axz
                 LN = ln -s
               MAKE = make
                 MV = mv
***************
*** 69,88 ****
    RANLIBINSTFLAGS =
  
                 RM = rm -f
!             TROFF = psroff
           MSMACROS = -ms
                TBL = tbl
                EQN = eqn
       STD_INCLUDES =
!   STD_CPP_DEFINES =
!       STD_DEFINES =
   EXTRA_LOAD_FLAGS =
    EXTRA_LIBRARIES =
               TAGS = ctags
  
!     PROTO_DEFINES = -DFUNCPROTO
  
!      INSTPGMFLAGS =
  
       INSTBINFLAGS = -m 0755
       INSTUIDFLAGS = -m 4755
--- 148,184 ----
    RANLIBINSTFLAGS =
  
                 RM = rm -f
!         MANSUFFIX = 1
!      LIBMANSUFFIX = 3
!     FILEMANSUFFIX = 5
!             TROFF = groff -Tps
           MSMACROS = -ms
                TBL = tbl
                EQN = eqn
+ 
+             DVIPS = dvips
+             LATEX = latex
+ 
       STD_INCLUDES =
!   STD_CPP_DEFINES = -traditional
!       STD_DEFINES = -DCSRG_BASED
   EXTRA_LOAD_FLAGS =
+   EXTRA_LDOPTIONS =
    EXTRA_LIBRARIES =
               TAGS = ctags
  
!     SHAREDCODEDEF =
!          SHLIBDEF = -DBSDSHLIB
! 
!      SHLIBLDFLAGS = -Bshareable
! 
!          PICFLAGS = -fpic
! 
!       CXXPICFLAGS = -fpic
  
!     PROTO_DEFINES = -DFUNCPROTO=15 -DNARROWPROTO
! 
!      INSTPGMFLAGS = -s
  
       INSTBINFLAGS = -m 0755
       INSTUIDFLAGS = -m 4755
***************
*** 90,393 ****
       INSTINCFLAGS = -m 0444
       INSTMANFLAGS = -m 0444
       INSTDATFLAGS = -m 0444
!     INSTKMEMFLAGS = -m 4755
  
!       CDEBUGFLAGS = -O
          CCOPTIONS =
  
        ALLINCLUDES = $(INCLUDES) $(EXTRA_INCLUDES) $(TOP_INCLUDES) $(STD_INCLUDES)
!        ALLDEFINES = $(ALLINCLUDES) $(STD_DEFINES) $(EXTRA_DEFINES) $(PROTO_DEFINES) $(DEFINES)
!            CFLAGS = $(CDEBUGFLAGS) $(CCOPTIONS) $(ALLDEFINES)
!         LINTFLAGS = $(LINTOPTS) -DLINT $(ALLDEFINES)
  
!            LDLIBS = $(SYS_LIBRARIES) $(EXTRA_LIBRARIES)
  
!         LDOPTIONS = $(CDEBUGFLAGS) $(CCOPTIONS) $(LOCAL_LDFLAGS)
  
     LDCOMBINEFLAGS = -X -r
        DEPENDFLAGS =
  
!         MACROFILE = ultrix.cf
!            RM_CMD = $(RM) *.CKP *.ln *.BAK *.bak *.o core errs ,* *~ *.a .emacs_* tags TAGS make.log MakeOut
  
      IMAKE_DEFINES =
  
           IRULESRC = $(CONFIGDIR)
          IMAKE_CMD = $(IMAKE) -DUseInstalled -I$(IRULESRC) $(IMAKE_DEFINES)
  
!      ICONFIGFILES = $(IRULESRC)/Imake.tmpl $(IRULESRC)/Imake.rules \
! 			$(IRULESRC)/Project.tmpl $(IRULESRC)/site.def \
! 			$(IRULESRC)/$(MACROFILE) $(EXTRA_ICONFIGFILES)
! 
! # -------------------------------------------------------------------------
! # X Window System Build Parameters
! # $XConsortium: Project.tmpl,v 1.138 91/09/10 09:02:12 rws Exp $
  
! # -------------------------------------------------------------------------
! # X Window System make variables; this need to be coordinated with rules
  
!           PATHSEP = /
!         USRLIBDIR = /usr/lib
!            BINDIR = /usr/bin/X11
!           INCROOT = /usr/include
       BUILDINCROOT = $(TOP)
        BUILDINCDIR = $(BUILDINCROOT)/X11
        BUILDINCTOP = ..
             INCDIR = $(INCROOT)/X11
             ADMDIR = /usr/adm
             LIBDIR = $(USRLIBDIR)/X11
-         CONFIGDIR = $(LIBDIR)/config
-        LINTLIBDIR = $(USRLIBDIR)/lint
  
            FONTDIR = $(LIBDIR)/fonts
           XINITDIR = $(LIBDIR)/xinit
             XDMDIR = $(LIBDIR)/xdm
             TWMDIR = $(LIBDIR)/twm
!           MANPATH = /usr/man
!     MANSOURCEPATH = $(MANPATH)/man
!         MANSUFFIX = n
!      LIBMANSUFFIX = 3
!            MANDIR = $(MANSOURCEPATH)$(MANSUFFIX)
!         LIBMANDIR = $(MANSOURCEPATH)$(LIBMANSUFFIX)
             NLSDIR = $(LIBDIR)/nls
          PEXAPIDIR = $(LIBDIR)/PEX
        XAPPLOADDIR = $(LIBDIR)/app-defaults
         FONTCFLAGS = -t
  
       INSTAPPFLAGS = $(INSTDATFLAGS)
  
-             IMAKE = imake
-            DEPEND = makedepend
                RGB = rgb
- 
              FONTC = bdftopcf
- 
          MKFONTDIR = mkfontdir
-         MKDIRHIER = 	/bin/sh $(BINDIR)/mkdirhier
  
-         CONFIGSRC = $(TOP)/config
         DOCUTILSRC = $(TOP)/doc/util
!         CLIENTSRC = $(TOP)/clients
!           DEMOSRC = $(TOP)/demos
             LIBSRC = $(TOP)/lib
            FONTSRC = $(TOP)/fonts
         INCLUDESRC = $(TOP)/X11
!         SERVERSRC = $(TOP)/server
!           UTILSRC = $(TOP)/util
!         SCRIPTSRC = $(UTILSRC)/scripts
!        EXAMPLESRC = $(TOP)/examples
         CONTRIBSRC = $(TOP)/../contrib
             DOCSRC = $(TOP)/doc
!            RGBSRC = $(TOP)/rgb
!         DEPENDSRC = $(UTILSRC)/makedepend
!          IMAKESRC = $(CONFIGSRC)
           XAUTHSRC = $(LIBSRC)/Xau
!           XLIBSRC = $(LIBSRC)/X
             XMUSRC = $(LIBSRC)/Xmu
         TOOLKITSRC = $(LIBSRC)/Xt
         AWIDGETSRC = $(LIBSRC)/Xaw
-        OLDXLIBSRC = $(LIBSRC)/oldX
-       XDMCPLIBSRC = $(LIBSRC)/Xdmcp
-       BDFTOSNFSRC = $(FONTSRC)/bdftosnf
-       BDFTOSNFSRC = $(FONTSRC)/clients/bdftosnf
-       BDFTOPCFSRC = $(FONTSRC)/clients/bdftopcf
-      MKFONTDIRSRC = $(FONTSRC)/clients/mkfontdir
-          FSLIBSRC = $(FONTSRC)/lib/fs
-     FONTSERVERSRC = $(FONTSRC)/server
-      EXTENSIONSRC = $(TOP)/extensions
-          XILIBSRC = $(EXTENSIONSRC)/lib/xinput
-       PHIGSLIBSRC = $(EXTENSIONSRC)/lib/PEX
- 
-   DEPEXTENSIONLIB =  $(USRLIBDIR)/libXext.a
-      EXTENSIONLIB = 			  -lXext
- 
-           DEPXLIB = $(DEPEXTENSIONLIB)  $(USRLIBDIR)/libX11.a
-              XLIB = $(EXTENSIONLIB) 			  -lX11
- 
-       DEPXAUTHLIB =  $(USRLIBDIR)/libXau.a
-          XAUTHLIB = 			  -lXau
-       DEPXDMCPLIB =  $(USRLIBDIR)/libXdmcp.a
-          XDMCPLIB = 			  -lXdmcp
- 
-         DEPXMULIB =  $(USRLIBDIR)/libXmu.a
-            XMULIB = 			  -lXmu
- 
-        DEPOLDXLIB =  $(USRLIBDIR)/liboldX.a
-           OLDXLIB = 			  -loldX
- 
-       DEPXTOOLLIB =  $(USRLIBDIR)/libXt.a
-          XTOOLLIB = 			  -lXt
- 
-         DEPXAWLIB =  $(USRLIBDIR)/libXaw.a
-            XAWLIB = 			  -lXaw
- 
-         DEPXILIB =  $(USRLIBDIR)/libXi.a
-            XILIB = 			  -lXi
- 
-         DEPPHIGSLIB =  $(USRLIBDIR)/libphigs.a
-            PHIGSLIB = 			  -lphigs
- 
-        DEPXBSDLIB =  $(USRLIBDIR)/libXbsd.a
-           XBSDLIB = 			  -lXbsd
- 
-  LINTEXTENSIONLIB =  $(LINTLIBDIR)/llib-lXext.ln
-          LINTXLIB =  $(LINTLIBDIR)/llib-lX11.ln
-           LINTXMU =  $(LINTLIBDIR)/llib-lXmu.ln
-         LINTXTOOL =  $(LINTLIBDIR)/llib-lXt.ln
-           LINTXAW =  $(LINTLIBDIR)/llib-lXaw.ln
-            LINTXI =  $(LINTLIBDIR)/llib-lXi.ln
-         LINTPHIGS =  $(LINTLIBDIR)/llib-lphigs.ln
  
!           DEPLIBS = $(DEPXAWLIB) $(DEPXMULIB) $(DEPXTOOLLIB) $(DEPXLIB)
  
!          DEPLIBS1 = $(DEPLIBS)
!          DEPLIBS2 = $(DEPLIBS)
!          DEPLIBS3 = $(DEPLIBS)
  
! #
! # (c) Copyright 1989, 1990, 1991, 1992, 1993 OPEN SOFTWARE FOUNDATION, INC.
! # ALL RIGHTS RESERVED
! #
! #
! # Motif Release 1.2.2
! #
! #   $RCSfile: Motif.tmpl,v $ $Revision: 1.5.10.6 $ $Date: 92/12/10 18:34:38 $
  
!               XTOP = $(TOP)
!               MTOP = $(TOP)
!      XBUILDINCROOT = $(XTOP)
!       XBUILDINCDIR = $(XBUILDINCROOT)/X11
! 
!          CLIENTSRC = $(XTOP)/clients
!            DEMOSRC = $(XTOP)/demos
!             LIBSRC = $(XTOP)/lib
!            FONTSRC = $(XTOP)/fonts
!         INCLUDESRC = $(XTOP)/X11
!          SERVERSRC = $(XTOP)/server
!            UTILSRC = $(XTOP)/util
!         EXAMPLESRC = $(XTOP)/examples
!             DOCSRC = $(XTOP)/doc
!             RGBSRC = $(XTOP)/rgb
!       EXTENSIONSRC = $(XTOP)/extensions
! 
!       TOP_INCLUDES = -I$(MTOP)
! 
!       UIL_INCLUDES = -I$(UILSRC)
! 
!       USRINCDIR = /usr/include
!          UIDDIR = $(LIBDIR)/uid
!         TESTSRC = $(MTOP)/tests
!   GENERALSRCLIB = $(TESTSRC)/General/lib
!   GENERALSRCBIN = $(TESTSRC)/General/bin
!    MANUALSRCLIB = $(TESTSRC)/Manual/lib
!    MANUALSRCBIN = $(TESTSRC)/Manual/bin
!      AUTOSRCLIB = $(TESTSRC)/Auto/lib
!      AUTOSRCBIN = $(TESTSRC)/Auto/bin
!        COMMONPP = $(GENERALSRCBIN)/Commonpp
!          GENRUN = $(GENERALSRCBIN)/Genrun
!          MANRUN = $(GENERALSRCBIN)/Manrun
! 
!      TESTCOMSRC = $(MANUALSRCLIB)/Common
! 
!     MTOOLKITSRC = $(TOOLKITSRC)
!     MINCLUDESRC = $(MTOP)/X11
!         MLIBSRC = $(MTOP)/lib
!      MCLIENTSRC = $(MTOP)/clients
!        MDEMOSRC = $(MTOP)/demos
!      MWIDGETSRC = $(MLIBSRC)/Xm
!    MRESOURCESRC = $(MLIBSRC)/Mrm
!          UILSRC = $(MCLIENTSRC)/uil
! 
!             UIL =  $(UILSRC)/uil
!          DEPUIL =  $(UILSRC)/uil
! 
!  DEPXMLIB =  $(MWIDGETSRC)/libXm.a
! XMLIB = 			  $(DEPXMLIB)
! 
!    XMEXTRA_LIBS =
! 
!  DEPMRESOURCELIB =  $(MRESOURCESRC)/libMrm.a
! MRESOURCELIB = 			  $(DEPMRESOURCELIB)
! 
!  DEPUILLIB =  $(UILSRC)/libUil.a
! UILLIB = 			  $(DEPUILLIB)
! 
!  DEPTESTCOMLIB =  $(TESTCOMSRC)/libCommon.a
! TESTCOMLIB = 			  $(DEPTESTCOMLIB)
! 
!   LINTMRESOURCE = $(MRESOURCESRC)/libMrm.a
! LINTXMWIDGETLIB = $(MWIDGETSRC)/llib-l/Xm.ln
!      LINTXMTOOL = $(MTOOLKITSRC)/llib-lXt.ln
!      LINTUILLIB = $(UILSRC)/llib-lUil.ln
! 
!       YACCFLAGS =
!        UILFLAGS =
! 
!          RM_CMD = $(RM) *.CKP *.ln *.BAK *.bak *.o core errs ,* *~ *.a .emacs_* tags TAGS make.log MakeOut   *.Dat
! 
!     STD_DEFINES =  -DSTRINGS_ALIGNED -DNO_REGEX -DNO_REGCOMP -DNO_CONST -D_NO_PROTO
! 
!         DEPLIBS1 = $(DEPLIBS)
!         DEPLIBS2 = $(DEPLIBS)
!         DEPLIBS3 = $(DEPLIBS)
  
! # -------------------------------------------------------------------------
! # Imake rules for building libraries, programs, scripts, and data files
! # rules:  $XConsortium: Imake.rules,v 1.123 91/09/16 20:12:16 rws Exp $
  
! #
! # (c) Copyright 1989, 1990, 1991, 1992, 1993 OPEN SOFTWARE FOUNDATION, INC.
! # ALL RIGHTS RESERVED
! #
! #
! # Motif Release 1.2.2
! #
! #   $RCSfile: Motif.rules,v $ $Revision: 1.5.8.8 $ $Date: 92/12/10 18:43:17 $
  
! #  Rule for making shadow trees.
  
! # -------------------------------------------------------------------------
  # start of Imakefile
  
! MIPSFLAGS=
! SYS_MODULE=	ultrix_system
  
! EXTRA_LIBRARIES =     $(SUNFLAGS) $(MIPSFLAGS) $(SGIFLAGS)
  
     INSTPGMFLAGS =  $(INSTKMEMFLAGS)
  LOCAL_LIBRARIES = $(XAWLIB) $(XTOOLLIB) $(XMULIB) $(XLIB)
         INCLUDES = -I. -I$(TOOLKITSRC) -I$(TOP) -I$(TOP)/X11
! #       INCLUDES = -I. -I$(TOOLKITSRC) -I$(TOP) -I$(TOP)/X11 -I/usr/include/bsd
!      CDEBUGFLAGS = -O
!            SRCS = TimeChart.c StripChart.c misc.c $(SYS_MODULE).c xperfmon.c nfs.c
!            OBJS = TimeChart.o StripChart.o misc.o $(SYS_MODULE).o xperfmon.o nfs.o
  
!         PROGRAM = xperfmon++
  
  all:: xperfmon++
  
  xperfmon++: $(OBJS) $(DEPLIBS)
! 	 $(RM) $@
! 	$(CC) -o $@ $(OBJS) $(LDOPTIONS) $(LOCAL_LIBRARIES) $(LDLIBS) $(EXTRA_LOAD_FLAGS)
! 
! saber_xperfmon++:: $(SRCS)
! 	# load $(ALLDEFINES) $(SRCS) $(LOCAL_LIBRARIES) $(SYS_LIBRARIES) $(EXTRA_LIBRARIES)
! 
! osaber_xperfmon++:: $(OBJS)
! 	# load $(ALLDEFINES) $(OBJS) $(LOCAL_LIBRARIES) $(SYS_LIBRARIES) $(EXTRA_LIBRARIES)
  
  install:: xperfmon++
! 	 @if [ -d $(DESTDIR)$(BINDIR) ]; then set +x; \
! 		else (set -x; $(MKDIRHIER) $(DESTDIR)$(BINDIR)); fi
! 	$(INSTALL) -c $(INSTPGMFLAGS)  xperfmon++ $(DESTDIR)$(BINDIR)
  
  install.man:: xperfmon++.man
! 	 @if [ -d $(DESTDIR)$(MANDIR) ]; then set +x; \
! 		else (set -x; $(MKDIRHIER) $(DESTDIR)$(MANDIR)); fi
! 	$(INSTALL) -c $(INSTMANFLAGS) xperfmon++.man $(DESTDIR)$(MANDIR)/xperfmon++.$(MANSUFFIX)
  
  depend::
! 	$(DEPEND) $(DEPENDFLAGS) -s "# DO NOT DELETE" -- $(ALLDEFINES) -- $(SRCS)
  
  lint:
  	$(LINT) $(LINTFLAGS) $(SRCS) $(LINTLIBS)
--- 186,516 ----
       INSTINCFLAGS = -m 0444
       INSTMANFLAGS = -m 0444
       INSTDATFLAGS = -m 0444
!     INSTKMEMFLAGS = -g kmem -m 2755
! 
!       PROJECTROOT = /usr/X11R6
  
!      TOP_INCLUDES = -I$(INCROOT)
! 
!       CDEBUGFLAGS = -m486 -O2
          CCOPTIONS =
  
        ALLINCLUDES = $(INCLUDES) $(EXTRA_INCLUDES) $(TOP_INCLUDES) $(STD_INCLUDES)
!        ALLDEFINES = $(ALLINCLUDES) $(STD_DEFINES) $(EXTRA_DEFINES) $(PROTO_DEFINES) $(THREADS_DEFINES) $(DEFINES)
!            CFLAGS = $(CDEBUGFLAGS) $(CCOPTIONS) $(THREADS_CFLAGS) $(ALLDEFINES)
!         LINTFLAGS = $(LINTOPTS) -DLINT $(ALLDEFINES) $(DEPEND_DEFINES)
!          LDPRELIB = -L$(USRLIBDIR)
!         LDPOSTLIB =
!         LDOPTIONS = $(CDEBUGFLAGS) $(CCOPTIONS)  $(EXTRA_LDOPTIONS) $(THREADS_LDFLAGS) $(LOCAL_LDFLAGS) $(LDPRELIB)
!      CXXLDOPTIONS = $(CXXDEBUGFLAGS) $(CXXOPTIONS) $(EXTRA_LDOPTIONS) $(THREADS_CXXLDFLAGS) $(LOCAL_LDFLAGS) $(LDPRELIB)
! 
!            LDLIBS = $(LDPOSTLIB) $(THREADS_LIBS) $(SYS_LIBRARIES) $(EXTRA_LIBRARIES)
  
!            CCLINK = $(CC)
  
!           CXXLINK = $(CXX)
  
+      LDSTRIPFLAGS = -x
     LDCOMBINEFLAGS = -X -r
        DEPENDFLAGS =
  
!         MACROFILE = FreeBSD.cf
!            RM_CMD = $(RM)
  
      IMAKE_DEFINES =
  
           IRULESRC = $(CONFIGDIR)
          IMAKE_CMD = $(IMAKE) -DUseInstalled -I$(IRULESRC) $(IMAKE_DEFINES)
  
!      ICONFIGFILES = $(IRULESRC)/Imake.tmpl $(IRULESRC)/Project.tmpl 			$(IRULESRC)/site.def $(IRULESRC)/$(MACROFILE) 			$(IRULESRC)/xfree86.cf $(IRULESRC)/xf86.rules $(IRULESRC)/xf86site.def $(IRULESRC)/host.def $(EXTRA_ICONFIGFILES)
  
! # ----------------------------------------------------------------------
! # X Window System Build Parameters and Rules
! # $XConsortium: Project.tmpl,v 1.248 95/01/06 19:12:51 gildea Exp $
! # $XFree86: xc/config/cf/Project.tmpl,v 3.12 1995/01/25 10:42:48 dawes Exp $
  
! # -----------------------------------------------------------------------
! # X Window System make variables; these need to be coordinated with rules
! 
!            BINDIR = /usr/X11R6/bin
       BUILDINCROOT = $(TOP)
        BUILDINCDIR = $(BUILDINCROOT)/X11
        BUILDINCTOP = ..
+       BUILDLIBDIR = $(TOP)/usrlib
+       BUILDLIBTOP = ..
             INCDIR = $(INCROOT)/X11
             ADMDIR = /usr/adm
             LIBDIR = $(USRLIBDIR)/X11
  
            FONTDIR = $(LIBDIR)/fonts
           XINITDIR = $(LIBDIR)/xinit
             XDMDIR = $(LIBDIR)/xdm
             TWMDIR = $(LIBDIR)/twm
!            XSMDIR = $(LIBDIR)/xsm
             NLSDIR = $(LIBDIR)/nls
+        XLOCALEDIR = $(LIBDIR)/locale
          PEXAPIDIR = $(LIBDIR)/PEX
        XAPPLOADDIR = $(LIBDIR)/app-defaults
         FONTCFLAGS = -t
  
       INSTAPPFLAGS = $(INSTDATFLAGS)
  
                RGB = rgb
              FONTC = bdftopcf
          MKFONTDIR = mkfontdir
  
         DOCUTILSRC = $(TOP)/doc/util
!        XDOCMACROS = $(DOCUTILSRC)/macros.t
!        XIDXMACROS = $(DOCUTILSRC)/indexmacros.t
!        PROGRAMSRC = $(TOP)/programs
             LIBSRC = $(TOP)/lib
            FONTSRC = $(TOP)/fonts
         INCLUDESRC = $(TOP)/X11
!         SERVERSRC = $(TOP)/programs/Xserver
         CONTRIBSRC = $(TOP)/../contrib
+    UNSUPPORTEDSRC = $(TOP)/unsupported
             DOCSRC = $(TOP)/doc
!            RGBSRC = $(TOP)/programs/rgb
!       BDFTOPCFSRC = $(PROGRAMSRC)/bdftopcf
!      MKFONTDIRSRC = $(PROGRAMSRC)/mkfontdir
!     FONTSERVERSRC = $(PROGRAMSRC)/xfs
!        FONTINCSRC = $(TOP)/include/fonts
!         EXTINCSRC = $(TOP)/include/extensions
!      TRANSCOMMSRC = $(LIBSRC)/xtrans
!    TRANS_INCLUDES = -I$(TRANSCOMMSRC)
! 
! # $XConsortium: bsdLib.tmpl,v 1.2 95/01/23 19:07:12 kaleb Exp $
! # $XFree86: xc/config/cf/bsdLib.tmpl,v 3.1 1995/01/28 15:40:19 dawes Exp $
! 
!           XLIBSRC = $(LIBSRC)/X11
! 
! SOXLIBREV = 6.0
! DEPXONLYLIB =
! XONLYLIB =  -lX11
! 
! LINTXONLY = $(LINTLIBDIR)/llib-lX11.ln
! 
!          XLIBONLY = $(XONLYLIB)
! 
!       XEXTLIBSRC = $(LIBSRC)/Xext
!    LBXXEXTLIBSRC = $(TOP)/workInProgress/lbx/lib/Xext
! 
!     XEXEXTLIBSRC = $(LIBSRC)/XExExt
! 
! SOXEXTREV = 6.0
! DEPXEXTLIB =
! XEXTLIB =  -lXext
! 
! LINTXEXT = $(LINTLIBDIR)/llib-lXext.ln
! 
! SOXEXTREV = 6.0
! DEPLBXXEXTLIB =
! LBXXEXTLIB =  -llbxXext
! 
! LINTLBXXEXT = $(LINTLIBDIR)/llib-llbxXext.ln
! 
! DEPXEXEXTLIB = $(USRLIBDIR)/libXExExt.a
! XEXEXTLIB =  -lXExExt
! 
! LINTXEXEXT = $(LINTLIBDIR)/llib-lXExExt.ln
! 
!      EXTENSIONLIB = $(XEXEXTLIB) $(XEXTLIB)
!   DEPEXTENSIONLIB = $(DEPXEXEXTLIB) $(DEPXEXTLIB)
!     LINTEXTENSION = $(LINTXEXEXT) $(LINTXEXT)
! 
!  LINTEXTENSIONLIB = $(LINTEXTENSION)
!           DEPXLIB = $(DEPEXTENSIONLIB) $(DEPXONLYLIB)
!              XLIB = $(EXTENSIONLIB) $(XONLYLIB)
!          LINTXLIB = $(LINTXONLYLIB)
! 
           XAUTHSRC = $(LIBSRC)/Xau
! 
! DEPXAUTHLIB = $(USRLIBDIR)/libXau.a
! XAUTHLIB =  -lXau
! 
! LINTXAUTH = $(LINTLIBDIR)/llib-lXau.ln
! 
!       XDMCPLIBSRC = $(LIBSRC)/Xdmcp
! 
! DEPXDMCPLIB = $(USRLIBDIR)/libXdmcp.a
! XDMCPLIB =  -lXdmcp
! 
! LINTXDMCP = $(LINTLIBDIR)/llib-lXdmcp.ln
! 
             XMUSRC = $(LIBSRC)/Xmu
+ 
+ SOXMUREV = 6.0
+ DEPXMULIB =
+ XMULIB =  -lXmu $(LDPRELIB) $(XTOOLONLYLIB) $(XONLYLIB)
+ 
+ LINTXMU = $(LINTLIBDIR)/llib-lXmu.ln
+ 
+        OLDXLIBSRC = $(LIBSRC)/oldX
+ 
+ SOOLDXREV = 6.0
+ DEPOLDXLIB =
+ OLDXLIB =  -loldX
+ 
+ LINTOLDX = $(LINTLIBDIR)/llib-loldX.ln
+ 
         TOOLKITSRC = $(LIBSRC)/Xt
+ 
+ SOXTREV = 6.0
+ DEPXTOOLONLYLIB =
+ XTOOLONLYLIB =  -lXt
+ 
+ LINTXTOOLONLY = $(LINTLIBDIR)/llib-lXt.ln
+ 
+       DEPXTOOLLIB = $(DEPXTOOLONLYLIB) $(DEPSMLIB) $(DEPICELIB)
+          XTOOLLIB = $(XTOOLONLYLIB) $(SMLIB) $(ICELIB)
+      LINTXTOOLLIB = $(LINTXTOOLONLYLIB)
+ 
         AWIDGETSRC = $(LIBSRC)/Xaw
  
! SOXAWREV = 6.0
! DEPXAWLIB =
! XAWLIB =  -lXaw
  
! LINTXAW = $(LINTLIBDIR)/llib-lXaw.ln
  
!        XTFSRC = $(TOP)/workInProgress/Xtf
  
! SOXTFREV = 0.7
! DEPXTFLIB =
! XTFLIB =  -lXtf
  
! LINTXTF = $(LINTLIBDIR)/llib-lXtf.ln
  
!        FRESCOSRC = $(TOP)/workInProgress/Fresco
! 
! SOFRESCOREV = 0.7
! DEPFRESCOLIB =
! FRESCOLIB =  -lFresco
! 
! LINTFRESCO = $(LINTLIBDIR)/llib-lFresco.ln
! 
!          XILIBSRC = $(LIBSRC)/Xi
! 
! SOXINPUTREV = 6.0
! DEPXILIB =
! XILIB =  -lXi
! 
! LINTXI = $(LINTLIBDIR)/llib-lXi.ln
! 
!       XTESTLIBSRC = $(LIBSRC)/Xtst
! 
! SOXTESTREV = 6.0
! DEPXTESTLIB =
! XTESTLIB =  -lXtst
! 
! LINTXTEST = $(LINTLIBDIR)/llib-lXtst.ln
! 
!         PEXLIBSRC = $(LIBSRC)/PEX5
! 
! SOPEXREV = 6.0
! DEPPEXLIB =
! PEXLIB =  -lPEX5
! 
! LINTPEX = $(LINTLIBDIR)/llib-lPEX5.ln
! 
!         XIELIBSRC = $(LIBSRC)/XIE
! 
! SOXIEREV = 6.0
! DEPXIELIB =
! XIELIB =  -lXIE
  
! LINTXIE = $(LINTLIBDIR)/llib-lXIE.ln
  
!       PHIGSLIBSRC = $(LIBSRC)/PHIGS
! 
! DEPPHIGSLIB = $(USRLIBDIR)/libphigs.a
! PHIGSLIB =  -lphigs
! 
! LINTPHIGS = $(LINTLIBDIR)/llib-lphigs.ln
! 
! DEPXBSDLIB = $(USRLIBDIR)/libXbsd.a
! XBSDLIB =  -lXbsd
! 
! LINTXBSD = $(LINTLIBDIR)/llib-lXbsd.ln
! 
!            ICESRC = $(LIBSRC)/ICE
! 
! SOICEREV = 6.0
! DEPICELIB =
! ICELIB =  -lICE
! 
! LINTICE = $(LINTLIBDIR)/llib-lICE.ln
! 
!             SMSRC = $(LIBSRC)/SM
! 
! SOSMREV = 6.0
! DEPSMLIB =
! SMLIB =  -lSM
! 
! LINTSM = $(LINTLIBDIR)/llib-lSM.ln
! 
!          FSLIBSRC = $(LIBSRC)/FS
! 
! DEPFSLIB = $(USRLIBDIR)/libFS.a
! FSLIB =  -lFS
! 
! LINTFS = $(LINTLIBDIR)/llib-lFS.ln
! 
!          FONTLIBSRC = $(LIBSRC)/font
! 
! DEPFONTLIB = $(USRLIBDIR)/libfont.a
! FONTLIB =  -lfont
! 
! LINTFONT = $(LINTLIBDIR)/llib-lfont.ln
! 
!           DEPLIBS = $(DEPXAWLIB) $(DEPXMULIB) $(DEPXTOOLLIB) $(DEPXLIB)
! 
!          DEPLIBS1 = $(DEPLIBS)
!          DEPLIBS2 = $(DEPLIBS)
!          DEPLIBS3 = $(DEPLIBS)
! 
!         CONFIGDIR = $(LIBDIR)/config
! 
! # -----------------------------------------------------------------------
  # start of Imakefile
  
! BSDFLAGS=	-lkvm
! SYS_MODULE=     bsd_system
! CC=		gcc
  
! EXTRA_LIBRARIES =     $(SUNFLAGS) $(MIPSFLAGS) $(SGIFLAGS) $(BSDFLAGS)
  
     INSTPGMFLAGS =  $(INSTKMEMFLAGS)
  LOCAL_LIBRARIES = $(XAWLIB) $(XTOOLLIB) $(XMULIB) $(XLIB)
         INCLUDES = -I. -I$(TOOLKITSRC) -I$(TOP) -I$(TOP)/X11
! #      SRCS = TimeChart.c StripChart.c misc.c $(SYS_MODULE).c xperfmon.c nfs.c
! #      OBJS = TimeChart.o StripChart.o misc.o $(SYS_MODULE).o xperfmon.o nfs.o
!        SRCS = TimeChart.c StripChart.c misc.c $(SYS_MODULE).c xperfmon.c
!        OBJS = TimeChart.o StripChart.o misc.o $(SYS_MODULE).o xperfmon.o
  
!  PROGRAM = xperfmon++
  
  all:: xperfmon++
  
  xperfmon++: $(OBJS) $(DEPLIBS)
! 	$(RM) $@
! 	$(CCLINK) -o $@ $(LDOPTIONS) $(OBJS) $(LOCAL_LIBRARIES) $(LDLIBS)  $(EXTRA_LOAD_FLAGS)
  
  install:: xperfmon++
! 	@if [ -d $(DESTDIR)$(BINDIR) ]; then set +x; \
! 	else (set -x; $(MKDIRHIER) $(DESTDIR)$(BINDIR)); fi
! 	$(INSTALL) $(INSTALLFLAGS) $(INSTPGMFLAGS)  xperfmon++ $(DESTDIR)$(BINDIR)/xperfmon++
  
  install.man:: xperfmon++.man
! 	@if [ -d $(DESTDIR)$(MANDIR) ]; then set +x; \
! 	else (set -x; $(MKDIRHIER) $(DESTDIR)$(MANDIR)); fi
! 	$(RM) $(DESTDIR)$(MANDIR)/xperfmon++.$(MANSUFFIX)*
! 	$(INSTALL) -c $(INSTMANFLAGS) xperfmon++.man \
!  $(DESTDIR)$(MANDIR)/xperfmon++.$(MANSUFFIX)
! 	-$(COMPRESSMANCMD) $(DESTDIR)$(MANDIR)/xperfmon++.$(MANSUFFIX)
  
  depend::
! 	$(DEPEND) $(DEPENDFLAGS) -- $(ALLDEFINES) $(DEPEND_DEFINES) -- $(SRCS)
  
  lint:
  	$(LINT) $(LINTFLAGS) $(SRCS) $(LINTLIBS)
***************
*** 395,424 ****
  	$(LINT) $(LINTFLAGS) $(FILE) $(LINTLIBS)
  
  clean::
! 	$(RM) $(PROGRAM)
  
  xperfmon++.pure: $(OBJS)
  	/usr/ccf/purify/purify $(CC) -o $@ $(OBJS) $(LOCAL_LIBS) $(LOCAL_LIBRARIES) $(EXTRA_LIBRARIES)
  
  install:: XPerfmon++.ad
! 	 @if [ -d $(DESTDIR)$(XAPPLOADDIR) ]; then set +x; \
! 		else (set -x; $(MKDIRHIER) $(DESTDIR)$(XAPPLOADDIR)); fi
! 	$(INSTALL) -c $(INSTAPPFLAGS) XPerfmon++.ad $(DESTDIR)$(XAPPLOADDIR)/XPerfmon++
  
  clean::
  	$(RM) *pure* *.pure*
  
! # -------------------------------------------------------------------------
  # common rules for all Makefiles - do not edit
  
  emptyrule::
  
  clean::
! 	$(RM_CMD) "#"*
  
  Makefile::
  	-@if [ -f Makefile ]; then set -x; \
! 		$(RM) Makefile.bak; $(MV) Makefile Makefile.bak; \
  	else exit 0; fi
  	$(IMAKE_CMD) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR)
  
--- 518,551 ----
  	$(LINT) $(LINTFLAGS) $(FILE) $(LINTLIBS)
  
  clean::
! 	$(RM) xperfmon++
  
  xperfmon++.pure: $(OBJS)
  	/usr/ccf/purify/purify $(CC) -o $@ $(OBJS) $(LOCAL_LIBS) $(LOCAL_LIBRARIES) $(EXTRA_LIBRARIES)
  
  install:: XPerfmon++.ad
! 	@if [ -d $(DESTDIR)$(XAPPLOADDIR) ]; then set +x; \
! 	else (set -x; $(MKDIRHIER) $(DESTDIR)$(XAPPLOADDIR)); fi
! 	$(INSTALL) $(INSTALLFLAGS) $(INSTAPPFLAGS) XPerfmon++.ad $(DESTDIR)$(XAPPLOADDIR)/XPerfmon++
  
  clean::
  	$(RM) *pure* *.pure*
  
! # -----------------------------------------------------------------------
  # common rules for all Makefiles - do not edit
  
+ .c.i:
+ 	$(RM) $@
+ 	$(CC) -E $(CFLAGS) $(_NOOP_) $*.c > $@
+ 
  emptyrule::
  
  clean::
! 	$(RM_CMD) *.CKP *.ln *.BAK *.bak *.o core errs ,* *~ *.a .emacs_* tags TAGS make.log MakeOut *.core "#"*
  
  Makefile::
  	-@if [ -f Makefile ]; then set -x; \
! 	$(RM) Makefile.bak; $(MV) Makefile Makefile.bak; \
  	else exit 0; fi
  	$(IMAKE_CMD) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR)
  
***************
*** 426,438 ****
  	$(TAGS) -w *.[ch]
  	$(TAGS) -xw *.[ch] > TAGS
  
! saber:
! 	# load $(ALLDEFINES) $(SRCS)
! 
! osaber:
! 	# load $(ALLDEFINES) $(OBJS)
! 
! # -------------------------------------------------------------------------
  # empty rules for directories that do not have SUBDIRS - do not edit
  
  install::
--- 553,559 ----
  	$(TAGS) -w *.[ch]
  	$(TAGS) -xw *.[ch] > TAGS
  
! # -----------------------------------------------------------------------
  # empty rules for directories that do not have SUBDIRS - do not edit
  
  install::
***************
*** 441,549 ****
  install.man::
  	@echo "install.man in $(CURRENT_DIR) done"
  
  Makefiles::
  
  includes::
  
! # -------------------------------------------------------------------------
  # dependencies generated by makedepend
  
  # DO NOT DELETE
! 
! TimeChart.o: /usr/include/stdio.h /usr/include/ansi_compat.h
! TimeChart.o: /usr/include/X11/IntrinsicP.h /usr/include/X11/Intrinsic.h
! TimeChart.o: /usr/include/X11/Xlib.h /usr/include/sys/types.h
! TimeChart.o: /usr/include/X11/X.h /usr/include/X11/Xfuncproto.h
! TimeChart.o: /usr/include/X11/Xosdefs.h /usr/include/stddef.h
! TimeChart.o: /usr/include/X11/Xutil.h /usr/include/X11/Xresource.h
! TimeChart.o: /usr/include/string.h /usr/include/X11/Core.h
! TimeChart.o: /usr/include/X11/Composite.h /usr/include/X11/Constraint.h
! TimeChart.o: /usr/include/X11/Object.h /usr/include/X11/RectObj.h
! TimeChart.o: /usr/include/X11/CoreP.h /usr/include/X11/CompositeP.h
! TimeChart.o: /usr/include/X11/ConstrainP.h /usr/include/X11/ObjectP.h
! TimeChart.o: /usr/include/X11/RectObjP.h /usr/include/X11/StringDefs.h
! TimeChart.o: /usr/include/X11/Xaw/XawInit.h TimeCharP.h TimeChart.h
! TimeChart.o: /usr/include/X11/Xaw/SimpleP.h /usr/include/X11/Xaw/Simple.h
! TimeChart.o: /usr/include/X11/Xmu/Converters.h system.h
! TimeChart.o: /usr/include/X11/Xfuncs.h
! StripChart.o: /usr/include/stdio.h /usr/include/ansi_compat.h
! StripChart.o: /usr/include/X11/IntrinsicP.h /usr/include/X11/Intrinsic.h
! StripChart.o: /usr/include/X11/Xlib.h /usr/include/sys/types.h
! StripChart.o: /usr/include/X11/X.h /usr/include/X11/Xfuncproto.h
! StripChart.o: /usr/include/X11/Xosdefs.h /usr/include/stddef.h
! StripChart.o: /usr/include/X11/Xutil.h /usr/include/X11/Xresource.h
! StripChart.o: /usr/include/string.h /usr/include/X11/Core.h
! StripChart.o: /usr/include/X11/Composite.h /usr/include/X11/Constraint.h
! StripChart.o: /usr/include/X11/Object.h /usr/include/X11/RectObj.h
! StripChart.o: /usr/include/X11/CoreP.h /usr/include/X11/CompositeP.h
! StripChart.o: /usr/include/X11/ConstrainP.h /usr/include/X11/ObjectP.h
! StripChart.o: /usr/include/X11/RectObjP.h /usr/include/X11/StringDefs.h
! StripChart.o: /usr/include/X11/Xaw/XawInit.h StripCharP.h StripChart.h
! StripChart.o: /usr/include/X11/Xaw/SimpleP.h /usr/include/X11/Xaw/Simple.h
! StripChart.o: /usr/include/X11/Xmu/Converters.h /usr/include/X11/Xfuncs.h
! misc.o: /usr/include/stdio.h /usr/include/ansi_compat.h
! misc.o: /usr/include/X11/IntrinsicP.h /usr/include/X11/Intrinsic.h
! misc.o: /usr/include/X11/Xlib.h /usr/include/sys/types.h /usr/include/X11/X.h
! misc.o: /usr/include/X11/Xfuncproto.h /usr/include/X11/Xosdefs.h
! misc.o: /usr/include/stddef.h /usr/include/X11/Xutil.h
! misc.o: /usr/include/X11/Xresource.h /usr/include/string.h
! misc.o: /usr/include/X11/Core.h /usr/include/X11/Composite.h
! misc.o: /usr/include/X11/Constraint.h /usr/include/X11/Object.h
! misc.o: /usr/include/X11/RectObj.h /usr/include/X11/CoreP.h
! misc.o: /usr/include/X11/CompositeP.h /usr/include/X11/ConstrainP.h
! misc.o: /usr/include/X11/ObjectP.h /usr/include/X11/RectObjP.h
! misc.o: /usr/include/X11/StringDefs.h /usr/include/X11/Xmu/Misc.h system.h
! misc.o: StripCharP.h StripChart.h /usr/include/X11/Xaw/SimpleP.h
! misc.o: /usr/include/X11/Xaw/Simple.h /usr/include/X11/Xmu/Converters.h
! misc.o: TimeCharP.h TimeChart.h
! ultrix_system.o: /usr/include/X11/IntrinsicP.h /usr/include/X11/Intrinsic.h
! ultrix_system.o: /usr/include/X11/Xlib.h /usr/include/sys/types.h
! ultrix_system.o: /usr/include/ansi_compat.h /usr/include/X11/X.h
! ultrix_system.o: /usr/include/X11/Xfuncproto.h /usr/include/X11/Xosdefs.h
! ultrix_system.o: /usr/include/stddef.h /usr/include/X11/Xutil.h
! ultrix_system.o: /usr/include/X11/Xresource.h /usr/include/string.h
! ultrix_system.o: /usr/include/X11/Core.h /usr/include/X11/Composite.h
! ultrix_system.o: /usr/include/X11/Constraint.h /usr/include/X11/Object.h
! ultrix_system.o: /usr/include/X11/RectObj.h /usr/include/X11/CoreP.h
! ultrix_system.o: /usr/include/X11/CompositeP.h /usr/include/X11/ConstrainP.h
! ultrix_system.o: /usr/include/X11/ObjectP.h /usr/include/X11/RectObjP.h
! ultrix_system.o: system.h /usr/include/stdio.h /usr/include/strings.h
! ultrix_system.o: /usr/include/sys/param.h /usr/include/machine/param.h
! ultrix_system.o: /usr/include/sys/signal.h /usr/include/sys/smp_lock.h
! ultrix_system.o: /usr/include/sys/socket.h /usr/include/sys/vm.h
! ultrix_system.o: /usr/include/sys/vmparam.h /usr/include/machine/vmparam.h
! ultrix_system.o: /usr/include/sys/vmmac.h /usr/include/machine/vm/vmmac_md.h
! ultrix_system.o: /usr/include/sys/vmmeter.h /usr/include/sys/vmsystm.h
! ultrix_system.o: /usr/include/sys/dk.h /usr/include/nlist.h
! ultrix_system.o: /usr/include/sys/buf.h /usr/include/net/if.h
! ultrix_system.o: /usr/include/net/if_arp.h /usr/include/netinet/in.h
! ultrix_system.o: /usr/include/sys/file.h is.h /usr/include/sys/time.h
! ultrix_system.o: loadavg.h /usr/include/sys/fixpoint.h
! ultrix_system.o: /usr/include/machine/cpu.h /usr/include/machine/pcb.h
! ultrix_system.o: /usr/include/sys/cpudata.h
! xperfmon.o: /usr/include/stdio.h /usr/include/ansi_compat.h
! xperfmon.o: /usr/include/X11/IntrinsicP.h /usr/include/X11/Intrinsic.h
! xperfmon.o: /usr/include/X11/Xlib.h /usr/include/sys/types.h
! xperfmon.o: /usr/include/X11/X.h /usr/include/X11/Xfuncproto.h
! xperfmon.o: /usr/include/X11/Xosdefs.h /usr/include/stddef.h
! xperfmon.o: /usr/include/X11/Xutil.h /usr/include/X11/Xresource.h
! xperfmon.o: /usr/include/string.h /usr/include/X11/Core.h
! xperfmon.o: /usr/include/X11/Composite.h /usr/include/X11/Constraint.h
! xperfmon.o: /usr/include/X11/Object.h /usr/include/X11/RectObj.h
! xperfmon.o: /usr/include/X11/CoreP.h /usr/include/X11/CompositeP.h
! xperfmon.o: /usr/include/X11/ConstrainP.h /usr/include/X11/ObjectP.h
! xperfmon.o: /usr/include/X11/RectObjP.h /usr/include/X11/StringDefs.h
! xperfmon.o: /usr/include/X11/Shell.h /usr/include/X11/Xaw/Form.h
! xperfmon.o: /usr/include/X11/Xaw/Label.h /usr/include/X11/Xaw/Simple.h
! xperfmon.o: /usr/include/X11/Xmu/Converters.h /usr/include/X11/Xaw/Box.h
! xperfmon.o: StripChart.h TimeChart.h xperfmon.bm system.h
! nfs.o: /usr/include/stdio.h /usr/include/ansi_compat.h
! nfs.o: /usr/include/sys/types.h /usr/include/sys/socket.h
! nfs.o: /usr/include/net/if.h /usr/include/sys/smp_lock.h
! nfs.o: /usr/include/net/if_arp.h /usr/include/netinet/in.h
! nfs.o: /usr/include/netinet/if_ether.h /usr/include/nlist.h
! nfs.o: /usr/include/fcntl.h /usr/include/sys/file.h /usr/include/sys/vm.h
! nfs.o: /usr/include/sys/vmparam.h /usr/include/machine/vmparam.h
! nfs.o: /usr/include/sys/vmmac.h /usr/include/machine/vm/vmmac_md.h
! nfs.o: /usr/include/sys/vmmeter.h /usr/include/sys/vmsystm.h
! nfs.o: /usr/include/string.h is.h /usr/include/sys/time.h
--- 562,685 ----
  install.man::
  	@echo "install.man in $(CURRENT_DIR) done"
  
+ install.linkkit::
+ 	@echo "install.linkkit in $(CURRENT_DIR) done"
+ 
  Makefiles::
  
  includes::
  
! depend::
! 
! # -----------------------------------------------------------------------
  # dependencies generated by makedepend
  
  # DO NOT DELETE
! TimeChart.o: TimeChart.c /usr/include/stdio.h /usr/include/sys/types.h \
!   /usr/include/sys/cdefs.h /usr/include/machine/endian.h \
!   /usr/include/machine/ansi.h /usr/include/machine/types.h \
!   /usr/X11R6/include/X11/IntrinsicP.h /usr/X11R6/include/X11/Intrinsic.h \
!   /usr/X11R6/include/X11/Xlib.h /usr/X11R6/include/X11/X.h \
!   /usr/X11R6/include/X11/Xfuncproto.h /usr/X11R6/include/X11/Xosdefs.h \
!   /usr/include/stddef.h /usr/X11R6/include/X11/Xutil.h \
!   /usr/X11R6/include/X11/Xresource.h /usr/include/string.h \
!   /usr/X11R6/include/X11/Core.h /usr/X11R6/include/X11/Composite.h \
!   /usr/X11R6/include/X11/Constraint.h /usr/X11R6/include/X11/Object.h \
!   /usr/X11R6/include/X11/RectObj.h /usr/X11R6/include/X11/CoreP.h \
!   /usr/X11R6/include/X11/CompositeP.h /usr/X11R6/include/X11/ConstrainP.h \
!   /usr/X11R6/include/X11/ObjectP.h /usr/X11R6/include/X11/RectObjP.h \
!   /usr/X11R6/include/X11/StringDefs.h /usr/X11R6/include/X11/Xaw/XawInit.h \
!   TimeCharP.h TimeChart.h /usr/X11R6/include/X11/Xaw/SimpleP.h \
!   /usr/X11R6/include/X11/Xaw/Simple.h \
!   /usr/X11R6/include/X11/Xmu/Converters.h system.h \
!   /usr/X11R6/include/X11/Xfuncs.h
! StripChart.o: StripChart.c /usr/include/stdio.h /usr/include/sys/types.h \
!   /usr/include/sys/cdefs.h /usr/include/machine/endian.h \
!   /usr/include/machine/ansi.h /usr/include/machine/types.h \
!   /usr/X11R6/include/X11/IntrinsicP.h /usr/X11R6/include/X11/Intrinsic.h \
!   /usr/X11R6/include/X11/Xlib.h /usr/X11R6/include/X11/X.h \
!   /usr/X11R6/include/X11/Xfuncproto.h /usr/X11R6/include/X11/Xosdefs.h \
!   /usr/include/stddef.h /usr/X11R6/include/X11/Xutil.h \
!   /usr/X11R6/include/X11/Xresource.h /usr/include/string.h \
!   /usr/X11R6/include/X11/Core.h /usr/X11R6/include/X11/Composite.h \
!   /usr/X11R6/include/X11/Constraint.h /usr/X11R6/include/X11/Object.h \
!   /usr/X11R6/include/X11/RectObj.h /usr/X11R6/include/X11/CoreP.h \
!   /usr/X11R6/include/X11/CompositeP.h /usr/X11R6/include/X11/ConstrainP.h \
!   /usr/X11R6/include/X11/ObjectP.h /usr/X11R6/include/X11/RectObjP.h \
!   /usr/X11R6/include/X11/StringDefs.h /usr/X11R6/include/X11/Xaw/XawInit.h \
!   StripCharP.h StripChart.h /usr/X11R6/include/X11/Xaw/SimpleP.h \
!   /usr/X11R6/include/X11/Xaw/Simple.h \
!   /usr/X11R6/include/X11/Xmu/Converters.h /usr/X11R6/include/X11/Xfuncs.h
! misc.o: misc.c /usr/include/stdio.h /usr/include/sys/types.h \
!   /usr/include/sys/cdefs.h /usr/include/machine/endian.h \
!   /usr/include/machine/ansi.h /usr/include/machine/types.h \
!   /usr/X11R6/include/X11/IntrinsicP.h /usr/X11R6/include/X11/Intrinsic.h \
!   /usr/X11R6/include/X11/Xlib.h /usr/X11R6/include/X11/X.h \
!   /usr/X11R6/include/X11/Xfuncproto.h /usr/X11R6/include/X11/Xosdefs.h \
!   /usr/include/stddef.h /usr/X11R6/include/X11/Xutil.h \
!   /usr/X11R6/include/X11/Xresource.h /usr/include/string.h \
!   /usr/X11R6/include/X11/Core.h /usr/X11R6/include/X11/Composite.h \
!   /usr/X11R6/include/X11/Constraint.h /usr/X11R6/include/X11/Object.h \
!   /usr/X11R6/include/X11/RectObj.h /usr/X11R6/include/X11/CoreP.h \
!   /usr/X11R6/include/X11/CompositeP.h /usr/X11R6/include/X11/ConstrainP.h \
!   /usr/X11R6/include/X11/ObjectP.h /usr/X11R6/include/X11/RectObjP.h \
!   /usr/X11R6/include/X11/StringDefs.h /usr/X11R6/include/X11/Xmu/Misc.h \
!   system.h StripCharP.h StripChart.h /usr/X11R6/include/X11/Xaw/SimpleP.h \
!   /usr/X11R6/include/X11/Xaw/Simple.h \
!   /usr/X11R6/include/X11/Xmu/Converters.h TimeCharP.h TimeChart.h
! bsd_system.o: bsd_system.c /usr/X11R6/include/X11/IntrinsicP.h \
!   /usr/X11R6/include/X11/Intrinsic.h /usr/X11R6/include/X11/Xlib.h \
!   /usr/include/sys/types.h /usr/include/sys/cdefs.h \
!   /usr/include/machine/endian.h /usr/include/machine/ansi.h \
!   /usr/include/machine/types.h /usr/X11R6/include/X11/X.h \
!   /usr/X11R6/include/X11/Xfuncproto.h /usr/X11R6/include/X11/Xosdefs.h \
!   /usr/include/stddef.h /usr/X11R6/include/X11/Xutil.h \
!   /usr/X11R6/include/X11/Xresource.h /usr/include/string.h \
!   /usr/X11R6/include/X11/Core.h /usr/X11R6/include/X11/Composite.h \
!   /usr/X11R6/include/X11/Constraint.h /usr/X11R6/include/X11/Object.h \
!   /usr/X11R6/include/X11/RectObj.h /usr/X11R6/include/X11/CoreP.h \
!   /usr/X11R6/include/X11/CompositeP.h /usr/X11R6/include/X11/ConstrainP.h \
!   /usr/X11R6/include/X11/ObjectP.h /usr/X11R6/include/X11/RectObjP.h \
!   system.h /usr/include/stdio.h /usr/include/strings.h /usr/include/unistd.h \
!   /usr/include/sys/unistd.h /usr/include/paths.h /usr/include/kvm.h \
!   /usr/include/nlist.h /usr/include/limits.h /usr/include/machine/limits.h \
!   /usr/include/sys/syslimits.h /usr/include/errno.h /usr/include/sys/file.h \
!   /usr/include/sys/fcntl.h /usr/include/sys/param.h \
!   /usr/include/sys/signal.h /usr/include/machine/signal.h \
!   /usr/include/machine/trap.h /usr/include/machine/param.h \
!   /usr/include/sys/socket.h /usr/include/sys/sysctl.h \
!   /usr/include/sys/time.h /usr/include/time.h /usr/include/sys/ucred.h \
!   /usr/include/sys/proc.h /usr/include/machine/proc.h \
!   /usr/include/sys/rtprio.h /usr/include/sys/select.h /usr/include/vm/vm.h \
!   /usr/include/sys/vmmeter.h /usr/include/sys/queue.h \
!   /usr/include/machine/cpufunc.h /usr/include/machine/spl.h \
!   /usr/include/machine/ipl.h /usr/include/vm/vm_param.h \
!   /usr/include/machine/vmparam.h /usr/include/vm/lock.h \
!   /usr/include/vm/vm_prot.h /usr/include/vm/vm_inherit.h \
!   /usr/include/vm/vm_map.h /usr/include/vm/vm_object.h \
!   /usr/include/vm/vm_page.h /usr/include/vm/vm_pager.h \
!   /usr/include/vm/pmap.h /usr/include/machine/pmap.h \
!   /usr/include/machine/pte.h /usr/include/vm/vm_extern.h \
!   /usr/include/sys/dkstat.h /usr/include/sys/buf.h /usr/include/net/if.h \
!   /usr/include/net/if_arp.h /usr/include/netinet/in.h \
!   /usr/include/nfs/nfsv2.h /usr/include/nfs/nfs.h is.h
! xperfmon.o: xperfmon.c /usr/include/stdio.h /usr/include/sys/types.h \
!   /usr/include/sys/cdefs.h /usr/include/machine/endian.h \
!   /usr/include/machine/ansi.h /usr/include/machine/types.h \
!   /usr/X11R6/include/X11/IntrinsicP.h /usr/X11R6/include/X11/Intrinsic.h \
!   /usr/X11R6/include/X11/Xlib.h /usr/X11R6/include/X11/X.h \
!   /usr/X11R6/include/X11/Xfuncproto.h /usr/X11R6/include/X11/Xosdefs.h \
!   /usr/include/stddef.h /usr/X11R6/include/X11/Xutil.h \
!   /usr/X11R6/include/X11/Xresource.h /usr/include/string.h \
!   /usr/X11R6/include/X11/Core.h /usr/X11R6/include/X11/Composite.h \
!   /usr/X11R6/include/X11/Constraint.h /usr/X11R6/include/X11/Object.h \
!   /usr/X11R6/include/X11/RectObj.h /usr/X11R6/include/X11/CoreP.h \
!   /usr/X11R6/include/X11/CompositeP.h /usr/X11R6/include/X11/ConstrainP.h \
!   /usr/X11R6/include/X11/ObjectP.h /usr/X11R6/include/X11/RectObjP.h \
!   /usr/X11R6/include/X11/StringDefs.h /usr/X11R6/include/X11/Shell.h \
!   /usr/X11R6/include/X11/SM/SMlib.h /usr/X11R6/include/X11/SM/SM.h \
!   /usr/X11R6/include/X11/ICE/ICElib.h /usr/X11R6/include/X11/ICE/ICE.h \
!   /usr/X11R6/include/X11/Xaw/Form.h /usr/X11R6/include/X11/Xaw/Label.h \
!   /usr/X11R6/include/X11/Xaw/Simple.h \
!   /usr/X11R6/include/X11/Xmu/Converters.h /usr/X11R6/include/X11/Xaw/Box.h \
!   StripChart.h TimeChart.h xperfmon.bm system.h
diff -c -N ../xperfmon++/README ./README
*** ../xperfmon++/README	Wed Jul 27 20:29:30 1994
--- ./README	Wed Mar 15 12:42:44 1995
***************
*** 18,20 ****
--- 18,24 ----
  		Research Center, rsmith@proteus.arc.nasa.gov. Imake will build for correct
  		O/S if x11r5 is fully installed in all the right places.
  
+ 
+ 3-15-95		Completely new port of systemdependent file (bsd_system.c) for FreeBSD-2.X
+ 		by Lars Köller @University of Rostock, Germany.
+ 		E-Mail: <lars.koeller@odie.physik2.uni-rostock.de>
diff -c -N ../xperfmon++/TimeChart.h ./TimeChart.h
*** ../xperfmon++/TimeChart.h	Wed Jul 27 20:29:31 1994
--- ./TimeChart.h	Thu Mar  9 15:59:28 1995
***************
*** 88,99 ****
  #define XtCFillRect "FillRect"
  
  #define XtNgetValue "getValue"
! #define XtNhighlight "highlight"
  #define XtNjumpScroll "jumpScroll"
  #define XtNminScale "minScale"
  #define XtNscale "scale"
  #define XtNfillRect "fillRect"
! #define XtNupdate "update"
  #define XtNvmunix "vmunix"
   
  typedef struct _TimeChartRec *TimeChartWidget;
--- 88,99 ----
  #define XtCFillRect "FillRect"
  
  #define XtNgetValue "getValue"
! /* #define XtNhighlight "highlight" */
  #define XtNjumpScroll "jumpScroll"
  #define XtNminScale "minScale"
  #define XtNscale "scale"
  #define XtNfillRect "fillRect"
! /* #define XtNupdate "update" */
  #define XtNvmunix "vmunix"
   
  typedef struct _TimeChartRec *TimeChartWidget;
diff -c -N ../xperfmon++/XPerfmon++.ad.FreeBSD ./XPerfmon++.ad.FreeBSD
*** ../xperfmon++/XPerfmon++.ad.FreeBSD	Thu Jan  1 00:00:00 1970
--- ./XPerfmon++.ad.FreeBSD	Wed Mar 15 10:26:56 1995
***************
*** 0 ****
--- 1,37 ----
+ ! the following specification would set all highAlarm values to 99998.
+ ! this will turn on a green color background for all graphs, even if no other
+ ! resources are set for that graph. Note that if this specification is 
+ ! commented out, the "NFS Server" graph background will be the application
+ ! default color, unless some other resource file has specified it.
+ ! *PerfChart.highAlarm:		99998
+ *perfChartUser.highAlarm:	95
+ *perfChartUser.highWarn:	75
+ 
+ *perfChartSystem.highAlarm:	40
+ *perfChartSystem.highWarn:	25
+ 
+ *perfChartIdle.lowWarn:		10
+ *perfChartIdle.lowAlarm:	5
+ 
+ *perfChartFree.lowWarn:		400
+ *perfChartFree.lowAlarm:	150
+ 
+ *perfChartDisk.highWarn:	50
+ *perfChartDisk.highAlarm:	100
+ 
+ *perfChartIntrpts.highWarn:	500
+ *perfChartIntrpts.highAlarm:	1000
+ 
+ *perfChartInput.highWarn:	500
+ *perfChartInput.highAlarm:	1000
+ 
+ *perfChartOutput.highWarn:	500
+ *perfChartOutput.highAlarm:	1000
+ 
+ *perfChartCollision.highWarn:	20
+ *perfChartCollision.highAlarm:	50
+ 
+ *perfChartNFSClient.highWarn:	100
+ *perfChartNFSClient.highAlarm:	200
+ *font:				6x13
+ 
diff -c -N ../xperfmon++/bsd_system.c ./bsd_system.c
*** ../xperfmon++/bsd_system.c	Thu Jan  1 00:00:00 1970
--- ./bsd_system.c	Thu Mar 23 09:32:02 1995
***************
*** 0 ****
--- 1,412 ----
+ /*
+  * Perfmon Performance Monitor
+  *
+  * Copyright 1985, Massachusetts Institute of Technology
+  * Copyright 1989, PCS Computer Systeme GmbH, West Germany
+  * Copyright 1994, Sterling Software @ NASA-Ames Research Center
+  * Copyright 1995, Regents of the University of California,
+  *                 Lars Köller <lars.koeller@odie.physik2.uni-rostock.de
+  *
+  * Permission to use, copy, modify, distribute, and sell this software and its
+  * documentation for any purpose is hereby granted without fee, provided that
+  * the above copyright notice appear in all copies and that both that
+  * copyright notice and this permission notice appear in supporting
+  * documentation, and that the name of PCS and Sterling Software not be used in advertising or
+  * publicity pertaining to distribution of the software without specific,
+  * written prior permission.  PCS and Sterling Software makes no representations about the
+  * suitability of this software for any purpose.  It is provided "as is"
+  * without express or implied warranty.
+  *
+  * PCS & STERLING SOFTWARE DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING ALL
+  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO EVENT SHALL PCS & STERLING SOFTWARE
+  * BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
+  * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION
+  * OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN 
+  * CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
+  *
+  * Original Author:  Emanuel Jay Berkenbilt, MIT Project Athena
+  * Author:           Thomas A. Baghli, PCS Computer Systeme GmbH, West Germany
+  *                   tom@meepmeep.pcs.com
+  * 1994 Revision
+  * Author:           Roger Smith, Sterling Software @ NASA-Ames Research Center
+  *                   Moffett Field, California, rsmith@proteus.arc.nasa.gov
+  * 1995 FreeBSD 2.x Version
+  * Author:           Lars Koeller, Univerity of Rostock, Germany
+  *                   lars.koeller@odie.physik2.uni-rostock.de
+  */
+ 
+ /* This file contains only system functions - that is the functions that
+  * get the information the performance monitor is monitoring.  No calls
+  * to any X routines should be made here.  The reason for doing this is
+  * so that as the X toolkit becomes available and the X window system 
+  * improves no changes will have to be made to this file, and as this
+  * program is made available for a new type of machine, only this file
+  * will need to be changed.
+  */
+ #include <X11/IntrinsicP.h>
+ 
+ #include "system.h"
+ 
+ #include <stdio.h>
+ #include <strings.h>
+ #include <unistd.h>
+ #include <paths.h>
+ #include <kvm.h>
+ #include <nlist.h>
+ #include <limits.h>
+ #include <errno.h>
+ 
+ #include <sys/file.h>
+ #include <sys/param.h>
+ #include <sys/socket.h>
+ #include <sys/sysctl.h>
+ #include <sys/dkstat.h>
+ #include <sys/buf.h>
+ #include <sys/vmmeter.h>
+ #include <vm/vm.h>
+ #include <net/if.h>
+ #include <netinet/in.h>
+ 
+ #include <sys/mount.h>
+ #include <nfs/nfsv2.h>
+ #include <nfs/nfs.h>
+ 
+ #include "is.h"
+ 
+ #ifndef TRUE
+ #define TRUE 1
+ #define FALSE 0
+ #endif
+ 
+ #define WANT_STAT(x) (poss_stats[(x)] != NO_STAT)
+ 
+ /*
+     Function Prototypes
+ */    
+ static void kread(int, void *, size_t);
+ 
+ /*
+     Variables & Structs
+ */
+ static unsigned long *intrcnt;
+ static int nintr, hz;
+ static kvm_t *kd;
+ static char errbuf[_POSIX2_LINE_MAX];
+ static char dr_name[DK_NDRIVE][DK_NAMELEN];
+ static double etime;
+ static char *defdrives[] = { "wd0", "wd1", "sd0", "sd1" };
+ static int num_stats, poss_stats[NUM_POSSIBLE_STATS];
+ 
+ int current_values[NUM_GRAPHS];
+ stat_type stats;
+ 
+ extern Widget perfmon[NUM_GRAPHS];
+ 
+ static struct packet {
+     int input, output, collisions;
+ } packets, old_packets;
+ 
+ static struct nfsstats nfsstats;
+ static struct _nfsStats {
+     int nfsServer, nfsClient;
+ } nfsStats, old_nfsStats;
+ 
+ struct nlist nl[] = {
+ #define X_CPTIME	0
+ 	{ "_cp_time" },
+ #define X_TOTAL	 	1
+ 	{ "_total" },
+ #define X_SUM	   	2
+ 	{ "_cnt" },
+ #define X_BOOTTIME      3
+ 	{ "_boottime" },
+ #define X_DKXFER	4
+ 	{ "_dk_xfer" },
+ #define X_HZ	    	5
+ 	{ "_hz" },
+ #define N_IFNET       	6
+ 	{ "_ifnet" },
+ #define X_DK_NAMES	7
+ 	{ "_dk_names"},
+ #define X_DK_NDRIVE     8
+         { "_dk_ndrive" },
+ #define X_INTRCNT 	9
+         { "_intrcnt" },
+ #define X_EINTRCNT 	10
+         { "_eintrcnt" },
+         { "" },
+ };
+ 
+ struct {
+ 	long    time[CPUSTATES];
+ 	long    xfer[DK_NDRIVE];
+ 	struct  vmtotal Total;
+ 	struct  vmmeter Sum;
+ 	struct  vmmeter Rate;
+ 	int interrupts;
+ } s, s1;
+ 
+ #define total s.Total
+ #define rate s.Rate
+ #define sum  s.Sum
+ #define pgtok(a) ((a) * sum.v_page_size >> 10)
+ 
+ 
+ /*
+     This routine does all necessary setting up of structures
+     that will handle system calls.
+ */
+ void sys_setup()
+ {
+     get_namelist("/kernel", _PATH_KMEM);
+     collect_stats();
+     etime = 1.0;
+ }
+ 
+ 
+ /*
+     Update the data structures
+ */
+ void update_stats()
+ {
+     int state;
+     double pct, tot;;
+ 
+     collect_stats();
+ 
+     tot = 0;
+     for (state = 0; state < CPUSTATES; ++state)
+         tot += s.time[state];
+     if (tot)
+         pct = 100 / tot;
+     else
+         pct = 0;
+     current_values[USER_CPU_PERCENTAGE] = (s.time[CP_USER] + s.time[CP_NICE]) * pct;
+     current_values[SYSTEM_CPU_PERCENTAGE] = (s.time[CP_SYS] + s.time[CP_INTR]) * pct;;
+     current_values[IDLE_CPU_PERCENTAGE] = s.time[CP_IDLE] * pct;
+ 
+     if (perfmon[FREE_MEM])
+ 	current_values[FREE_MEM] = pgtok(total.t_free);
+     if (perfmon[DISK_TRANSFERS])
+ 	current_values[DISK_TRANSFERS] = total_disk_transfers();
+     if (perfmon[INTERRUPTS])
+         current_values[INTERRUPTS] = s.interrupts - s1.interrupts;
+     if (perfmon[INPUT_PACKETS])
+ 	current_values[INPUT_PACKETS] = packets.input - old_packets.input;
+     if (perfmon[OUTPUT_PACKETS])
+ 	current_values[OUTPUT_PACKETS] = packets.output - old_packets.output;
+     if (perfmon[COLLISION_PACKETS])
+ 	current_values[COLLISION_PACKETS] = packets.collisions - old_packets.collisions;
+     if (perfmon[NFS_CLIENT_CALLS])
+ 	current_values[NFS_CLIENT_CALLS] = nfsStats.nfsClient - old_nfsStats.nfsClient;
+     if (perfmon[NFS_SERVER_CALLS])
+ 	current_values[NFS_SERVER_CALLS] = nfsStats.nfsServer - old_nfsStats.nfsServer;
+ }
+ 
+ 
+ /*
+     Collect the overall disk transfer rates
+ */
+ int
+ total_disk_transfers()
+ {
+     register int i, total_xfers = 0;
+ 
+     for(i=0; i < DK_NDRIVE; i++)
+ 	total_xfers += s.xfer[i];
+     return(total_xfers/etime);
+ }
+ 
+ 
+ /*
+     Collect all the data
+ */
+ collect_stats()
+ {
+     off_t ifnetaddr;
+     register int i, tmp;
+     int mib[3], size, state;
+ 
+     kread(X_CPTIME, s.time, sizeof(s.time));
+     kread(X_DKXFER, s.xfer, sizeof(s.xfer));
+     kread(X_SUM, &sum, sizeof(sum) );
+     size = sizeof(total);
+     mib[0] = CTL_VM;
+     mib[1] = VM_METER;
+     if (sysctl(mib, 2, &total, &size, NULL, 0) < 0) {
+         printf("Can't get kerninfo: %s\n", strerror(errno));
+         bzero(&total, sizeof(total));
+     }
+ 
+     nintr = nl[X_EINTRCNT].n_value - nl[X_INTRCNT].n_value;
+     intrcnt = (unsigned long *) malloc((size_t) nintr);
+     nintr /= sizeof(long);    
+     kread(X_INTRCNT, intrcnt, (size_t) nintr*sizeof(long));
+     s1.interrupts = s.interrupts;
+     s.interrupts = 0;
+     for (i = 0; i < nintr; i++)
+         s.interrupts += *(intrcnt + i);
+     
+     etime = 0;
+     for (i=0; i < DK_NDRIVE; i++) {
+ 	tmp = s.xfer[i];
+ 	s.xfer[i] -= s1.xfer[i];
+ 	s1.xfer[i] = tmp;
+     }
+     for (i=0; i < CPUSTATES; i++) {
+ 	tmp = s.time[i];
+ 	s.time[i] -= s1.time[i];
+ 	s1.time[i] = tmp;
+ 	etime += s.time[i];
+     }
+     if(etime == 0.)
+ 	etime = 1.;
+     etime /= hz;
+ 
+ /*
+     Collect the Network-Traffic
+ */
+ 
+     if (nl[N_IFNET].n_value != 0) {
+ 	struct ifnet ifnet;
+ 	kread(N_IFNET, &ifnetaddr, sizeof(ifnetaddr));
+ 	old_packets = packets;
+ 	packets.input = packets.output = packets.collisions = 0;
+ 	while (ifnetaddr) {
+ 	    kvm_read(kd, ifnetaddr, &ifnet, sizeof ifnet );
+ 	    packets.input += ifnet.if_ipackets;
+ 	    packets.output += ifnet.if_opackets;
+ 	    packets.collisions += ifnet.if_collisions;
+ 	    ifnetaddr = (u_long) ifnet.if_next;
+ 	}
+     }
+ 
+ /*
+     Collect the NFS and RPC Calls
+ */
+ 
+     size = sizeof(nfsstats);
+     mib[0] = CTL_FS;
+     mib[1] = MOUNT_NFS;
+     mib[2] = NFS_NFSSTATS;
+ 
+     if (sysctl( mib, 3, &nfsstats, &size, NULL, 0) < 0)
+         return;
+     else {
+         old_nfsStats = nfsStats;
+ 
+         nfsStats.nfsClient = nfsstats.rpccnt[NFSPROC_GETATTR] + 
+                              nfsstats.rpccnt[NFSPROC_SETATTR] +
+                              nfsstats.rpccnt[NFSPROC_LOOKUP] +
+                              nfsstats.rpccnt[NFSPROC_READLINK] +
+                              nfsstats.rpccnt[NFSPROC_READ] +
+                              nfsstats.rpccnt[NFSPROC_WRITE] +
+                              nfsstats.rpccnt[NFSPROC_CREATE] +
+                              nfsstats.rpccnt[NFSPROC_REMOVE] +
+                              nfsstats.rpccnt[NFSPROC_RENAME] +
+                              nfsstats.rpccnt[NFSPROC_LINK] +
+                              nfsstats.rpccnt[NFSPROC_SYMLINK] +
+                              nfsstats.rpccnt[NFSPROC_MKDIR] +
+                              nfsstats.rpccnt[NFSPROC_RMDIR] + 
+                              nfsstats.rpccnt[NFSPROC_READDIR] +
+                              nfsstats.rpccnt[NFSPROC_STATFS] +
+                              nfsstats.rpccnt[NQNFSPROC_READDIRLOOK] +
+                              nfsstats.rpccnt[NQNFSPROC_GETLEASE] +
+                              nfsstats.rpccnt[NQNFSPROC_VACATED] +
+                              nfsstats.rpccnt[NQNFSPROC_EVICTED];
+ 
+         nfsStats.nfsServer = nfsstats.srvrpccnt[NFSPROC_GETATTR] + 
+                              nfsstats.srvrpccnt[NFSPROC_SETATTR] +
+                              nfsstats.srvrpccnt[NFSPROC_LOOKUP] +
+                              nfsstats.srvrpccnt[NFSPROC_READLINK] +
+                              nfsstats.srvrpccnt[NFSPROC_READ] +
+                              nfsstats.srvrpccnt[NFSPROC_WRITE] +
+                              nfsstats.srvrpccnt[NFSPROC_CREATE] +
+                              nfsstats.srvrpccnt[NFSPROC_REMOVE] +
+                              nfsstats.srvrpccnt[NFSPROC_RENAME] +
+                              nfsstats.srvrpccnt[NFSPROC_LINK] +
+                              nfsstats.srvrpccnt[NFSPROC_SYMLINK] +
+                              nfsstats.srvrpccnt[NFSPROC_MKDIR] +
+                              nfsstats.srvrpccnt[NFSPROC_RMDIR] + 
+                              nfsstats.srvrpccnt[NFSPROC_READDIR] +
+                              nfsstats.srvrpccnt[NFSPROC_STATFS] +
+                              nfsstats.srvrpccnt[NQNFSPROC_READDIRLOOK] +
+                              nfsstats.srvrpccnt[NQNFSPROC_GETLEASE] +
+                              nfsstats.srvrpccnt[NQNFSPROC_VACATED] +
+                              nfsstats.srvrpccnt[NQNFSPROC_EVICTED];
+     }
+ }
+ 
+ 
+ /*
+     Reads the nlist from the kernel
+ */
+ int
+ get_namelist(kernel_name, memory_name)
+     char *kernel_name, *memory_name;
+ {
+     time_t now;
+     time_t boottime;
+     register int i, c;
+     int nintv;
+ 
+     kd = kvm_openfiles(NULL, NULL, NULL, O_RDONLY, errbuf);
+     if (kd == 0) {
+         (void)fprintf(stderr, "xperfmon++: kvm_openfiles: %s\n", errbuf);
+         exit(1);
+     }
+ 
+     if ((c = kvm_nlist(kd, nl)) != 0) {
+         if (c > 0) {
+             (void)fprintf(stderr,"xperfmon++: undefined symbols:");
+             for (c = 0; c < sizeof(nl)/sizeof(nl[0]); c++)
+                 if (nl[c].n_type == 0)
+                     fprintf(stderr, " %s", nl[c].n_name);
+             (void)fputc('\n', stderr);
+         } else
+             (void)fprintf(stderr, "xperfmon++: kvm_nlist: %s\n", kvm_geterr(kd));            exit(1);
+     }
+ 
+     kread(X_BOOTTIME, &boottime, sizeof(boottime));
+     kread(X_HZ, &hz, sizeof(hz));
+     for (i = 0; i < DK_NDRIVE; i++) {
+ 	strcpy(dr_name[i], "xx");
+     }
+     time(&now);
+     nintv = now - boottime;
+     if (nintv <= 0 || nintv > 60*60*24*365*10) {
+ 	fprintf(stderr,
+ 	    "Time makes no sense... namelist must be wrong.\n");
+ 	exit(1);
+     }
+     return(nintv);
+ }
+ 
+ 
+ /*
+     Kread reads something from the kernel, given its nlist index.
+ */
+ static void
+ kread(nlx, addr, size)
+         int nlx;
+         void *addr;
+         size_t size;
+ {
+         char *sym;
+         
+         if (nl[nlx].n_type == 0 || nl[nlx].n_value == 0) {
+                 sym = nl[nlx].n_name;
+                 if (*sym == '_')
+                         ++sym;
+                 (void)fprintf(stderr,
+                     "xpermon++: symbol %s not defined\n", sym);
+                 exit(1);
+         }
+         if (kvm_read(kd, nl[nlx].n_value, addr, size) != size) {
+                 sym = nl[nlx].n_name;
+                 if (*sym == '_')
+                        ++sym;
+                 (void)fprintf(stderr, "xperfmon++: %s: %s\n", sym, kvm_geterr(kd));
+                 exit(1);
+         }
+ }
