# Created by: Eugene Grosbein <eugen@FreeBSD.org>
# $FreeBSD$

PORTNAME=	cpupdate
DISTVERSION=	g20180302
CATEGORIES=	sysutils

MAINTAINER=	eugen@FreeBSD.org
COMMENT=	CPU microcode update utility

LICENSE=	BSD2CLAUSE
LICENSE_FILE=	${WRKSRC}/LICENSE

USE_GITHUB=	yes
GH_ACCOUNT=	kernschmelze
GH_PROJECT=	${PORTNAME}
GH_TAGNAME=	58bc0ca

PLIST_FILES=	bin/${PORTNAME} man/man8/${PORTNAME}.8.gz

CPM_ACCOUNT=	platomav
CPM_PROJECT=	CPUMicrocodes
CPM_TAGNAME=	18a85ff

OPTIONS_DEFINE=	CPM
CPM_DESC=	Download platomav/CPUMicrocodes collection
CPM_GH_ACCOUNT=	${CPM_ACCOUNT}:cpm
CPM_GH_PROJECT=	${CPM_PROJECT}:cpm
CPM_GH_TAGNAME=	${CPM_TAGNAME}:cpm
CPM_SUB_FILES=	pkg-message
CPM_SUB_LIST=	DIR=${WRKDIR}/${CPM_PROJECT}-${CPM_TAGNAME}

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/${PORTNAME} ${STAGEDIR}${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/${PORTNAME}.8 ${STAGEDIR}${MANPREFIX}/man/man8

.include <bsd.port.mk>
