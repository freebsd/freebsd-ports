--- Marksman/Marksman.fsproj.orig	2024-12-18 00:00:00 UTC
+++ Marksman/Marksman.fsproj
@@ -4,17 +4,17 @@
         <OutputType>Exe</OutputType>
         <AssemblyName>marksman</AssemblyName>
         <VersionPrefix>1.0.0</VersionPrefix>
-        <TargetFramework>net8.0</TargetFramework>
+        <TargetFramework>net9.0</TargetFramework>
     </PropertyGroup>
     <Target Name="Version" BeforeTargets="BeforeBuild">
-        <Exec Command="git describe --always --dirty" ConsoleToMSBuild="true" Condition="'$(VersionString)'==''">
+        <Exec Command="git describe --always --dirty" ConsoleToMSBuild="true" Condition="'$(VersionString)'=='' And Exists('.git')" ContinueOnError="true" IgnoreExitCode="true">
             <Output TaskParameter="ConsoleOutput" PropertyName="VersionString"/>
         </Exec>
         <PropertyGroup>
-            <VersionSuffix>$(VersionString)</VersionSuffix>
+            <VersionSuffix Condition="'$(VersionString)'!=''">$(VersionString)</VersionSuffix>
             <VersionSuffix Condition="$(VersionString.StartsWith('0'))">r$(VersionString)</VersionSuffix>
-            <Version>$(VersionPrefix)-$(VersionSuffix)</Version>
+            <Version Condition="'$(VersionSuffix)'!=''">$(VersionPrefix)-$(VersionSuffix)</Version>
         </PropertyGroup>
     </Target>
     <ItemGroup>
