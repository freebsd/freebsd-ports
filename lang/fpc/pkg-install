#!/bin/sh
# $FreeBSD$

[ $# != 2 ] && exit 1
PKGNAME=$1
ACTION=$2

FILES_DELETE="bin/ppc386 etc/fpc.cfg etc/fpc.cfg.orig"

LIBDIR=${PKG_PREFIX}/lib/fpc/${PKGNAME##fpc-}

CHMOD=/bin/chmod
LN=/bin/ln
RM=/bin/rm
SH=/bin/sh

case "$ACTION" in

POST-INSTALL)
		${CHMOD} 0555 ${LIBDIR}/ppc386
		${CHMOD} 0555 ${LIBDIR}/samplecfg
		${LN} -sf ${LIBDIR}/ppc386 ${PKG_PREFIX}/bin/ppc386
		${SH} ${LIBDIR}/samplecfg ${LIBDIR} ${PKG_PREFIX}/etc
	;;

DEINSTALL)
	for file in ${FILES_DELETE}
	do
		if [ -f ${PKG_PREFIX}/${file} ]; then
			${RM} ${PKG_PREFIX}/${file}
		fi
	done
	;;

PRE-INSTALL|POST-DEINSTALL)
	;;

*)
	exit 1
	;;
esac

exit
