# Created by: Choe, Cheng-Dae
# $FreeBSD$

PORTNAME=	Component
PORTVERSION=	0.2
PORTREVISION=	1
CATEGORIES=	www python
MASTER_SITES=	http://www.webwareforpython.org/downloads/${PORTNAME}/
PKGNAMEPREFIX=	${PYTHON_PKGNAMEPREFIX}webware-

MAINTAINER=	ports@FreeBSD.org
COMMENT=	Webware servlet component extension

DEPRECATED=	Depends on deprecated www/py-webware
EXPIRATION_DATE=	2015-10-31

RUN_DEPENDS=	${PYTHON_PKGNAMEPREFIX}webware>0:${PORTSDIR}/www/py-webware

USES=		python:2

do-build:
	@${ECHO_MSG} -n ">> Compiling ..."
	@${PYTHON_CMD} -c "import compileall; compileall.compile_dir('${WRKSRC}')"
	@${ECHO_MSG} " [ DONE ]"

do-install:
	@${ECHO_CMD} -n ">> Installing ..."
	@cd ${WRKSRC} && \
		${FIND} . -type d -exec ${MKDIR} "${STAGEDIR}${PREFIX}/share/webware/${PORTNAME}/{}" \; && \
		${FIND} . -not -type d -exec ${INSTALL_DATA} "{}" "${STAGEDIR}${PREFIX}/share/webware/${PORTNAME}/{}" \;
	@${ECHO_MSG} " [ DONE ]"

.include <bsd.port.mk>
