--- Makefile.orig	Wed Sep  1 17:24:44 1999
+++ Makefile	Fri Sep 10 01:02:27 1999
@@ -1,11 +1,15 @@
 # Makefile for analog 3.32
 # Please read docs/Readme.html, or http://www.statslab.cam.ac.uk/~sret1/analog/
-CC = gcc           # which compiler to use: eg cc, acc, gcc. NB Different
+CC ?= gcc           # which compiler to use: eg cc, acc, gcc. NB Different
 #                    compilers need different CFLAGS, e.g., -O instead of -O2.
-CEXTRAFLAGS = -O2  # options, e.g. for optimisation or ANSI compilation.
+#CEXTRAFLAGS = -O2  # options, e.g. for optimisation or ANSI compilation.
 #                    HP/UX cc requires CEXTRAFLAGS = -Aa (HP/UX 9) or ...
 #                    -Ae (HP/UX 10);       BS2000/OSD requires -XLLML -XLLMK
-DEFS =             # any of -DNOPIPES -DNODNS -DNODIRENT -DNOOPEN -DEBCDIC ...
+#DEFS =             # any of -DNOPIPES -DNODNS -DNODIRENT -DNOOPEN -DEBCDIC ...
+DEFS =  -DANALOGDIR=\"$(PREFIX)/lib/analog/\" \
+	-DLOGFILE=\"/var/log/httpd-access.log\" \
+	-DIMAGEDIR=\"/images/\" \
+	-DDEFAULTCONFIGFILE=\"$(PREFIX)/etc/analog.cfg\"
 #                    ... -DNEED_STRCMP -DNEED_MEMMOVE -DNEED_STRTOUL ...
 #                    ... -DNEED_DIFFTIME -DNEED_FLOATINGPOINT_H
 #                    Solaris 2 (SunOS 5) might need DEFS = -DNEED_STRCMP
@@ -25,11 +29,13 @@
 	macinput.o macstuff.o output.o output2.o process.o settings.o \
 	sort.o tree.o utils.o win32.o
 HEADERS = analhead.h analhea2.h macdir.h
-CFLAGS = $(CEXTRAFLAGS) $(DEFS) -D$(OS)
+CFLAGS += $(CEXTRAFLAGS) $(DEFS) -D$(OS)
 
 # Form interface options:
 FORMPROG = anlgform.cgi     # The program that processes the data from the form
 FORMSRC = anlgform.c        # The source code for that program
+
+all:	$(PROGRAM)
 
 $(PROGRAM): $(OBJS) $(HEADERS) Makefile
 	$(CC) $(CEXTRAFLAGS) $(OBJS) -o $(PROGRAM) $(LIBS)
