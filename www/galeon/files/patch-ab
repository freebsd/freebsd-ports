
$FreeBSD$

--- src/galeon.in.orig	Sat Nov 10 12:19:29 2001
+++ src/galeon.in	Tue Nov 13 13:59:24 2001
@@ -4,32 +4,14 @@
 
 if test -n "$MOZILLA_FIVE_HOME"; then
 	MOZILLA_HOME=$MOZILLA_FIVE_HOME
-elif [ -f @MOZILLA_HOME@/chrome/embed.jar ]; then
+elif [ -f @MOZILLA_HOME@/libgtkembedmoz.so ]; then
 	MOZILLA_HOME=@MOZILLA_HOME@
-elif [ -f /usr/local/mozilla/chrome/embed.jar ]; then
-	MOZILLA_HOME=/usr/local/mozilla
-elif [ -f /usr/lib/mozilla/chrome/embed.jar ]; then
-	MOZILLA_HOME=/usr/lib/mozilla
-elif [ -f /opt/mozilla/chrome/embed.jar ]; then
-	MOZILLA_HOME=/opt/mozilla
-elif [ -f /usr/lib/mozilla-0.8.1/chrome/embed.jar ]; then
-	MOZILLA_HOME=/usr/lib/mozilla-0.8.1/
-elif [ -f /usr/lib/mozilla-0.9.1/chrome/embed.jar ]; then
-	MOZILLA_HOME=/usr/lib/mozilla-0.9.1/
-elif [ -f /usr/lib/mozilla-0.9.2/chrome/embed.jar ]; then
-	MOZILLA_HOME=/usr/lib/mozilla-0.9.2/
-elif [ -f /usr/lib/mozilla-0.9.3/chrome/embed.jar ]; then
-	MOZILLA_HOME=/usr/lib/mozilla-0.9.3/
-elif [ -f /usr/lib/mozilla-0.9.4/chrome/embed.jar ]; then
-	MOZILLA_HOME=/usr/lib/mozilla-0.9.4/
-elif [ -f /usr/lib/mozilla-0.9.5/chrome/embed.jar ]; then
-	MOZILLA_HOME=/usr/lib/mozilla-0.9.5/
-elif [ -f /usr/lib/mozilla-0.9.6/chrome/embed.jar ]; then
-	MOZILLA_HOME=/usr/lib/mozilla-0.9.6/
-elif [ -f /usr/lib/mozilla-0.9.7/chrome/embed.jar ]; then
-	MOZILLA_HOME=/usr/lib/mozilla-0.9.7/
-elif [ -f /opt/gnome/lib/mozilla/chrome/embed.jar ]; then
-        MOZILLA_HOME=/opt/gnome/lib/mozilla/
+elif [ -f %%LOCALBASE%%/lib/%%MOZILLA%%/libgtkembedmoz.so ]; then
+	MOZILLA_HOME=%%LOCALBASE%%/lib/%%MOZILLA%%
+elif [ -f %%X11BASE%%/lib/%%MOZILLA%%/libgtkembedmoz.so ]; then
+	MOZILLA_HOME=%%X11BASE%%/lib/%%MOZILLA%%
+elif [ -f %%PREFIX%%/lib/%%MOZILLA%%/libgtkembedmoz.so ]; then
+	MOZILLA_HOME=%%PREFIX%%/lib/%%MOZILLA%%
 else
 	echo "Cannot find mozilla installation directory. Please set MOZILLA_FIVE_HOME to your mozilla directory"
 	exit
@@ -41,16 +23,9 @@
 MOZILLA_FIVE_HOME=$MOZILLA_HOME
 export MOZILLA_FIVE_HOME
 
-# for some reason this lets Galeon start properly on Red Hat 7.1 systems
-if [ -f /etc/redhat-release ]; then
-	if [ "`cat /etc/redhat-release`" = "Red Hat Linux release 7.1 (Seawolf)"  ]; then
-   	 export LD_ASSUME_KERNEL=2.2.5
-	fi
-fi
-
 if [ -f ./galeon-bin ]; then
 exec ./galeon-bin "$@"
 else
-exec $dist_bin/galeon-bin "$@"
+exec %%PREFIX%%/bin/galeon-bin "$@"
 fi
 
