--- content/browser/BUILD.gn.orig	2025-11-06 10:11:34 UTC
+++ content/browser/BUILD.gn
@@ -90,6 +90,7 @@ source_set("browser") {
   frameworks = []
   ldflags = []
 
+  # Iridium / node dep fixes
   deps = [
     "//base",
     "//base:base_static",
@@ -103,6 +104,7 @@ source_set("browser") {
     "//cc/animation",
     "//cc/mojo_embedder",
     "//cc/paint",
+    "//chrome/common:buildflags",
     "//components/attribution_reporting:data_host_mojom",
     "//components/attribution_reporting:mojom",
     "//components/back_forward_cache:enum",
@@ -133,6 +135,7 @@ source_set("browser") {
     "//components/optimization_guide/core:features",
     "//components/optimization_guide/public/mojom",
     "//components/os_crypt/sync",
+    "//components/paint_preview/buildflags:buildflags",
     "//components/payments/content/icon",
     "//components/payments/mojom",
     "//components/performance_manager/scenario_api",
@@ -2612,6 +2615,14 @@ source_set("browser") {
     ]
   }
 
+  if (is_bsd) {
+    sources += [
+      "file_system_access/file_path_watcher/file_path_watcher_bsd.cc",
+      "file_system_access/file_path_watcher/file_path_watcher_kqueue.cc",
+      "file_system_access/file_path_watcher/file_path_watcher_kqueue.h",
+    ]
+  }
+
   if (is_linux || is_chromeos) {
     sources -=
         [ "file_system_access/file_path_watcher/file_path_watcher_stub.cc" ]
@@ -2660,6 +2671,15 @@ source_set("browser") {
   if (allow_oop_video_decoder) {
     sources += [ "media/oop_video_decoder_factory.cc" ]
     deps += [ "//media/mojo/mojom" ]
+  }
+
+  if (is_bsd) {
+    sources -= [
+      "file_system_access/file_path_watcher/file_path_watcher_inotify.cc",
+      "file_system_access/file_path_watcher/file_path_watcher_inotify.h",
+      "sandbox_ipc_linux.cc",
+      "sandbox_ipc_linux.h",
+    ]
   }
 
   if (is_chromeos) {
