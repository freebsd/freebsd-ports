PORTNAME=	websocat
DISTVERSIONPREFIX=	v
DISTVERSION=	1.14.1
PORTREVISION=	1
CATEGORIES=	www

MAINTAINER=	osa@FreeBSD.org
COMMENT=	WebSockets tools
WWW=		https://github.com/vi/websocat

LICENSE=	MIT
LICENSE_FILE=	${WRKSRC}/LICENSE

USES=		cargo ssl
USE_GITHUB=	yes
GH_ACCOUNT=	vi

CARGO_FEATURES=		--no-default-features

OPTIONS_DEFINE=		CRYPTO_PEER PROMETHEUS_PEER SEQPACKET SSL \
			TOKIO_PROCESS UNIX_STDIO
OPTIONS_DEFAULT=	SEQPACKET SSL TOKIO_PROCESS UNIX_STDIO

CRYPTO_PEER=		CARGO_FEATURES+=crypto_peer
PROMETHEUS_PEER=	CARGO_FEATURES+=prometheus_peer
SEQPACKET_VARS=		CARGO_FEATURES+=seqpacket
SSL_VARS=		CARGO_FEATURES+=ssl
TOKIO_PROCESS_VARS=	CARGO_FEATURES+=tokio-process
UNIX_STDIO_VARS=	CARGO_FEATURES+=unix_stdio

CRYPTO_PEER_DESC=	Crypto peer
PROMETHEUS_PEER_DESC=	Prometheus peer
SEQPACKET_DESC=		Seqpacket
SSL_DESC=		SSL
TOKIO_PROCESS_DESC=	Tokio process
UNIX_STDIO_DESC=	UNIX stdio

.include "${.CURDIR}/Makefile.crates"

PLIST_FILES=	bin/websocat

.include <bsd.port.mk>
