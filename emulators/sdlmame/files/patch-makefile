--- ./makefile.orig	Fri Mar 30 04:03:29 2007
+++ ./makefile	Sun Apr  8 19:44:17 2007
@@ -52,7 +52,7 @@
 # for SDLMAME, set this to linux, freebsd, win32, or macosx (lowercase is important!)
 #------------------------------------------------------------------------------------
 
-SUBARCH = linux
+SUBARCH = freebsd
 
 
 #-------------------------------------------------
@@ -63,11 +63,13 @@
 # uncomment next line to include the debugger
 # DEBUG = 1    
  
+ifeq ($(ARCH),i386)
 # uncomment next line to use DRC MIPS3 engine
 X86_MIPS3_DRC = 1
 
 # uncomment next line to use DRC PowerPC engine
 X86_PPC_DRC = 1
+endif
 
 #-------------------------------------------------
 # specify build options; see each option below 
@@ -174,8 +176,8 @@
 
 # compiler, linker and utilities
 AR = @ar
-CC = @gcc
-LD = @gcc
+CC := @$(CC)
+LD = @$(CC)
 MD = -mkdir
 RM = @rm -f
 
@@ -191,53 +193,12 @@
 endif
 
 # by default, don't compile for a specific target CPU
-NAME = $(PREFIX)$(TARGET)
-ARCH = 
-
-# architecture-specific builds get extra options
-ifdef ATHLON
-NAME = $(PREFIX)$(TARGET)at
-ARCH = -march=athlon
-endif
-
-ifdef I686
-NAME = $(PREFIX)$(TARGET)pp
-ARCH = -march=pentiumpro
-endif
-
-ifdef P4
-NAME = $(PREFIX)$(TARGET)p4
-ARCH = -march=pentium4
-endif
-
-ifdef AMD64
-NAME = $(PREFIX)$(TARGET)64
-ARCH = -march=athlon64
-endif
-
-ifdef PM
-NAME = $(PREFIX)$(TARGET)pm
-ARCH = -march=pentium3 -msse2
-endif
-
-ifdef G4
-NAME = $(PREFIX)$(TARGET)g4
-ARCH = -mcpu=G4
-endif
-
-ifdef G5
-NAME = $(PREFIX)$(TARGET)g5
-ARCH = -mcpu=G5
-endif
-
-ifdef CELL
-NAME = $(PREFIX)$(TARGET)cbe
+NAME = $(TARGET)
 ARCH = 
-endif
 
 # debug builds just get the 'd' suffix and nothing more
 ifdef DEBUG
-NAME = $(PREFIX)$(TARGET)d
+NAME = $(TARGET)d
 endif
 
 EMULATOR = $(NAME)$(EXE)
@@ -275,7 +236,7 @@
 # compile and linking flags
 #-------------------------------------------------
 
-CFLAGS = \
+CFLAGS += \
 	$(OPT_FLAGS) \
 	-std=gnu89 \
 	-I$(SRC)/$(TARGET) \
@@ -287,6 +248,7 @@
 	-I$(SRC)/lib/util \
 	-I$(SRC)/osd \
 	-I$(SRC)/osd/$(MAMEOS) \
+	-I$(LOCALBASE)/include -I$(X11BASE)/include
 
 ifdef MESS
 CFLAGS += \
@@ -305,7 +267,7 @@
 endif	# PPC
 endif	# SYMBOLS
 
-CFLAGS += $(ARCH) \
+CFLAGS += \
 	-Wall \
 	-Wpointer-arith \
 	-Wbad-function-cast \
@@ -317,7 +279,7 @@
 	-Wdeclaration-after-statement
 
 ifneq ($(OPTIMIZE),0)
-CFLAGS += -DNDEBUG $(ARCH) -fno-strict-aliasing
+CFLAGS += -DNDEBUG -fno-strict-aliasing
 endif
 
 CFLAGS += -O$(OPTIMIZE)
@@ -325,11 +287,9 @@
 # extra options needed *only* for the osd files
 CFLAGSOSDEPEND = $(CFLAGS)
 
-LDFLAGS = -WO
+LDFLAGS += -WO -L$(LOCALBASE)/lib -L$(X11BASE)/lib
 
-ifdef SYMBOLS
-LDFLAGS = 
-else
+ifndef SYMBOLS
 LDFLAGS += -s
 endif
 
