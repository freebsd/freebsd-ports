MASTERDIR=	${.CURDIR:H}/mlt7
SLAVEPORT=	glaxnimate

PORTREVISION=	0
PKGNAMESUFFIX=	-glaxnimate-${FLAVOR}

COMMENT=	2D animations plugin for the MLT multimedia framework
CATEGORIES=	multimedia kde

LICENSE=	GPLv2 GPLv3
LICENSE_COMB=	multi

FLAVORS=	qt5 qt6
FLAVOR?=	qt5

USES=		gl qt:${FLAVOR:S/qt//} libarchive xorg
USE_GL=		${_USE_GL_${FLAVOR}}
USE_QT=		${_USE_QT_${FLAVOR}}
USE_XORG=	x11

# Flavor handling
_USE_GL_qt6=	opengl
_USE_QT_qt5=	core gui network widgets xml \
		buildtools:build qmake:build
_USE_QT_qt6=	base
_CMAKE_ON_qt5=	MOD_GLAXNIMATE
_CMAKE_ON_qt6=	MOD_GLAXNIMATE_QT6
_CMAKE_OFF_qt5=	MOD_GLAXNIMATE_QT6
_CMAKE_OFF_qt6=	MOD_GLAXNIMATE
_PLIST_SUB_qt5=	QT_VERSION_SUFFIX=
_PLIST_SUB_qt6=	QT_VERSION_SUFFIX="-qt6"

# Only enable Qt binding, and disable everything else
CMAKE_ON=	${_CMAKE_ON_${FLAVOR}}
CMAKE_OFF=	MOD_AVFORMAT MOD_DECKLINK MOD_FEEDS MOD_FREI0R MOD_GDK MOD_GTK2 \
		MOD_JACKRACK MOD_KDENLIVE MOD_LUMAS MOD_MOTION_EST MOD_NORMALIZE \
		MOD_OLDFILM MOD_OPENCV MOD_OPENGL MOD_PLUSGPL MOD_PLUS MOD_QT MOD_RESAMPLE \
		MOD_RTAUDIO MOD_RUBBERBAND MOD_SDL2 MOD_SOX MOD_VIDSTAB MOD_VMFX \
		MOD_VORBIS MOD_XINE MOD_XML \
		SWIG_CSHARP SWIG_JAVA SWIG_LUA SWIG_NODEJS SWIG_PERL \
		SWIG_PHP SWIG_PYTHON SWIG_RUBY SWIG_TCL \
		${_CMAKE_OFF_${FLAVOR}}

PLIST_SUB+=	${_PLIST_SUB_${FLAVOR}}

BUILD_WRKSRC=	${WRKDIR}/.build/src/modules/glaxnimate

# Dummy placeholder target.
common-post-install:
	@${TRUE}

.include "${MASTERDIR}/Makefile"
