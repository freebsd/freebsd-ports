PORTNAME=	libmediainfo
PORTVERSION=	22.12
PORTREVISION=	1
CATEGORIES=	multimedia
MASTER_SITES=	https://mediaarea.net/download/binary/mediainfo/${PORTVERSION}/ \
		LOCAL/sunpoet
DISTNAME=	MediaInfo_CLI_${PORTVERSION}_GNU_FromSource

MAINTAINER=	sunpoet@FreeBSD.org
COMMENT=	MediaInfo library
WWW=		https://mediaarea.net/en/MediaInfo \
		https://github.com/MediaArea/MediaInfoLib

LICENSE=	BSD2CLAUSE
LICENSE_FILE=	${WRKSRC}/../../../License.html

LIB_DEPENDS=	libtinyxml2.so:textproc/tinyxml2 \
		libzen.so:multimedia/libzen

USES=		compiler:c++11-lang dos2unix libtool localbase pathfix pkgconfig tar:xz

CONFIGURE_ARGS=	--enable-shared --enable-static --disable-dll
GNU_CONFIGURE=	yes
INSTALL_TARGET=	install-strip
PATHFIX_MAKEFILEIN+=	configure
USE_LDCONFIG=	yes

WRKSRC=		${WRKDIR}/MediaInfo_CLI_GNU_FromSource/MediaInfoLib/Project/GNU/Library

OPTIONS_DEFINE=	CURL
OPTIONS_DEFAULT=CURL

CURL_CONFIGURE_ON=	--with-libcurl=${LOCALBASE}
CURL_LIB_DEPENDS=	libcurl.so:ftp/curl

.include <bsd.port.mk>
