--- makefile.orig	Fri Mar 14 19:34:48 1997
+++ makefile	Wed Jun 21 02:59:31 2000
@@ -1,18 +1,19 @@
 .KEEP_STATE:
 
-CFLAGS = -O2
-CC = gcc
-XLIB = -L/usr/X11/lib  -lXaw3d -lXmu -lXt
-
+CFLAGS ?= -O2
+CC ?= gcc
+XLIB = -L$(X11BASE)/lib  -lXaw -lXmu -lXt
+.if $(PORTOBJFORMAT) == "elf"
+XLIB+= -Wl,-rpath,$(X11BASE)/lib
+.endif
 OBJS = asprint.o
-INCS = 
-
-default : asprint  ./makefile
-clean:
-	rm -f $(OBJS) *~ asprint core
+INCS = -I$(X11BASE)/include
 
 asprint: $(OBJS)
 	$(CC) -o asprint $(CFLAGS) $(OBJS) $(XLIB)
 
+clean:
+	rm -f $(OBJS) *~ asprint core
+
 .c.o: 
-	$(CC) $(CFLAGS) -c $<
+	$(CC) $(CFLAGS) -c $(INCS) $<
