PORTNAME=	uriparser
DISTVERSION=	1.0.0
PORTREVISION=	1
CATEGORIES=	net
MASTER_SITES=	https://github.com/${PORTNAME}/${PORTNAME}/releases/download/${PORTNAME}-${DISTVERSION}/
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} \
		${DISTNAME}-doc.zip \
		${DISTNAME}-doc.qch
EXTRACT_ONLY=	${DISTNAME}${EXTRACT_SUFX} \
		${DISTNAME}-doc.zip

MAINTAINER=	svysh.fbsd@gmail.com
COMMENT=	URI parsing library
WWW=		https://github.com/uriparser/uriparser

LICENSE=			APACHE20 BSD3CLAUSE LGPL21+
LICENSE_COMB=			multi
LICENSE_FILE_APACHE20=		${WRKSRC}/COPYING.Apache-2.0
LICENSE_FILE_BSD3CLAUSE=	${WRKSRC}/COPYING.BSD-3-Clause
LICENSE_FILE_LGPL21+ =		${WRKSRC}/COPYING.LGPL-2.1
LICENSE_FILE=			${WRKSRC}/README.md

TEST_DEPENDS=	googletest>=1.10.0:devel/googletest

USES=		cmake:testing cpe pathfix tar:xz
CPE_VENDOR=	uriparser_project
USE_LDCONFIG=	yes

CMAKE_OFF=	URIPARSER_BUILD_TESTS \
		URIPARSER_BUILD_DOCS
CMAKE_TESTING_ON=	URIPARSER_BUILD_TESTS

PLIST_SUB=	DISTVERSION=${DISTVERSION}
PORTDOCS=	*

OPTIONS_DEFINE=	DOCS

post-install-DOCS-on:
	${MKDIR} ${STAGEDIR}${DOCSDIR}/qch
	(cd ${WRKDIR}/${DISTNAME}-doc && ${COPYTREE_SHARE} . ${STAGEDIR}${DOCSDIR})
	${INSTALL_MAN} ${DISTDIR}/${DISTNAME}-doc.qch ${STAGEDIR}${DOCSDIR}/qch

.include <bsd.port.mk>
