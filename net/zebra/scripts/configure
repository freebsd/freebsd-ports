#! /bin/sh

# $FreeBSD$

# configure - zebra compile time option configurator
# by Andreas Klemm <andreas@FreeBSD.org>

if [ "$BATCH" != "yes" -a "$BATCH" != "YES" ]; then

#
# configure - zebra compile time options
#

/usr/bin/dialog --title "Zebra Compile Time Options" --clear \
	--checklist "\n\
Select compile time options for zebra port:" -1 -1 8	\
LIBPAM		"enable PAM authentication for vtysh"	OFF \
OSPF_NSSA	"turn on undergoing NSSA feature"	OFF \
SNMP		"enable SNMP support"			OFF \
TCP-ZEBRA	"enable TCP/IP socket connection"	OFF \
2> /tmp/zebra-checklist.$$

retval=$?

if [ -s /tmp/zebra-checklist.$$ ]; then
	set `cat /tmp/zebra-checklist.$$`
fi
rm -f /tmp/zebra-checklist.$$

case $retval in
	0)	if [ -z "$*" ]; then
			echo "Nothing selected"
		fi
		;;
	1)	echo "Cancel pressed."
		exit 1
		;;
esac

/bin/mkdir -p ${WRKDIRPREFIX}${CURDIR}
exec > ${WRKDIRPREFIX}${CURDIR}/Makefile.inc

while [ "$1" ]; do
    case $1 in
	\"LIBPAM\")
		echo CONFIGURE_ARGS+=--with-libpam
		;;
	\"OSPF_NSSA\")
		echo CONFIGURE_ARGS+=--enable-nssa
		;;
	\"SNMP\")
		echo CONFIGURE_ARGS+=--enable-snmp
		echo 'LIB_DEPENDS+=snmp.4:${PORTSDIR}/net/net-snmp4:install'
		;;
	\"TCP-ZEBRA\")
		echo CONFIGURE_ARGS+=--enable-tcp-zebra
		;;
    esac
    shift
done

fi # if $BATCH
