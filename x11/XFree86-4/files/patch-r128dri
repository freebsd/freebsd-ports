--- programs/Xserver/hw/xfree86/drivers/ati/r128_dri.c.orig	Sat Oct  6 05:29:25 2001
+++ programs/Xserver/hw/xfree86/drivers/ati/r128_dri.c	Fri Oct  5 17:28:40 2001
@@ -705,6 +705,7 @@
     case PCI_CHIP_RAGE128LE:
     case PCI_CHIP_RAGE128RE:
     case PCI_CHIP_RAGE128RK:
+    case PCI_CHIP_RAGE128PE:
 	/* This is a PCI card, do nothing */
 	break;

@@ -985,12 +985,12 @@
     /* Check the r128 DRM version */
     version = drmGetVersion(info->drmFD);
     if (version) {
-	if (version->version_major != 2 ||
-	    version->version_minor < 1) {
+	if (version->version_major != 3 ||
+	    version->version_minor < 0) {
 	    /* incompatible drm version */
 	    xf86DrvMsg(pScreen->myNum, X_ERROR,
 		"[dri] R128DRIScreenInit failed because of a version mismatch.\n"
-		"[dri] r128.o kernel module version is %d.%d.%d but version 2.1.x is needed.\n"
+		"[dri] r128.o kernel module version is %d.%d.%d but version 3.0 or greater is needed.\n"
 		"[dri] Disabling the DRI.\n",
 		version->version_major,
 		version->version_minor,
