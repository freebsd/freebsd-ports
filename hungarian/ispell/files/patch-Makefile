
$FreeBSD$

--- Makefile.orig
+++ Makefile
@@ -8,7 +8,7 @@
 # célkönyvtárak prefixuma
 PREFIX?=/usr
 # ispell célkönyvtár; ide kerülnek: magyar.hash hungarian.hash magyar.aff
-ISPELLDIR?=$(PREFIX)/lib/ispell
+ISPELLDIR?=$(PREFIX)/share/ispell
 # myspell célkönyvtár; ide kerülnek:
 # hu_HU.dic hu_HU.aff hungarian.dic hungarian.aff
 MYSPELLDIR?=$(PREFIX)/share/myspell
@@ -16,7 +16,7 @@
 OODIR?=$(PREFIX)/OpenOffice.org/user/wordbook
 # parancsok
 INSTALL_DATA?=install
-M4?=m4
+M4?=gm4
 CC?=cc
 FLEX?=flex
 AWK?=awk
@@ -31,7 +31,7 @@
 # gyökérkönyvtár
 ROOTDIR=$(shell pwd)
 # munkakönyvtar
-WRKDIR=$(ROOTDIR)/tmp
+WKDIR=$(ROOTDIR)/tmp
 # a szótárkönyvtár
 SZOTAR=$(ROOTDIR)/szotar
 # affix állományok
@@ -39,7 +39,7 @@
 # awk scriptek
 AWKDIR=$(ROOTDIR)/awk
 # szótárfájl
-DICT=$(WRKDIR)/dictionary
+DICT=$(WKDIR)/dictionary
 # soremelés
 EN=
 EC=
@@ -52,13 +52,13 @@
 
 # keresési útvonalak:
 	vpath %.aff $(AFFDIR)
-	vpath %.aff $(WRKDIR)
-	vpath %.hash $(WRKDIR)
-	vpath %.dict $(WRKDIR)
+	vpath %.aff $(WKDIR)
+	vpath %.hash $(WKDIR)
+	vpath %.dict $(WKDIR)
 	vpath %.awk $(AWKDIR)
 
 # ez a default target ha nincs megadva paraméter
-default: myspell
+default: all
 
 # modulválasztós, menüs interfész
 menu:
@@ -67,19 +67,19 @@
 	make myspell
 
 # munkakönyvtárak létrehozása
-$(WRKDIR) $(OODIR) $(MYSPELLDIR) $(ISPELLDIR): 
+$(WKDIR) $(OODIR) $(MYSPELLDIR) $(ISPELLDIR): 
 	@mkdir -p $@ 
 
 # hasítótábla létrehozása a megfelelõ helyesírás-ellenõrzõhöz (Ispell/Myspell)
 # magyar4X.hash ahol X={ispell,myspell}
-magyar4ispell.hash: $(WRKDIR) magyar4ispell.dict magyar.aff
+magyar4ispell.hash: $(WKDIR) magyar4ispell.dict magyar.aff
 	@echo "===> Ispell ragozási szótár (magyar4ispell.hash)"
-	@buildhash $(WRKDIR)/magyar4ispell.dict $(WRKDIR)/magyar.aff \
-	    $(WRKDIR)/magyar4ispell.hash 2> $(WRKDIR)/magyar4ispell.log
+	@buildhash $(WKDIR)/magyar4ispell.dict $(WKDIR)/magyar.aff \
+	    $(WKDIR)/magyar4ispell.hash 2> $(WKDIR)/magyar4ispell.log
 
 # szótár (.dic állomány) létrehozása a megfelelõ helyesírás-ellenõrzõhöz (Ispell/Myspell)
 # magyar4X.dict ahol X={ispell,myspell}
-magyar4%.dict: $(WRKDIR)
+magyar4%.dict: $(WKDIR)
 	@echo "Figyelmeztetés: a szótár a Hunspell programmal, vagy a Hunspellt"
 	@echo "tartalmazó magyar OpenOffice.org (http://hu.openoffice.org)"
 	@echo "programmal mûködik együtt."
@@ -103,78 +103,78 @@
 	@echo "===> magyar $(*F) alapszótár (magyar4$(*F).dict) elõállítása"
 
 	@echo "==> szimbolikus kötések létrehozása a szotar.konf alapján"
-	@$(SH) bin/makesymlink $(WRKDIR) szotar.konf
+	$(SH) bin/makesymlink $(WKDIR) szotar.konf
 
 	@echo "==> szótárak egybemásolása"
-	@$(SH) bin/copydict $(WRKDIR) $(WRKDIR) $(*F)
+	$(SH) bin/copydict $(WKDIR) $(WKDIR) $(*F)
 
 	@echo "==> igébõl képzett alakok elõállítása"
-	@$(SH) bin/igesgen $(ROOTDIR)
+	$(SH) bin/igesgen $(ROOTDIR)
 
 	@echo "==> igék"
-	@$(SH) bin/igek $(ROOTDIR)
+	$(SH) bin/igek $(ROOTDIR)
 
 	@echo "==> névszók"
-	@$(SH) bin/fonevek $(ROOTDIR)
+	$(SH) bin/fonevek $(ROOTDIR)
 
 	@echo "==> morfológiai kódok"
-	@$(SH) bin/kodok $(ROOTDIR)
+	$(SH) bin/kodok $(ROOTDIR)
 
 # egyéb kivételek: az m4 miatt nem megy külön héjprogramba
 	@echo "==> kivételek"
-	@#cat $(SZOTAR)/kivetelek/igekotos/*.1* \
-	@#	| grep -v ^# | $(M4) | tr "\t" "\n" \
-	@#	| grep -v ^$$ | sed -e 's/$$/\/X/' \
-	@#	>> $(DICT)
-	@echo $(EN) ."$(EC)"
-	@cat $(SZOTAR)/kivetelek/igekotos/*.2* \
+	#cat $(SZOTAR)/kivetelek/igekotos/*.1* \
+	#	| grep -v ^# | $(M4) | tr "\t" "\n" \
+	#	| grep -v ^$$ | sed -e 's/$$/\/X/' \
+	#	>> $(DICT)
+	echo $(EN) ."$(EC)"
+	cat $(SZOTAR)/kivetelek/igekotos/*.2* \
 		| grep -v ^# | $(M4) | $(AWK) -f $(AWKDIR)/tovek.awk -v param="/X" \
 		>> $(DICT)
-	@echo $(EN) ."$(EC)"
-	@cat $(SZOTAR)/kivetelek/ragozatlan/*.1* \
+	echo $(EN) ."$(EC)"
+	cat $(SZOTAR)/kivetelek/ragozatlan/*.1* \
 		| $(M4) | grep -v ^# | grep -v "#[A-Z]" \
 		| sed 's/[	 ]*#.*$$//' | tr "\t" "\n" \
 		>> $(DICT)
-	@echo $(EN) ."$(EC)"
-	@cat $(SZOTAR)/kivetelek/ragozatlan/*.1* \
+	echo $(EN) ."$(EC)"
+	cat $(SZOTAR)/kivetelek/ragozatlan/*.1* \
 		| $(M4) | grep -i "#$(*F)" | sed 's/[	 ]*#.*$$//' \
 		| tr "\t" "\n" \
 		>> $(DICT)
-	@echo $(EN) ."$(EC)"
-	@cat $(WRKDIR)/ragozatlan.2 $(SZOTAR)/kivetelek/ragozatlan/*.2* \
+	echo $(EN) ."$(EC)"
+	cat $(WKDIR)/ragozatlan.2 $(SZOTAR)/kivetelek/ragozatlan/*.2* \
 		| $(M4) | grep -v ^# | grep -v "#[A-Z]" \
 		| sed 's/[	 ]*#.*$$//' \
 		| $(AWK) -f $(AWKDIR)/tovek.awk \
 		>> $(DICT)
-	@echo $(EN) ."$(EC)"
-	@cat $(WRKDIR)/ragozatlan.2 $(SZOTAR)/kivetelek/ragozatlan/*.2* \
+	echo $(EN) ."$(EC)"
+	cat $(WKDIR)/ragozatlan.2 $(SZOTAR)/kivetelek/ragozatlan/*.2* \
 		| $(M4) | grep -i "#$(*F)" | sed 's/[	 ]*#.*$$//' \
 		| $(AWK) -f $(AWKDIR)/tovek.awk \
 		>> $(DICT)
 	@echo Rendben.
 
-	@echo $(EN) ."$(EC)"
+	echo $(EN) ."$(EC)"
 
-	@echo "==> tiltott szavak"
-	@$(SH) bin/tiltott $(ROOTDIR) $(*F)
+	echo "==> tiltott szavak"
+	$(SH) bin/tiltott $(ROOTDIR) $(*F)
 
-	@mv $(DICT) $(WRKDIR)/magyar4$(*F).dict
+	mv $(DICT) $(WKDIR)/magyar4$(*F).dict
 	@echo Rendben.
 
 # ragozási táblázat (magyar.aff) elõállítása
-magyar.aff: $(WRKDIR) eleje.aff ige_alanyi.aff fonev.aff fonev_kepzo.aff ige_kepzo.aff
+magyar.aff: $(WKDIR) eleje.aff ige_alanyi.aff fonev.aff fonev_kepzo.aff ige_kepzo.aff
 	@echo "===> ragozási táblázat (magyar.aff) elõállítása"
 	@cd $(AFFDIR);\
 	    cat eleje.aff ige_kepzo.aff fonev_kepzo.aff ige_morfo.aff ige_alanyi.aff \
-            fonev.aff fonev_morfo.aff ige_targyas.aff | $(M4) > $(WRKDIR)/magyar.aff;
+            fonev.aff fonev_morfo.aff ige_targyas.aff | $(M4) > $(WKDIR)/magyar.aff;
 
 # ispell-installálás: magyar.hash, magyar.aff a helyére (ISPELLDIR könyvtár)
 # a default értékkel csak rendszergazdaként tudjuk kiadni!
 install_ispell: ispell $(ISPELLDIR)
 	@echo "==> ispell állományok (magyar.aff magyar.hash) telepítése"
 	@echo "	célkönyvtár: $(ISPELLDIR)"
-	@$(INSTALL_DATA) $(WRKDIR)/magyar.aff $(ISPELLDIR)/magyar.aff
-	@$(INSTALL_DATA) $(WRKDIR)/magyar4ispell.hash $(ISPELLDIR)/magyar.hash
+	$(INSTALL_DATA) $(WKDIR)/magyar.aff $(ISPELLDIR)/magyar.aff
+	$(INSTALL_DATA) $(WKDIR)/magyar4ispell.hash $(ISPELLDIR)/magyar.hash
 # hungarian.aff link nem kell?
 	@if [ ! -h $(ISPELLDIR)/hungarian.hash ]; then \
 		ln -s magyar.hash $(ISPELLDIR)/hungarian.hash; \
@@ -187,7 +187,7 @@
 	@echo "==> myspell állományok (hu_HU.dic és hu_HU.aff) telepítése"
 	@echo "	célkönyvtár: $(MYSPELLDIR)"
 
-	@cp -f $(WRKDIR)/hu_HU.{dic,aff} $(MYSPELLDIR)/
+	cp -f $(WKDIR)/hu_HU.{dic,aff} $(MYSPELLDIR)/
 #	
 # magyar.aff -> hu_HU.aff kötés létrehozása
 	@echo " myspell linkek ({magyar,hungarian}.{dic,aff}) létrehozása"
@@ -213,14 +213,14 @@
 install_OO: myspell $(OODIR)
 	@echo "OpenOffice.org állományok (hu_HU.dic és hu_HU.aff) telepítése"
 	@echo "	célkönyvtár: $(OODIR)"
-	@$(INSTALL_DATA) $(WRKDIR)/hu_HU.{dic,aff} $(OODIR)
+	$(INSTALL_DATA) $(WKDIR)/hu_HU.{dic,aff} $(OODIR)
 
 install: install_all
 
 install_all: install_myspell install_ispell install_OO 
 
 # ispell opcióval kompilált hashtábla 
-#ispell: magyar4ispell.hash
+ispell: magyar4ispell.hash
 
 # hu_HU.aff myspell ragozási táblázat és a hu_HU.dic szótár elõállítása
 myspell: magyar4myspell.dict magyar.aff hu_HU.aff hu_HU.dic kr
@@ -230,10 +230,10 @@
 # a myspellhez elõállított magyar.aff állományhoz
 hu_HU.aff: magyar.aff
 	@echo "===> myspell ragozási táblázat (hu_HU.aff) elõállítása"
-	@$(SH) bin/i2myspell $(WRKDIR)/magyar.aff MYSPELL_heading \
+	$(SH) bin/i2myspell $(WKDIR)/magyar.aff MYSPELL_heading \
 		A-ZÁÉÍÓÖÕÚÜÛ a-záéíóöõúüû | sed 's/q\([^[]*\]\)/-\1/' \
                 >$(ROOTDIR)/hu_HU_morph.aff
-	@$(AWK) -f $(AWKDIR)/delete_morph_tags.awk $(ROOTDIR)/hu_HU_morph.aff | \
+	$(AWK) -f $(AWKDIR)/delete_morph_tags.awk $(ROOTDIR)/hu_HU_morph.aff | \
 		sed 's/&agrave;//' >$(ROOTDIR)/hu_HU.aff
 	
 
@@ -245,24 +245,24 @@
 # a myspellhez elõállított hashtáblából (magyar4myspell.hash)
 hu_HU.dic: magyar.aff
 	@echo "===> myspell szótár (hu_HU.dic) elõállítása"
-	@$(SH) bin/i2myspell -d $(WRKDIR)/magyar4myspell.dict | \
+	$(SH) bin/i2myspell -d $(WKDIR)/magyar4myspell.dict | \
 	      bin/lemma_present >$(ROOTDIR)/hu_HU_morph.dic
-	@sed 's/	.*//' $(ROOTDIR)/hu_HU_morph.dic >$(ROOTDIR)/hu_HU.dic
+	sed 's/	.*//' $(ROOTDIR)/hu_HU_morph.dic >$(ROOTDIR)/hu_HU.dic
 
 u8: hu_HU.aff hu_HU.dic
 	@echo "===> Unicode karakterkódolású állományok elõállítása"
-	@bin/u8myspell $(ROOTDIR)/hu_HU_morph $(WRKDIR)/hu_HU_u8_morph l2
-	@cat $(WRKDIR)/hu_HU_u8_morph.dic | sed 's#	/#/#' >$(ROOTDIR)/hu_HU_u8_morph.dic
-	@mv $(WRKDIR)/hu_HU_u8_morph.aff $(ROOTDIR)
-	@sed 's/	.*//' $(ROOTDIR)/hu_HU_u8_morph.dic >$(ROOTDIR)/hu_HU_u8.dic
-	@$(AWK) -f $(AWKDIR)/delete_morph_tags.awk $(ROOTDIR)/hu_HU_u8_morph.aff \
+	bin/u8myspell $(ROOTDIR)/hu_HU_morph $(WKDIR)/hu_HU_u8_morph l2
+	cat $(WKDIR)/hu_HU_u8_morph.dic | sed 's#	/#/#' >$(ROOTDIR)/hu_HU_u8_morph.dic
+	mv $(WKDIR)/hu_HU_u8_morph.aff $(ROOTDIR)
+	sed 's/	.*//' $(ROOTDIR)/hu_HU_u8_morph.dic >$(ROOTDIR)/hu_HU_u8.dic
+	$(AWK) -f $(AWKDIR)/delete_morph_tags.awk $(ROOTDIR)/hu_HU_u8_morph.aff \
 		>$(ROOTDIR)/hu_HU_u8.aff 
         
 kr: hu_HU.aff hu_HU.dic u8 
 	@cd kr; make
 
 # minden komponens kompilálása
-all: ispell myspell
+all: ispell
 
 # új modul létrehozása
 new:
@@ -271,7 +271,7 @@
 
 # takarítás
 clean: 
-	@-rm -rf $(WRKDIR) *~ $(ROOTDIR)/hu_*
+	@-rm -rf $(WKDIR) *~ $(ROOTDIR)/hu_*
 
 # a modulválasztás defaultra való visszaállítása
 # a kizárandó modulok explicite megadandók az "if"-ben
