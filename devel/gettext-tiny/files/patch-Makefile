--- Makefile.orig	2026-01-07 17:32:48 UTC
+++ Makefile
@@ -7,17 +7,9 @@ acdir=$(datarootdir)/aclocal
 datadir=$(datarootdir)/gettext-tiny
 acdir=$(datarootdir)/aclocal
 
-ifeq ($(LIBINTL), MUSL)
-	LIBSRC = libintl/libintl-musl.c
-	HEADERS =
-else ifeq ($(LIBINTL), NONE)
-	LIBSRC =
-	HEADERS =
-else
-	LIBSRC = libintl/libintl.c
-	HEADERS = libintl.h
-endif
-PROGSRC = $(sort $(wildcard src/*.c))
+LIBSRC =
+HEADERS =
+PROGSRC!=	ls src/*.c
 
 PARSEROBJS = src/poparser.o src/poparser_sysdep.o src/StringEscape.o
 PROGOBJS = $(PROGSRC:.c=.o)
@@ -25,12 +17,9 @@ ALL_INCLUDES = $(HEADERS)
 OBJS = $(PROGOBJS) $(LIBOBJS)
 
 ALL_INCLUDES = $(HEADERS)
-ifneq ($(LIBINTL), NONE)
-ALL_LIBS=libintl.a
-endif
 ALL_TOOLS=msgfmt msgmerge xgettext autopoint
-ALL_M4S=$(sort $(wildcard m4/*.m4))
-ALL_DATA=$(sort $(wildcard data/*))
+ALL_M4S!= ls m4/*.m4
+ALL_DATA!= ls data/*
 
 CFLAGS  ?= -O0 -fPIC
 
@@ -42,7 +31,7 @@ -include config.mak
 
 -include config.mak
 
-LDLIBS:=$(shell echo "int main(){}" | $(CC) $(CFLAGS) $(LDFLAGS) -liconv -x c - >/dev/null 2>&1 && printf %s -liconv)
+LDLIBS=
 
 BUILDCFLAGS=$(CFLAGS)
 
@@ -73,7 +62,7 @@ autopoint: src/autopoint.in
 	cp src/xgettext.sh ./xgettext
 
 autopoint: src/autopoint.in
-	cat $< | sed 's,@datadir@,$(datadir),' > $@
+	sed 's,@datadir@,$(datadir),' src/autopoint.in > $@
 
 $(DESTDIR)$(libdir)/%.a: %.a
 	$(INSTALL) -D -m 755 $< $@
