# Created by: Choe, Cheng-Dae
# $FreeBSD$

PORTNAME=	jep
PORTVERSION=	3.7.0
CATEGORIES=	devel java python
MASTER_SITES=	CHEESESHOP
PKGNAMEPREFIX=	${PYTHON_PKGNAMEPREFIX}

MAINTAINER=	dbaio@FreeBSD.org
COMMENT=	Java Embedded Python

LICENSE=	ZLIB
LICENSE_FILE=	${WRKSRC}/LICENSE

USES=		python
USE_PYTHON=	distutils

CONFIGURE_ENV=	JAVA_HOME=${JAVA_HOME}
MAKE_ENV=	JAVA_HOME=${JAVA_HOME}
USE_JAVA=	yes
JAVA_VERSION=	1.7+
USE_LDCONFIG=	yes
PLIST_SUB+=	VERSION=${PORTVERSION}

# Necessary, since the configure script does the LIBS and
# LDFLAGS detection wrong
CFLAGS+=	-I${JAVA_HOME}/include/freebsd
LDFLAGS+=	-L${LOCALBASE}/lib

OPTIONS_DEFINE=	NUMPY
OPTIONS_DEFAULT=	NUMPY
NUMPY_BUILD_DEPENDS=	${PYNUMPY}
NUMPY_RUN_DEPENDS=	${PYNUMPY}

post-install:
	${LN} -s ${PYTHON_SITELIBDIR}/jep/jep-${PORTVERSION}.jar ${STAGEDIR}${JAVAJARDIR}/jep.jar
	${STRIP_CMD} ${STAGEDIR}${PYTHONPREFIX_SITELIBDIR}/jep/jep.so

.include <bsd.port.mk>
