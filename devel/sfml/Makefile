PORTNAME=	SFML
DISTVERSION=	2.6.2
CATEGORIES=	devel

MAINTAINER=	amdmi3@FreeBSD.org
COMMENT=	Simple and Fast Multimedia Library
WWW=		https://www.sfml-dev.org/ \
		https://github.com/SFML/SFML

LICENSE=	ZLIB
LICENSE_FILE=	${WRKSRC}/license.md

USES=		cmake compiler:c++11-lang
USE_GITHUB=	yes
CMAKE_ON=	SFML_USE_SYSTEM_DEPS
USE_LDCONFIG=	yes

CONFLICTS=	sfml251

PORTDATA=	*
PORTDOCS=	*

PLIST_SUB=	LONGVERSION=${DISTVERSION} \
		SHORTVERSION=${DISTVERSION:R}

OPTIONS_DEFINE=		DOCS DOXYGEN
OPTIONS_GROUP=		MODULES
OPTIONS_GROUP_MODULES=	AUDIO GRAPHICS NETWORK WINDOW
OPTIONS_DEFAULT=	${OPTIONS_GROUP_MODULES}
OPTIONS_SUB=		yes

MODULES_DESC=		SFML modules

AUDIO_DESC=		SFML Audio module
AUDIO_LIB_DEPENDS=	libFLAC.so:audio/flac \
			libogg.so:audio/libogg \
			libvorbis.so:audio/libvorbis
AUDIO_USES=		openal:al
AUDIO_CMAKE_BOOL=	SFML_BUILD_AUDIO

DOXYGEN_IMPLIES=	DOCS
DOXYGEN_BUILD_DEPENDS=	doxygen:devel/doxygen
DOXYGEN_CMAKE_BOOL=	SFML_BUILD_DOC

GRAPHICS_DESC=		SFML Graphics module
GRAPHICS_IMPLIES=	WINDOW
GRAPHICS_LIB_DEPENDS=	libfreetype.so:print/freetype2
GRAPHICS_CMAKE_BOOL=	SFML_BUILD_GRAPHICS

NETWORK_DESC=		SFML Network module
NETWORK_CMAKE_BOOL=	SFML_BUILD_NETWORK

WINDOW_DESC=		SFML Window module
WINDOW_USES=		gl xorg
WINDOW_USE=		GL=gl XORG=x11,xcursor,xrandr
WINDOW_CMAKE_BOOL=	SFML_BUILD_WINDOW

post-install-DOCS-on:
	@${RM} ${STAGEDIR}${DOCSDIR}/license.md
	${INSTALL_DATA} ${WRKSRC}/changelog.md ${STAGEDIR}${DOCSDIR}

.include <bsd.port.mk>
