--- ext/oj/simd.h.orig	2025-12-06 21:39:02 UTC
+++ ext/oj/simd.h
@@ -24,7 +24,7 @@
 #endif  // x86/x86_64
 
 // ARM NEON detection
-#if defined(__ARM_NEON) || defined(__ARM_NEON__) || defined(__aarch64__) || defined(_M_ARM64)
+#if (defined(__ARM_NEON) || defined(__ARM_NEON__)) && (defined(__aarch64__) || defined(_M_ARM64))
 #define HAVE_SIMD_NEON 1
 #define SIMD_MINIMUM_THRESHOLD 6
 #include <arm_neon.h>
