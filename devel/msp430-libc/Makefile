# Created by: Lev Serebryakov <lev@serebryakov.spb.ru>
# $FreeBSD$

PORTNAME=	libc
PORTVERSION=	1.0.${LIBCVERSION}
PORTREVISION=	3
CATEGORIES=	devel
MASTER_SITES=	SF/mspgcc/${PKGNAMEPREFIX}${PORTNAME}
PKGNAMEPREFIX=	${LIBCTARGET}-
DISTNAME=	${PKGNAMEPREFIX}${PORTNAME}-${LIBCVERSION}

PATCH_SITES=		SF/mspgcc/Patches/LTS/${LTSVERSION}
PATCHFILES=		${LTS_PATCHES}
PATCH_DIST_STRIP=	-p1

MAINTAINER=	lev@FreeBSD.org
COMMENT=	Libc for TI's msp430 MCUs cross-development

LICENSE=	BSD2CLAUSE BSD3CLAUSE BSD4CLAUSE
LICENSE_COMB=	multi

DEPRECATED=		Obsolete. Please, use devel/gcc-msp430-ti-toolchain
EXPIRATION_DATE=	2016-01-08

BUILD_DEPENDS=	${LOCALBASE}/${LIBCTARGET}/include/${LIBCTARGET}.h:${PORTSDIR}/devel/${LIBCTARGET}mcu \
		${PKGNAMEPREFIX}gcc:${PORTSDIR}/devel/${PKGNAMEPREFIX}gcc
RUN_DEPENDS=	${LOCALBASE}/${LIBCTARGET}/include/${LIBCTARGET}.h:${PORTSDIR}/devel/${LIBCTARGET}mcu \
		${PKGNAMEPREFIX}gcc:${PORTSDIR}/devel/${PKGNAMEPREFIX}gcc

CONFLICTS=	${PKGNAMEPREFIX}${PORTNAME}-gcc3-[0-9]*

LIBCTARGET=	msp430
LIBCVERSION=	20120224
LTSVERSION=	20120406
BUGS_FIXED=	3522752
LTS_PATCHES!=	for bugid in ${BUGS_FIXED} ; do echo ${PKGNAMEPREFIX}${PORTNAME}-${LIBCVERSION}-sf$${bugid}.patch ; done

USES=		tar:bzip2 gmake

HAS_CONFIGURE=		yes
CONFIGURE_WRKSRC=	${WRKDIR}/${PKGNAMEPREFIX}libc-${LIBCVERSION}
CONFIGURE_ARGS=		--prefix=${STAGEDIR}${PREFIX}

MAKE_ENV+=	PATH=${PREFIX}/bin:${PATH}
WRKSRC=		${WRKDIR}/${PKGNAMEPREFIX}libc-${LIBCVERSION}/src
PATCH_WRKSRC=	${WRKDIR}/${PKGNAMEPREFIX}libc-${LIBCVERSION}

.include <bsd.port.mk>
