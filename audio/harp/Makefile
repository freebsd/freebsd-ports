# $FreeBSD$

PORTNAME=	harp
PORTVERSION=	0.6.0
CATEGORIES=	audio

MAINTAINER=	heckendorfc@gmail.com
COMMENT=	Minimalist audio player

LICENSE=	GPLv3

USE_GITHUB=	yes
GH_ACCOUNT=	heckendorfc
GH_TAGNAME=	${PORTVERSION}

USES=		cmake

USE_SQLITE=	yes

USE_LDCONFIG=	yes

OPTIONS_DEFINE=	AAC FLAC MP3 SHOUTCAST VORBIS DOCS
OPTIONS_SINGLE=	AUDIO_OUT
OPTIONS_SINGLE_AUDIO_OUT=	JACK OSS PULSEAUDIO
OPTIONS_DEFAULT=	AAC FLAC MP3 OSS SHOUTCAST VORBIS
OPTIONS_SUB=	yes

PORTDOCS=	README

AAC_LIB_DEPENDS=	libfaad.so:${PORTSDIR}/audio/faad
AAC_CMAKE_ON=		-DWITH_AAC:BOOL=ON
AAC_CMAKE_OFF=		-DWITH_AAC:BOOL=OFF

FLAC_LIB_DEPENDS=	libFLAC.so:${PORTSDIR}/audio/flac
FLAC_CMAKE_ON=		-DWITH_FLAC:BOOL=ON
FLAC_CMAKE_OFF=		-DWITH_FLAC:BOOL=OFF

MP3_LIB_DEPENDS+=	libmpg123.so:${PORTSDIR}/audio/mpg123
MP3_CMAKE_ON=		-DWITH_MP3:BOOL=ON
MP3_CMAKE_OFF=		-DWITH_MP3:BOOL=OFF

SHOUTCAST_CMAKE_ON=	-DWITH_STREAM:BOOL=ON
SHOUTCAST_CMAKE_OFF=	-DWITH_STREAM:BOOL=OFF

VORBIS_LIB_DEPENDS=	libvorbisfile.so:${PORTSDIR}/audio/libvorbis
VORBIS_CMAKE_ON=	-DWITH_VORBIS:BOOL=ON
VORBIS_CMAKE_OFF=	-DWITH_VORBIS:BOOL=OFF

OSS_CMAKE_ON=		-DWITH_OSS:BOOL=ON
OSS_CMAKE_OFF=		-DWITH_OSS:BOOL=OFF

JACK_LIB_DEPENDS=	libjack.so:${PORTSDIR}/audio/jack
JACK_LIB_DEPENDS+=	libsamplerate.so:${PORTSDIR}/audio/libsamplerate
JACK_CMAKE_ON=		-DWITH_JACK:BOOL=ON
JACK_CMAKE_OFF=		-DWITH_JACK:BOOL=OFF

PULSEAUDIO_LIB_DEPENDS=	libpulse.so:${PORTSDIR}/audio/pulseaudio
PULSEAUDIO_CMAKE_ON=	-DWITH_PULSE:BOOL=ON
PULSEAUDIO_CMAKE_OFF=	-DWITH_PULSE:BOOL=OFF

post-install:
	@${MKDIR} ${STAGEDIR}${DOCSDIR}
	${INSTALL_DATA} ${WRKSRC}/README ${STAGEDIR}${DOCSDIR}

.include <bsd.port.mk>
