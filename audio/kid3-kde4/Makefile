# $FreeBSD$

PORTNAME=	kid3
PORTVERSION=	2.3
PORTREVISION=	2
CATEGORIES=	audio kde
MASTER_SITES=	SF

MAINTAINER=	makc@FreeBSD.org
COMMENT=	MP3/Ogg/FLAC tag editor for KDE

LICENSE=	GPLv2

USE_KDE4=	kdelibs kdeprefix kdehier automoc4
USE_QT4=	qmake_build moc_build rcc_build uic_build
USES=		cmake gettext

OPTIONS_DEFINE=	FLAC ID3LIB MP4V2 VORBIS TAGLIB CHROMAPRINT
OPTIONS_DEFAULT=	${OPTIONS_DEFINE}

FLAC_DESC=	Support for FLAC files
FLAC_LIB_DEPENDS=	libFLAC.so:${PORTSDIR}/audio/flac
FLAC_CMAKE_ON=		-DWITH_FLAC=ON
FLAC_CMAKE_OFF=		-DWITH_FLAC=OFF

ID3LIB_DESC=	Support for mp3 files
ID3LIB_LIB_DEPENDS=	libid3-3.8.so:${PORTSDIR}/audio/id3lib
ID3LIB_CMAKE_ON=	-DWITH_ID3LIB=ON
ID3LIB_CMAKE_OFF=	-DWITH_ID3LIB=OFF

MP4V2_DESC=	Support for mp4 files
MP4V2_LIB_DEPENDS=	libmp4v2.so:${PORTSDIR}/multimedia/mp4v2
MP4V2_CMAKE_ON=		-DWITH_MP4V2=ON
MP4V2_CMAKE_OFF=	-DWITH_MP4V2=OFF

VORBIS_DESC=	Support for Ogg/Vorbis files
VORBIS_LIB_DEPENDS=	libvorbis.so:${PORTSDIR}/audio/libvorbis \
			libogg.so:${PORTSDIR}/audio/libogg
VORBIS_CMAKE_ON=	-DWITH_VORBIS=ON
VORBIS_CMAKE_OFF=	-DWITH_VORBIS=OFF

TAGLIB_DESC=	Support for various audio formats
TAGLIB_LIB_DEPENDS=	libtag.so:${PORTSDIR}/audio/taglib
TAGLIB_CMAKE_ON=	-DWITH_TAGLIB=ON
TAGLIB_CMAKE_OFF=	-DWITH_TAGLIB=OFF

CHROMAPRINT_DESC=	Support for Chromaprint audio fingerprints
CHROMAPRINT_LIB_DEPENDS=	libchromaprint.so:${PORTSDIR}/audio/chromaprint
CHROMAPRINT_CMAKE_ON=	-DWITH_CHROMAPRINT=ON \
			-DWITH_FFMPEG=ON
CHROMAPRINT_CMAKE_OFF=	-DWITH_CHROMAPRINT=OFF

pre-configure:
	${REINPLACE_CMD} -e 's,/usr/local,${LOCALBASE},g' ${WRKSRC}/CMakeLists.txt

.include <bsd.port.mk>
