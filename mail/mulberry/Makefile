# Created by: Yarema <yds@CoolRat.org>
# $FreeBSD$

PORTNAME=	mulberry
DISTVERSION=	4_0_8
PORTREVISION=	2
CATEGORIES=	mail linux
MASTER_SITES=	http://www.mulberrymail.com/downloads/Mulberry/v${DISTVERSION:S/./_/g}/
DISTNAME=	Mulberry
DIST_SUBDIR=	${PORTNAME}-${PORTVERSION}

MAINTAINER=	ports@FreeBSD.org
COMMENT=	Scalable high-performance GUI Internet Mail User Agent

USES=		linux tar:tgz
NO_WRKSUBDIR=	yes
USE_LINUX=	xorglibs
ONLY_FOR_ARCHS=	i386 amd64

OPTIONS_DEFINE=	DOCS

PLUGINSDIR=	${PREFIX}/lib/${PORTNAME}/Plug-ins
RESOURCESDIR=	${PREFIX}/lib/${PORTNAME}/Resources
PIXMAPSDIR=	${PREFIX}/share/pixmaps

SUB_LIST=	PORTNAME=${PORTNAME} WRKSRC=${WRKSRC}
PLIST_SUB=	PORTNAME=${PORTNAME}

do-build:
	${BRANDELF} -t Linux ${WRKSRC}/${PORTNAME}

do-install:
	${MKDIR} ${STAGEDIR}${PLUGINSDIR}
	${MKDIR} ${STAGEDIR}${PIXMAPSDIR}
	${INSTALL_PROGRAM} ${WRKSRC}/${PORTNAME} ${STAGEDIR}${PREFIX}/bin/${PORTNAME}
#	${INSTALL_PROGRAM} ${WRKSRC}/${PORTNAME} ${STAGEDIR}${PREFIX}/lib/${PORTNAME}/${PORTNAME}.bin
#	${INSTALL_SCRIPT} ${WRKSRC}/${PORTNAME}.sh ${STAGEDIR}${PREFIX}/bin/${PORTNAME}
	${INSTALL_DATA} ${WRKSRC}/.${PORTNAME}/Plug-ins/*.so ${STAGEDIR}${PLUGINSDIR}
	${MKDIR} ${STAGEDIR}${PREFIX}/lib/${PORTNAME}/Resources
	${INSTALL_DATA} ${WRKSRC}/.${PORTNAME}/Resources/* ${STAGEDIR}${RESOURCESDIR}
	${INSTALL_DATA} ${WRKSRC}/.${PORTNAME}/icons/* ${STAGEDIR}${PIXMAPSDIR}
	${MKDIR} ${STAGEDIR}${PLUGINSDIR}/Timezones
	${INSTALL_DATA} ${WRKSRC}/.${PORTNAME}/Plug-ins/Timezones/* ${STAGEDIR}${PLUGINSDIR}/Timezones
	${MKDIR} ${STAGEDIR}${EXAMPLESDIR}
	${INSTALL_DATA} ${FILESDIR}/mailcap ${STAGEDIR}${EXAMPLESDIR}
	${INSTALL_DATA} ${FILESDIR}/url.helpers ${STAGEDIR}${EXAMPLESDIR}

do-install-DOCS-on:
	${MKDIR} ${STAGEDIR}${DOCSDIR}
	${INSTALL_DATA} ${WRKSRC}/.${PORTNAME}/CHANGES* ${STAGEDIR}${DOCSDIR}
	${INSTALL_DATA} ${WRKSRC}/Mulberry_License ${STAGEDIR}${DOCSDIR}

.include <bsd.port.mk>
