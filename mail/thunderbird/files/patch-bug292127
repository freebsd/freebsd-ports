--- ldap/c-sdk/include/ldap.h~
+++ ldap/c-sdk/include/ldap.h
@@ -40,6 +40,229 @@
 #ifndef _LDAP_H
 #define _LDAP_H
 
+/* rename symbols to not clash with openldap (bug 292127) */
+#define ldap_abandon moz_ldap_abandon
+#define ldap_abandon_ext moz_ldap_abandon_ext
+#define ldap_abandoned moz_ldap_abandoned
+#define ldap_add moz_ldap_add
+#define ldap_add_ext moz_ldap_add_ext
+#define ldap_add_ext_s moz_ldap_add_ext_s
+#define ldap_add_result_entry moz_ldap_add_result_entry
+#define ldap_add_s moz_ldap_add_s
+#define ldap_ber_free moz_ldap_ber_free
+#define ldap_bind moz_ldap_bind
+#define ldap_bind_s moz_ldap_bind_s
+#define ldap_build_filter moz_ldap_build_filter
+#define ldap_cache_flush moz_ldap_cache_flush
+#define ldap_charray_add moz_ldap_charray_add
+#define ldap_charray_dup moz_ldap_charray_dup
+#define ldap_charray_free moz_ldap_charray_free
+#define ldap_charray_inlist moz_ldap_charray_inlist
+#define ldap_charray_merge moz_ldap_charray_merge
+#define ldap_charray_position moz_ldap_charray_position
+#define ldap_compare moz_ldap_compare
+#define ldap_compare_ext moz_ldap_compare_ext
+#define ldap_compare_ext_s moz_ldap_compare_ext_s
+#define ldap_compare_s moz_ldap_compare_s
+#define ldap_control_free moz_ldap_control_free
+#define ldap_controls_free moz_ldap_controls_free
+#define ldap_count_entries moz_ldap_count_entries
+#define ldap_count_messages moz_ldap_count_messages
+#define ldap_count_references moz_ldap_count_references
+#define ldap_count_values moz_ldap_count_values
+#define ldap_count_values_len moz_ldap_count_values_len
+#define ldap_create_authzid_control moz_ldap_create_authzid_control
+#define ldap_create_filter moz_ldap_create_filter
+#define ldap_create_geteffectiveRights_control moz_ldap_create_geteffectiveRights_control
+#define ldap_create_passwordpolicy_control moz_ldap_create_passwordpolicy_control
+#define ldap_create_passwordpolicy_control_ext moz_ldap_create_passwordpolicy_control_ext
+#define ldap_create_persistentsearch_control moz_ldap_create_persistentsearch_control
+#define ldap_create_proxiedauth_control moz_ldap_create_proxiedauth_control
+#define ldap_create_proxyauth_control moz_ldap_create_proxyauth_control
+#define ldap_create_sort_control moz_ldap_create_sort_control
+#define ldap_create_sort_keylist moz_ldap_create_sort_keylist
+#define ldap_create_userstatus_control moz_ldap_create_userstatus_control
+#define ldap_create_virtuallist_control moz_ldap_create_virtuallist_control
+#define ldap_delete moz_ldap_delete
+#define ldap_delete_ext moz_ldap_delete_ext
+#define ldap_delete_ext_s moz_ldap_delete_ext_s
+#define ldap_delete_result_entry moz_ldap_delete_result_entry
+#define ldap_delete_s moz_ldap_delete_s
+#define ldap_dn2ufn moz_ldap_dn2ufn
+#define ldap_entry2html moz_ldap_entry2html
+#define ldap_entry2html_search moz_ldap_entry2html_search
+#define ldap_entry2text moz_ldap_entry2text
+#define ldap_entry2text_search moz_ldap_entry2text_search
+#define ldap_err2string moz_ldap_err2string
+#define ldap_errlist moz_ldap_errlist
+#define ldap_explode moz_ldap_explode
+#define ldap_explode_dn moz_ldap_explode_dn
+#define ldap_explode_dns moz_ldap_explode_dns
+#define ldap_explode_rdn moz_ldap_explode_rdn
+#define ldap_extended_operation moz_ldap_extended_operation
+#define ldap_extended_operation_s moz_ldap_extended_operation_s
+#define ldap_find_control moz_ldap_find_control
+#define ldap_first_attribute moz_ldap_first_attribute
+#define ldap_first_disptmpl moz_ldap_first_disptmpl
+#define ldap_first_entry moz_ldap_first_entry
+#define ldap_first_message moz_ldap_first_message
+#define ldap_first_reference moz_ldap_first_reference
+#define ldap_first_searchobj moz_ldap_first_searchobj
+#define ldap_first_tmplcol moz_ldap_first_tmplcol
+#define ldap_first_tmplrow moz_ldap_first_tmplrow
+#define ldap_free_friendlymap moz_ldap_free_friendlymap
+#define ldap_free_searchprefs moz_ldap_free_searchprefs
+#define ldap_free_sort_keylist moz_ldap_free_sort_keylist
+#define ldap_free_templates moz_ldap_free_templates
+#define ldap_free_urldesc moz_ldap_free_urldesc
+#define ldap_friendly_name moz_ldap_friendly_name
+#define ldap_get_dn moz_ldap_get_dn
+#define ldap_get_entry_controls moz_ldap_get_entry_controls
+#define ldap_get_lang_values moz_ldap_get_lang_values
+#define ldap_get_lang_values_len moz_ldap_get_lang_values_len
+#define ldap_get_lderrno moz_ldap_get_lderrno
+#define ldap_get_option moz_ldap_get_option
+#define ldap_get_values moz_ldap_get_values
+#define ldap_get_values_len moz_ldap_get_values_len
+#define ldap_getfilter_free moz_ldap_getfilter_free
+#define ldap_getfirstfilter moz_ldap_getfirstfilter
+#define ldap_getnextfilter moz_ldap_getnextfilter
+#define ldap_init moz_ldap_init
+#define ldap_init_getfilter moz_ldap_init_getfilter
+#define ldap_init_getfilter_buf moz_ldap_init_getfilter_buf
+#define ldap_init_searchprefs moz_ldap_init_searchprefs
+#define ldap_init_searchprefs_buf moz_ldap_init_searchprefs_buf
+#define ldap_init_templates moz_ldap_init_templates
+#define ldap_init_templates_buf moz_ldap_init_templates_buf
+#define ldap_is_dns_dn moz_ldap_is_dns_dn
+#define ldap_is_ldap_url moz_ldap_is_ldap_url
+#define ldap_keysort_entries moz_ldap_keysort_entries
+#define ldap_ld_free moz_ldap_ld_free
+#define ldap_memcache_abandon moz_ldap_memcache_abandon
+#define ldap_memcache_append moz_ldap_memcache_append
+#define ldap_memcache_createkey moz_ldap_memcache_createkey
+#define ldap_memcache_destroy moz_ldap_memcache_destroy
+#define ldap_memcache_flush moz_ldap_memcache_flush
+#define ldap_memcache_flush_results moz_ldap_memcache_flush_results
+#define ldap_memcache_get moz_ldap_memcache_get
+#define ldap_memcache_init moz_ldap_memcache_init
+#define ldap_memcache_new moz_ldap_memcache_new
+#define ldap_memcache_result moz_ldap_memcache_result
+#define ldap_memcache_set moz_ldap_memcache_set
+#define ldap_memcache_update moz_ldap_memcache_update
+#define ldap_memfree moz_ldap_memfree
+#define ldap_modify moz_ldap_modify
+#define ldap_modify_ext moz_ldap_modify_ext
+#define ldap_modify_ext_s moz_ldap_modify_ext_s
+#define ldap_modify_s moz_ldap_modify_s
+#define ldap_modrdn moz_ldap_modrdn
+#define ldap_modrdn2 moz_ldap_modrdn2
+#define ldap_modrdn2_s moz_ldap_modrdn2_s
+#define ldap_modrdn_s moz_ldap_modrdn_s
+#define ldap_mods_free moz_ldap_mods_free
+#define ldap_msgdelete moz_ldap_msgdelete
+#define ldap_msgfree moz_ldap_msgfree
+#define ldap_msgid moz_ldap_msgid
+#define ldap_msgtype moz_ldap_msgtype
+#define ldap_multisort_entries moz_ldap_multisort_entries
+#define ldap_name2template moz_ldap_name2template
+#define ldap_next_attribute moz_ldap_next_attribute
+#define ldap_next_disptmpl moz_ldap_next_disptmpl
+#define ldap_next_entry moz_ldap_next_entry
+#define ldap_next_message moz_ldap_next_message
+#define ldap_next_reference moz_ldap_next_reference
+#define ldap_next_searchobj moz_ldap_next_searchobj
+#define ldap_next_tmplcol moz_ldap_next_tmplcol
+#define ldap_next_tmplrow moz_ldap_next_tmplrow
+#define ldap_oc2template moz_ldap_oc2template
+#define ldap_open moz_ldap_open
+#define ldap_parse_authzid_control moz_ldap_parse_authzid_control
+#define ldap_parse_entrychange_control moz_ldap_parse_entrychange_control
+#define ldap_parse_extended_result moz_ldap_parse_extended_result
+#define ldap_parse_passwd moz_ldap_parse_passwd
+#define ldap_parse_passwordpolicy_control moz_ldap_parse_passwordpolicy_control
+#define ldap_parse_passwordpolicy_control_ext moz_ldap_parse_passwordpolicy_control_ext
+#define ldap_parse_reference moz_ldap_parse_reference
+#define ldap_parse_result moz_ldap_parse_result
+#define ldap_parse_sasl_bind_result moz_ldap_parse_sasl_bind_result
+#define ldap_parse_sort_control moz_ldap_parse_sort_control
+#define ldap_parse_userstatus_control moz_ldap_parse_userstatus_control
+#define ldap_parse_virtuallist_control moz_ldap_parse_virtuallist_control
+#define ldap_parse_whoami moz_ldap_parse_whoami
+#define ldap_passwd moz_ldap_passwd
+#define ldap_passwd_s moz_ldap_passwd_s
+#define ldap_passwordpolicy_err2txt moz_ldap_passwordpolicy_err2txt
+#define ldap_perror moz_ldap_perror
+#define ldap_rename moz_ldap_rename
+#define ldap_rename_s moz_ldap_rename_s
+#define ldap_result moz_ldap_result
+#define ldap_result2error moz_ldap_result2error
+#define ldap_sasl_bind moz_ldap_sasl_bind
+#define ldap_sasl_bind_s moz_ldap_sasl_bind_s
+#define ldap_sasl_interactive_bind_ext_s moz_ldap_sasl_interactive_bind_ext_s
+#define ldap_sasl_interactive_bind_s moz_ldap_sasl_interactive_bind_s
+#define ldap_search moz_ldap_search
+#define ldap_search_ext moz_ldap_search_ext
+#define ldap_search_ext_s moz_ldap_search_ext_s
+#define ldap_search_s moz_ldap_search_s
+#define ldap_search_st moz_ldap_search_st
+#define ldap_set_filter_additions moz_ldap_set_filter_additions
+#define ldap_set_lderrno moz_ldap_set_lderrno
+#define ldap_set_option moz_ldap_set_option
+#define ldap_set_rebind_proc moz_ldap_set_rebind_proc
+#define ldap_setfilteraffixes moz_ldap_setfilteraffixes
+#define ldap_simple_bind moz_ldap_simple_bind
+#define ldap_simple_bind_s moz_ldap_simple_bind_s
+#define ldap_sort_entries moz_ldap_sort_entries
+#define ldap_sort_strcasecmp moz_ldap_sort_strcasecmp
+#define ldap_sort_values moz_ldap_sort_values
+#define ldap_start_tls_s moz_ldap_start_tls_s
+#define ldap_str2charray moz_ldap_str2charray
+#define ldap_tmplattrs moz_ldap_tmplattrs
+#define ldap_tmplerr2string moz_ldap_tmplerr2string
+#define ldap_tmplerrlist moz_ldap_tmplerrlist
+#define ldap_ufn_search_c moz_ldap_ufn_search_c
+#define ldap_ufn_search_ct moz_ldap_ufn_search_ct
+#define ldap_ufn_search_ctx moz_ldap_ufn_search_ctx
+#define ldap_ufn_search_s moz_ldap_ufn_search_s
+#define ldap_ufn_setfilter moz_ldap_ufn_setfilter
+#define ldap_ufn_setprefix moz_ldap_ufn_setprefix
+#define ldap_ufn_timeout moz_ldap_ufn_timeout
+#define ldap_unbind moz_ldap_unbind
+#define ldap_unbind_ext moz_ldap_unbind_ext
+#define ldap_unbind_s moz_ldap_unbind_s
+#define ldap_url_parse moz_ldap_url_parse
+#define ldap_url_parse_no_defaults moz_ldap_url_parse_no_defaults
+#define ldap_url_search moz_ldap_url_search
+#define ldap_url_search_s moz_ldap_url_search_s
+#define ldap_url_search_st moz_ldap_url_search_st
+#define ldap_utf8characters moz_ldap_utf8characters
+#define ldap_utf8copy moz_ldap_utf8copy
+#define ldap_utf8getcc moz_ldap_utf8getcc
+#define ldap_utf8isalnum moz_ldap_utf8isalnum
+#define ldap_utf8isalpha moz_ldap_utf8isalpha
+#define ldap_utf8isdigit moz_ldap_utf8isdigit
+#define ldap_utf8isspace moz_ldap_utf8isspace
+#define ldap_utf8isxdigit moz_ldap_utf8isxdigit
+#define ldap_utf8len moz_ldap_utf8len
+#define ldap_utf8next moz_ldap_utf8next
+#define ldap_utf8prev moz_ldap_utf8prev
+#define ldap_utf8strtok_r moz_ldap_utf8strtok_r
+#define ldap_vals2html moz_ldap_vals2html
+#define ldap_vals2text moz_ldap_vals2text
+#define ldap_value_free moz_ldap_value_free
+#define ldap_value_free_len moz_ldap_value_free_len
+#define ldap_version moz_ldap_version
+#define ldap_whoami moz_ldap_whoami
+#define ldap_whoami_s moz_ldap_whoami_s
+#define ldap_x_calloc moz_ldap_x_calloc
+#define ldap_x_free moz_ldap_x_free
+#define ldap_x_hostlist_first moz_ldap_x_hostlist_first
+#define ldap_x_hostlist_next moz_ldap_x_hostlist_next
+#define ldap_x_hostlist_statusfree moz_ldap_x_hostlist_statusfree
+#define ldap_x_malloc moz_ldap_x_malloc
+#define ldap_x_realloc moz_ldap_x_realloc
+
 /* Standard LDAP API functions and declarations */ 
 #include "ldap-standard.h"
 
