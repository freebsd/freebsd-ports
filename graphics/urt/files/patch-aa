diff -ur ../urt-3.1b-orig/config/urt ./config/urt
--- ../urt-3.1b-orig/config/urt	Wed Jul 15 15:47:15 1992
+++ ./config/urt	Sat Sep 16 23:00:11 1995
@@ -1,3 +1,7 @@
+# Configuration for HP 9000/300 series running BSD4.3
+
+#quiet on
+
 # Configuration file for the URT raster toolkit package.  Modify all 
 # entries in this file.
 
@@ -29,7 +33,7 @@
 ##define SUNTOOLS       For Suns running SunTools.
 ##define TAAC1		Suns with TAAC-1 board.
 ##define X10		X10 Window system.
-##define X11            X11 Window system.
+#define X11            X11 Window system.
 
 # Conversion programs
 #define ABEKASA60	Abekas A60 conversions.
@@ -41,11 +45,11 @@
 #define GRAYFILES	Grayscale conversions.
 ##define SGICONV	SGI Image conversions.
 #define MACPAINT	Macpaint conversions.
-##define PBMPLUS	PBMPLUS conversions.
+#define PBMPLUS	PBMPLUS conversions.
 #define POSTSCRIPT	Postscript conversions.
 ##define SUNRASTER	For Sun raster conversions.
 #define TARGA		Targa format conversions.
-##define TIFF		TIFF image conversions.
+#define TIFF		TIFF image conversions.
 #define TIFF2p4		Define if libtiff is version 2.4 or greater
 #define VICAR		VICAR image conversions.
 #define WASATCH		Wasatch Paintbox conversions.
@@ -60,7 +64,7 @@
 ##define APOLLOCC	Apollo computer.
 ##define CONVEXCC	Convex C 4.0 or greater
 ##define CRAY2CC		Cray-2 running UNICOS.
-##define GCC		Gcc compiler.
+#define GCC		Gcc compiler.
 ##define HPUX300CC	HP 9000/300 running HP-UX.
 ##define HPUX800CC	HP 9000/800 running HP-UX.
 ##define IBMR6000CC	IBM RS6000.
@@ -70,14 +74,14 @@
 ##define 386IXCC		SVr3 386/ix 2.2
 
 # You can put any system dependent flags here.
-ExtraCFLAGS = 
+ExtraCFLAGS = -m486 -O2
 
 # System specific or configuration parameters.  Define according to your
 # environment and desires.
 
 ##define ABEKAS_PAL	Convert to PAL format in Abekas A60 tool.
 ##define ALL_MAN	Print/install all man pages.
-##define CONST_DECL	If your compiler understands 'const' (ANSI)
+#define CONST_DECL	If your compiler understands 'const' (ANSI)
 ##define FILE_NAME_14_CHARS	If filenames are limited to 14 characters.
 ##define HAVE_CPROTO	If you have the cproto command.  Not normally required.
 ##define NEED_BSTRING	Your libc does not have bcopy or bzero (Sys V probably)
@@ -92,16 +96,16 @@
 ##define STDIO_NEEDS_BINARY	Your fopen() needs "b" specified for binary io
 ##define USE_TIME_H	You need to include time.h for time_t (Sys V)
 ##define SYS_V_SETPGRP	Your system has the SysV setpgrp() call.
-##define USE_L_FLAG	Use -Llibdir -lrle instead of libdir/liblre.a.
-##define USE_PROTOTYPES	Declare library functions with ANSI-C prototypes.
-##define USE_RANDOM	Your libc has the BSD random() function.
+#define USE_L_FLAG	Use -Llibdir -lrle instead of libdir/liblre.a.
+#define USE_PROTOTYPES	Declare library functions with ANSI-C prototypes.
+#define USE_RANDOM	Your libc has the BSD random() function.
 ##define USE_STDARG	Use 'stdarg' instead of 'varargs' (ANSI).
 ##define USE_STDLIB_H	You have "stdlib.h".
 ##define USE_UNISTD_H	You have "unistd.h".
 ##define USE_STRING_H	You have "string.h", not "strings.h"
-##define VOID_STAR	Your C compiler understands the 'void *' declaration.
+#define VOID_STAR	Your C compiler understands the 'void *' declaration.
 ##define USE_XLIBINT_H	You have the include file <X11/Xlibint.h>.
-##define X_SHARED_MEMORY	You have the XShm extension.
+#define X_SHARED_MEMORY	You have the XShm extension.
 
 # DEST is where all programs will be put.  Can be overridden for specific
 # directories below.
@@ -121,12 +125,14 @@
 # library, include files, or manual pages, respectively, to be
 # installed anywhere.
 
-##defpath MAN_DEST /usr/site/man
-##defpath LIB_DEST
-##defpath GET_DEST
-##defpath CNV_DEST
-##defpath TOOLS_DEST
-##defpath INC_DEST
+# This paths will be adapted (were? :-) by a configure script.
+
+#defpath MAN_DEST FBSD_PREFIX/man
+#defpath LIB_DEST FBSD_PREFIX/lib
+#defpath GET_DEST FBSD_PREFIX/bin
+#defpath CNV_DEST FBSD_PREFIX/bin
+#defpath TOOLS_DEST FBSD_PREFIX/bin
+#defpath INC_DEST FBSD_PREFIX/include
 
 # Control of formatting.  If your "roff" program needs to be piped to
 # something to print, set ROFFPIPE to (e.g.) "| lpr"
@@ -191,11 +197,10 @@
 #ifdef PBMPLUS
 # PBMDIR should refer to the root of your PBM source tree.
 # If relative, it's relative to root of URT source tree.
-#defpath PBMDIR
+##defpath PBMDIR
 
-INCPBMPLUS = -I$(PBMDIR) -I$(PBMDIR)/ppm -I$(PBMDIR)/pgm -I$(PBMDIR)/pbm
-LIBPBMPLUS = $(PBMDIR)/ppm/libppm.a $(PBMDIR)/pgm/libpgm.a \
-		$(PBMDIR)/pbm/libpbm.a 
+INCPBMPLUS = -I${X11BASE}/include
+LIBPBMPLUS = -L${X11BASE}/lib -lppm -lpgm -lpbm
 #endif
 
 #ifdef SUNRASTER|SUNTOOLS|TAAC1
@@ -216,9 +221,9 @@
 
 #ifdef TIFF
 # Location of tiff library and include files.  Relative to URT root directory.
-#defpath TIFFDIR
-INCTIFF = -I$(TIFFDIR)
-LIBTIFF = $(TIFFDIR)/libtiff.a
+##defpath TIFFDIR
+INCTIFF = -I${PREFIX}/include/tiff34
+LIBTIFF = -L${PREFIX}/lib -ltiff34
 #endif
 
 #ifdef X10
@@ -227,6 +232,6 @@
 #endif
 
 #ifdef X11
-LIBX11 = -lX11
-INCX11 = 
+LIBX11 = -L${X11BASE}/lib -lX11
+INCX11 = -I${X11BASE}/include
 #endif
diff -ur ../urt-3.1b-orig/get/getx11/in_cmap.c ./get/getx11/in_cmap.c
--- ../urt-3.1b-orig/get/getx11/in_cmap.c	Thu Apr 30 10:17:16 1992
+++ ./get/getx11/in_cmap.c	Sat Sep 16 11:16:59 1995
@@ -70,10 +70,10 @@
     if ( img->sep_colors ||
 	 (img->img_channels == 1 && img->ncmap == 3 && img->cmlen) )
 	/* If using color map directly, apply display gamma, too. */
-	img->in_cmap = buildmap( img_hdr, 3, img->gamma,
+	img->in_cmap = buildmap( img_hdr, 3, (double) img->gamma,
 				 display_gamma );
     else
-	img->in_cmap = buildmap( img_hdr, 3, img->gamma, 1.0 );
+	img->in_cmap = buildmap( img_hdr, 3, (double) img->gamma, 1.0 );
     
     for (i = 0; i < 3; i++ ) {
 	for (j = 0; j < 256; j++)
diff -ur ../urt-3.1b-orig/include/rle_config.tlr ./include/rle_config.tlr
--- ../urt-3.1b-orig/include/rle_config.tlr	Thu Apr 30 10:06:23 1992
+++ ./include/rle_config.tlr	Sat Sep 16 11:31:57 1995
@@ -48,7 +48,7 @@
 #endif /* NO_DECLARE_MALLOC */
 
 #ifdef USE_PROTOTYPES
-extern char *getenv( CONST_DECL char *name );
+extern char *getenv( CONST_DECL char *CONST_DECL name);
 #else
 extern char *getenv();
 #endif
diff -ur ../urt-3.1b-orig/lib/buildmap.c ./lib/buildmap.c
--- ../urt-3.1b-orig/lib/buildmap.c	Thu Feb 27 18:17:01 1992
+++ ./lib/buildmap.c	Sat Sep 16 12:11:12 1995
@@ -26,6 +26,7 @@
  */
 
 #include <stdio.h>
+#include <stdlib.h>
 #include "rle.h"
 #include <math.h>
 
diff -ur ../urt-3.1b-orig/lib/makefile.src ./lib/makefile.src
--- ../urt-3.1b-orig/lib/makefile.src	Wed Mar  4 16:32:53 1992
+++ ./lib/makefile.src	Sat Sep 16 10:44:35 1995
@@ -26,7 +26,10 @@
 	vaxshort.o \
 	$(OPT_OBJS)
 
-LIBNAME = librle.a
+SOOBJS = $(OBJS:.o=.so)
+
+LIBANAME = librle.a
+LIBSONAME = librle.so.1.0
 
 # Just rebuild the object files.
 objs: $(OBJS)
@@ -37,23 +40,13 @@
 # Do nothing if $(DEST) is empty (or not defined)
 install: buildlib
 	@sh -c "if test '$(DEST)x' != x ; then \
-		echo cp $(LIBNAME) $(DEST)/$(LIBNAME) ; \
-		cp $(LIBNAME) $(DEST)/$(LIBNAME) ; \
+		echo cp $(LIBANAME) $(DEST)/$(LIBANAME) ; \
+		cp $(LIBANAME) $(DEST)/$(LIBANAME) ; \
+		echo cp $(LIBSONAME) $(DEST)/$(LIBSONAME) ; \
+		cp $(LIBSONAME) $(DEST)/$(LIBSONAME) ; \
 		if test x$(RANLIB) != x ; then \
-			echo ranlib $(DEST)/$(LIBNAME) ; \
-			ranlib $(DEST)/$(LIBNAME) ; \
-		else \
-			true ; \
-		fi ; \
-		if test -d $(DEST)/debug ; then \
-			echo cp $(LIBNAME) $(DEST)/debug/$(LIBNAME) ; \
-			if test x$(RANLIB) != x ; then \
-				cp $(LIBNAME) $(DEST)/debug/$(LIBNAME) ; \
-				echo ranlib $(DEST)/debug/$(LIBNAME) ; \
-			else \
-				true ; \
-			fi ; \
-			ranlib $(DEST)/debug/$(LIBNAME) ; \
+			echo ranlib $(DEST)/$(LIBANAME) ; \
+			ranlib $(DEST)/$(LIBANAME) ; \
 		else \
 			true ; \
 		fi ; \
@@ -63,14 +56,24 @@
 	touch install
 
 # Rebuild the library from all the .o files.
-buildlib: $(OBJS)
-	-rm -f $(LIBNAME)
-	ar rc $(LIBNAME)
-	ar q $(LIBNAME) $(OBJS)
+buildlib: $(LIBANAME) $(LIBSONAME)
+
+$(LIBANAME): $(OBJS)
+	-rm -f $@
+	ar rc $@ $?
 #ifndef NO_RANLIB
-	ranlib $(LIBNAME)
+	ranlib $@
 #endif
-	touch buildlib
+
+.SUFFIXES: .so .o
+
+.c.so:
+	$(CC) -fPIC -DPIC $(CFLAGS) -c $*.c -o $*.so
+	$(LD) -X -r $*.so
+
+$(LIBSONAME): $(SOOBJS)
+	-rm -f $@
+	ld -Bshareable -o $@ $>
 
 # Clean up installed stuff and binaries
 pristine: clean
@@ -86,9 +89,12 @@
 # Get rid of everything which must be recompiled on a different computer.
 clean:
 	-rm -f *.o
+	-rm -f *.so
 	-@if test x$(DEST) != x ; then \
-		echo rm -f $(LIBNAME) ; \
-		rm -f $(LIBNAME) ; \
+		echo rm -f $(LIBANAME) ; \
+		rm -f $(LIBANAME) ; \
+		echo rm -f $(LIBSONAME) ; \
+		rm -f $(LIBSONAME) ; \
 	else \
 		true ; \
 	fi
diff -ur ../urt-3.1b-orig/makefile.src ./makefile.src
--- ../urt-3.1b-orig/makefile.src	Fri Jun  7 11:58:13 1991
+++ ./makefile.src	Fri Sep 15 22:09:01 1995
@@ -17,7 +17,7 @@
 # clean deletes all but source, pristine (below) deletes installed stuff, too
 default clean: doit
 	@for d in $(DIRS) ; do \
-		( cd $$d ; echo make $@ on $$d ; make $(MFLAGS) $@ ) ; \
+		( cd $$d ; echo make $@ on $$d ; $(MAKE) $(MFLAGS) $@ ) ; \
 	done
 
 # install puts library, binaries and documentation into global location
@@ -29,7 +29,7 @@
 
 install $(MAKE_TARGET) pristine depend:: doit
 	@for d in $(ALLDIRS) ; do \
-		( cd $$d ; echo make $@ on $$d ; make $(MFLAGS) $@ ) ; \
+		( cd $$d ; echo make $@ on $$d ; $(MAKE) $(MFLAGS) $@ ) ; \
 	done
 
 
diff -ur ../urt-3.1b-orig/makefile.tlr ./makefile.tlr
--- ../urt-3.1b-orig/makefile.tlr	Tue Aug  4 13:17:57 1992
+++ ./makefile.tlr	Sat Sep 16 10:35:58 1995
@@ -7,7 +7,7 @@
 	@sh -c "if test 'x$(DIRS)' != x ; then eval \
 		'set -e ; for dir in $(DIRS) ; do \
 			(cd \$$dir ; echo Make ${HERE}\$$dir ; \
-			 	make $(MFLAGS) $(DIRMFLAGS) ) ; \
+			 	$(MAKE) $(MFLAGS) $(DIRMFLAGS) ) ; \
 		done' ; \
 	  else \
 		true ; \
@@ -46,7 +46,7 @@
 	@sh -c "if test 'x$(DIRS)' != x  ; then eval \
 		'for dir in $(DIRS) ; do \
 			(cd \$$dir ; echo Install ${HERE}\$$dir ; \
-			 make $(MFLAGS) $(DIRMFLAGS) install) ; \
+			 $(MAKE) $(MFLAGS) $(DIRMFLAGS) install) ; \
 		done' ; \
 	  else \
 		true ; \
@@ -105,7 +105,7 @@
 	    'for dir in $(ALLDIRS); do \
 		if test -d $$dir ; then \
 			(cd $$dir; echo Make ${HERE}$$dir pristine ; \
-			 make $(MFLAGS) pristine); \
+			 $(MAKE) $(MFLAGS) pristine); \
 		else \
 			true; \
 		fi; \
@@ -124,7 +124,7 @@
 	    'for dir in $(ALLDIRS); do \
 		if test -d $$dir ; then \
 			(cd $$dir; echo Clean ${HERE}$$dir ; \
-			 make $(MFLAGS) clean); \
+			$(MAKE) $(MFLAGS) clean); \
 		else \
 			true; \
 		fi; \
diff -ur ../urt-3.1b-orig/man/makefile.src ./man/makefile.src
--- ../urt-3.1b-orig/man/makefile.src	Thu Feb 27 18:26:52 1992
+++ ./man/makefile.src	Sat Sep 16 13:51:29 1995
@@ -216,9 +216,9 @@
 install-1: $(PAGES1)
 	@-sh -c "if test '$(DEST)X' != X ; then \
 		for i in $? ; do \
-			dpgm=\`basename \$$i .1\`.$(SUFF1) ; \
-			echo cp \$$i $(DEST1)/\$$dpgm ; \
-			cp \$$i $(DEST1)/\$$dpgm ; \
+			dpgm=$(DEST1)/\`basename \$$i .1\`.$(SUFF1) ; \
+			echo cp \$$i \$$dpgm ';' gzip -9nf \$$dpgm ; \
+			cp \$$i \$$dpgm ; gzip -9nf \$$dpgm ; \
 		done ; \
 	else \
 		true ; \
@@ -228,9 +228,9 @@
 install-3: $(PAGES3)
 	@-sh -c "if test '$(DEST)X' != X ; then \
 		for i in $? ; do \
-			dpgm=${PAGE3_INSTALL_NAME} ; \
-			echo cp \$$i $(DEST3)/\$$dpgm ; \
-			cp \$$i $(DEST3)/\$$dpgm ; \
+			dpgm=$(DEST3)/${PAGE3_INSTALL_NAME} ; \
+			echo cp \$$i \$$dpgm ';' gzip -9nf \$$dpgm ; \
+			cp \$$i \$$dpgm ; gzip -9nf \$$dpgm ;\
 		done ; \
 	else \
 		true ; \
diff -ur ../urt-3.1b-orig/tools/into.c ./tools/into.c
--- ../urt-3.1b-orig/tools/into.c	Thu Apr 30 10:10:15 1992
+++ ./tools/into.c	Sat Sep 16 10:32:26 1995
@@ -41,7 +41,10 @@
 short forceflg;				/* overwrite an unwritable file? */
 
 extern int errno;
+
+#ifndef BSD
 extern char *sys_errlist[];
+#endif
 
 void
 main(argc, argv)
diff -ur ../urt-3.1b-orig/tools/makefile.src ./tools/makefile.src
--- ../urt-3.1b-orig/tools/makefile.src	Tue Jan 28 15:47:42 1992
+++ ./tools/makefile.src	Sat Sep 16 10:33:14 1995
@@ -68,7 +68,7 @@
 fant.out: fant.o mallocNd.o
 	$(CC) $(CFLAGS) -I$(RI) fant.o mallocNd.o $(LIBS) -lm -o fant.new
 	mv fant.new fant.out
-	
+
 # rlebox and crop use some common code.
 rle_box.o: $(RI)/rle.h $(RI)/rle_config.h $(RI)/rle_raw.h
 
@@ -82,7 +82,7 @@
 # rleClock has it's own directory, must be built special
 
 rleClock.out: clock/font.c clock/font.h clock/font.src clock/rleClock.c
-	(cd clock ; make)
+	(cd clock ; $(MAKE))
 
 # Incremental install, copies everything ("$?") since last install to DEST dir.
 install: $(PGMS) install-pgm
