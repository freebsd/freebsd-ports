# Created by: stas
# $FreeBSD$

PORTNAME=	podofo
PORTVERSION=	0.9.3
PORTREVISION=	1
CATEGORIES=	graphics print
MASTER_SITES=	SF/${PORTNAME}/${PORTNAME}/${PORTVERSION}

MAINTAINER=	pawel@FreeBSD.org
COMMENT=	PDF manipulation library and tools

LICENSE=	GPLv2 LGPL21
LICENSE_COMB=	multi

LIB_DEPENDS=	libidn.so:${PORTSDIR}/dns/libidn \
		libfreetype.so:${PORTSDIR}/print/freetype2 \
		libfontconfig.so:${PORTSDIR}/x11-fonts/fontconfig

USES=		cmake dos2unix
CMAKE_ARGS=	-DPODOFO_BUILD_SHARED:BOOL=TRUE \
		-DPODOFO_BUILD_STATIC:BOOL=FALSE \
		-DOPENSSL_INCLUDE_DIR:PATH="${OPENSSLINC}" \
		-DOPENSSL_LIBRARIES:PATH="${OPENSSLDIR}"
USE_OPENSSL=	yes
USE_LDCONFIG=	yes
DOS2UNIX_FILES=	cmake/modules/FindFREETYPE.cmake

OPTIONS_DEFINE=		IMPOSE JPEG PNG TIFF
OPTIONS_DEFAULT=	JPEG PNG TIFF
IMPOSE_DESC=		Build impose tool (needs Lua)

IMPOSE_CMAKE_ON=	-DWANT_LUA:BOOL=TRUE
IMPOSE_CXXFLAGS=	-I${LUA_INCDIR}
IMPOSE_LDFLAGS=		-L${LUA_LIBDIR}

JPEG_CMAKE_ON=		-DWANT_LIBJPEG:BOOL=TRUE
JPEG_LIB_DEPENDS=	libjpeg.so:${PORTSDIR}/graphics/jpeg

PNG_CMAKE_ON=		-DWANT_PNG:BOOL=TRUE
PNG_LIB_DEPENDS=	libpng15.so:${PORTSDIR}/graphics/png

TIFF_CMAKE_ON=		-DWANT_TIFF:BOOL=TRUE
TIFF_LIB_DEPENDS=	libtiff.so:${PORTSDIR}/graphics/tiff

IMPOSE_USES=		lua:51

.include <bsd.port.mk>
