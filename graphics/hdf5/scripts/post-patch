#!/bin/sh

for f in `find ${WRKSRC} -type f -name Makefile.in -print | xargs grep -l "^CFLAGS = -ansi -O"`
do
patch -p << END_OF_PATCH
--- $f.orig
+++ $f
@@ -72,1 +72,1 @@
-CFLAGS = -ansi -O
+#CFLAGS = -ansi -O
END_OF_PATCH
done
for f in `find ${WRKSRC} -type f -name Makefile.in -print | xargs grep -l "^ZLIB_LIB = "`
do
patch -p << END_OF_PATCH
--- $f.orig
+++ $f
@@ -72,1 +72,1 @@
-ZLIB_LIB = \$(TOP_SRCDIR)/hdf/zlib/libz.a
+#ZLIB_LIB = \$(TOP_SRCDIR)/hdf/zlib/libz.a
END_OF_PATCH
done
for f in `find ${WRKSRC} -type f -name Makefile.in -print | xargs grep -l "^JPEG_LIB = "`
do
patch -p << END_OF_PATCH
--- $f.orig
+++ $f
@@ -72,1 +72,1 @@
-JPEG_LIB = \$(TOP_SRCDIR)/hdf/jpeg/libjpeg.a
+#JPEG_LIB = \$(TOP_SRCDIR)/hdf/jpeg/libjpeg.a
END_OF_PATCH
done
for f in `find ${WRKSRC} -type f -name Makefile.in -print | xargs grep -l "^ZLIBLIB="`
do
patch -p << END_OF_PATCH
--- $f.orig
+++ $f
@@ -72,2 +72,2 @@
-ZLIBINC=\$(srcdir)/../zlib
-ZLIBLIB=\$(srcdir)/../zlib
+ZLIBINC=/usr/include
+ZLIBLIB=-lz \$(pwrkdir)
END_OF_PATCH
done

for f in `find ${WRKSRC} -type f -name Makefile.in -print | xargs grep -l "^ZLIBLIB="`
do
patch -p << END_OF_PATCH
--- $f.orig
+++ $f
@@ -72,2 +72,2 @@
-ZLIBLIB=\$(srcdir)/../zlib
-ZLIBINC=\$(srcdir)/../zlib
+ZLIBLIB=-lz
+ZLIBINC=/usr/include
END_OF_PATCH
done

for f in `find ${WRKSRC} -type f -name Makefile.in -print | xargs grep -l "^JPEGLIB="`
do
patch -p << END_OF_PATCH
--- $f.orig
+++ $f
@@ -72,2 +72,2 @@
-JPEGINC=\$(srcdir)/../jpeg
-JPEGLIB=\$(srcdir)/../jpeg
+JPEGINC=\$(prefix)/include
+JPEGLIB=\$(prefix)/lib
END_OF_PATCH
done

for f in `find ${WRKSRC} -type f -name Makefile.in -print | xargs grep -l "^JPEGLIB="`
do
patch -p << END_OF_PATCH
--- $f.orig
+++ $f
@@ -72,2 +72,2 @@
-JPEGLIB=\$(srcdir)/../jpeg
-JPEGINC=\$(srcdir)/../jpeg
+JPEGLIB=\$(prefix)/lib
+JPEGINC=\$(prefix)/include
END_OF_PATCH
done
