PORTNAME=	khronos-texture
DISTVERSIONPREFIX=	v
DISTVERSION=	4.3.2
CATEGORIES=	graphics

MAINTAINER=	vvd@FreeBSD.org
COMMENT=	Khronos Texture is a container for textures for OpenGL/Vulkan/etc
WWW=		https://github.com/KhronosGroup/KTX-Software

LICENSE=	APACHE20

BUILD_DEPENDS=	bash:shells/bash

USES=		cmake compiler:c++11-lib python:build

USE_GITHUB=	yes
GH_ACCOUNT=	KhronosGroup
GH_PROJECT=	KTX-Software

OPTIONS_DEFAULT_aarch64=	NEON
OPTIONS_DEFAULT_amd64=		SSE2
OPTIONS_DEFAULT_armv7=		NEON
OPTIONS_DEFAULT_OTHER_ARCHS=	NONE
OPTIONS_SINGLE=			SIMD
OPTIONS_SINGLE_SIMD=		AVX2 NEON NONE SSE2 SSE41
OPTIONS_EXCLUDE=		${${ARCH} != amd64 && ${ARCH} != i386:?AVX2 SSE2 SSE41:}
OPTIONS_EXCLUDE+=		${${ARCH} != armv6 && ${ARCH} != armv7 && ${ARCH} != aarch64:?NEON:}

AVX2_DESC=		Use the AVX2 instruction set
NEON_DESC=		Use the NEON instruction set
NONE_DESC=		Don't use any SIMD instructions
SSE2_DESC=		Use the SSE2 instruction set
SSE41_DESC=		Use the SSE4.1 instruction set

AVX2_CMAKE_ON=		-DASTCENC_ISA_AVX2:BOOL=ON -DBASISU_SUPPORT_SSE:BOOL=ON
NEON_CMAKE_ON=		-DASTCENC_ISA_NEON:BOOL=ON
NONE_CMAKE_ON=		-DASTCENC_ISA_NONE:BOOL=ON -DBASISU_SUPPORT_SSE:BOOL=OFF
SSE2_CMAKE_ON=		-DASTCENC_ISA_SSE2:BOOL=ON -DBASISU_SUPPORT_SSE:BOOL=OFF
SSE41_CMAKE_ON=		-DASTCENC_ISA_SSE41:BOOL=ON -DBASISU_SUPPORT_SSE:BOOL=ON

.include <bsd.port.mk>
