# Created by: Stas Timokhin <stast@bsdportal.ru>
# $FreeBSD$

PORTNAME=	eiskaltdcpp
PORTREVISION=	1
CATEGORIES=	net-p2p
PKGNAMESUFFIX=	-gtk

MAINTAINER=	ports@FreeBSD.org
COMMENT=	EiskaltDC++ Direct Connect client GTK GUI

LICENSE=	GPLv3

RUN_DEPENDS=	eiskaltdcpp-data>=0:net-p2p/eiskaltdcpp-data
LIB_DEPENDS=	libeiskaltdcpp.so:net-p2p/eiskaltdcpp-lib

MASTERDIR=	${.CURDIR}/../eiskaltdcpp-lib

USES=		cmake gettext compiler:c++11-lib desktop-file-utils
USE_OPENSSL=	yes
USE_GNOME=	pango glib20

OPTIONS_DEFINE=	LIBNOTIFY FREE_SPACE
OPTIONS_DEFAULT=	LIBNOTIFY FREE_SPACE GTK2 NOSOUND
OPTIONS_SINGLE=	GTK SOUND
OPTIONS_SINGLE_GTK=	GTK2 GTK3
OPTIONS_SINGLE_SOUND=	NOSOUND LIBGNOME2 LIBCANBERRA
NOSOUND_DESC=	Disable sound notification support
LIBGNOME2_DESC=	Sound notification support via libgnome
LIBCANBERRA_DESC=	Sound notification support via libcanberra
LIBNOTIFY_DESC=	Popup notification support
FREE_SPACE_DESC=Free space bar in status panel
GTK_DESC=	GTK GUI toolkit version

CMAKE_ARGS+=	-DUSE_QT:BOOL=OFF
CMAKE_ARGS+=	-DCREATE_MO:BOOL=ON
CMAKE_ARGS+=	-DINSTALL_DATA:BOOL=OFF

NOSOUND_CMAKE_ON=	-DUSE_LIBGNOME2:BOOL=OFF -DUSE_LIBCANBERRA:BOOL=OFF

LIBGNOME2_USE=		gnome=libgnome
LIBGNOME2_CMAKE_ON=	-DUSE_LIBGNOME2:BOOL=ON -DUSE_LIBCANBERRA:BOOL=OFF

LIBCANBERRA_LIB_DEPENDS=libcanberra-gtk.so:audio/libcanberra
LIBCANBERRA_CMAKE_ON=	-DUSE_LIBGNOME2:BOOL=OFF -DUSE_LIBCANBERRA:BOOL=ON

LIBNOTIFY_LIB_DEPENDS=	libnotify.so:devel/libnotify
LIBNOTIFY_CMAKE_ON=	-DUSE_LIBNOTIFY:BOOL=ON
LIBNOTIFY_CMAKE_OFF=	-DUSE_LIBNOTIFY:BOOL=OFF

GTK2_USE=		gnome=gtk20
GTK2_CMAKE_ON=		-DUSE_GTK:BOOL=ON -DUSE_GTK3:BOOL=OFF
GTK2_CMAKE_OFF=		-DUSE_GTK:BOOL=OFF -DUSE_GTK3:BOOL=ON

GTK3_USE=		gnome=gtk30
GTK3_CMAKE_ON=		-DUSE_GTK:BOOL=OFF -DUSE_GTK3:BOOL=ON
GTK3_CMAKE_OFF=		-DUSE_GTK:BOOL=ON -DUSE_GTK3:BOOL=OFF

FREE_SPACE_CMAKE_ON=    -DFREE_SPACE_BAR_C:BOOL=ON
FREE_SPACE_CMAKE_OFF=   -DFREE_SPACE_BAR_C:BOOL=OFF

.include "${MASTERDIR}/Makefile"
