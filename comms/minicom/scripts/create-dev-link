#!/bin/sh -
#
#	pre-install script for Minicom port to FreeBSD 2.x

echo ""
echo "Minicom will be installed mode 4511 (setuid) owner uucp, and group dialer."
echo ""
echo -n "Is this ok? [y] "
	read fooz
	if [ ! ${fooz} ] ; then
		fooz=Y
	fi
	if [ ${fooz} = Y -o ${fooz} = y -o ${fooz} = yes ] ; then
		# ok to continue
	else
		echo ""
		exit 1
	fi


echo ""
echo "Minicom needs to know what device your modem is hanging off of."
echo "I (the porter) have adopted Satoshi Asami's lead of using /dev/modem."
echo ""
echo -n "Lets see if you have too..."

# might want to test for ``-h'' rather than ``-e''
if [ -e /dev/modem ]; then
	echo "  Good you have:"
	/bin/ls -l /dev/modem
else
	echo "Nope, you haven't (yet)."
	echo "The patches to Minicom hardcode /dev/modem."
	echo -n "Would you like me to make this link for you? [Y] "
	read foo
	if [ ! ${foo} ] ; then
		foo=Y
	fi
	if [ ${foo} = Y -o ${foo} = y -o ${foo} = yes ] ; then
		echo "From the list below, what port number is your modem attached to?"
		cd /dev
		/bin/ls -C cuaa*
		echo ""
		echo -n "Enter the number X from cuaaX above : "
		read bar
		if [ ${bar} ] ; then
			if [ -e /dev/cuaa${bar} ]; then
				ln -s /dev/cuaa${bar} /dev/modem
			else
				echo "Error: /dev/cuaa${bar} doesn't exist."
				exit 1
			fi
		fi
	fi
fi

echo ""
exit 0
