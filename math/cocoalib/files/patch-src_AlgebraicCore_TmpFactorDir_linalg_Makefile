--- src/AlgebraicCore/TmpFactorDir/linalg/Makefile.orig	2020-03-06 20:35:15 UTC
+++ src/AlgebraicCore/TmpFactorDir/linalg/Makefile
@@ -1,73 +1,13 @@
 # Makefile for CoCoALib/src/AlgebraicCore/TmpFactorDir/linalg/ directory
 
-COCOA_ROOT=../../../..
-include $(COCOA_ROOT)/configuration/autoconf.mk
-CWD=src/AlgebraicCore/TmpFactorDir/linalg/
-DEPEND_FILE=Makefile_dependencies
-
 SRCS=FFfind_block.c FFdet.c FFsolve.c FFkernel.c Zkernel.c \
      Zdet.c  Zsolve.c FFmat.c  Zmat.c mpz_from_padic.c Zmat_det_bound.c \
      Qmat.c Qsolve.c
 
-OBJS=$(SRCS:.c=.o)
+all: ${SRCS:.c=.o}
+	ar rcs ../../libcocoa.a ${.ALLSRC}
 
-%.o: %.c
-	$(COMPILE) -I. -I.. -c -o $@ $<
+.SUFFIXES:.o
 
-.PHONY: default
-default: $(OBJS)
-	ar $(ARFLAGS) $(COCOA_LIB) $(OBJS)
-
-.PHONY: clean clean-local
-clean: clean-local
-	echo "Cleaned CoCoALib/$(CWD)"
-
-clean-local:
-	@/bin/rm -f  $(OBJS)  "$(DEPEND_FILE).old"  "$(DEPEND_FILE).new"  ./*~  ./.*~  ./.\#*
-	@/bin/rm -rf  ./*.dSYM
-
-.PHONY: veryclean
-veryclean: clean-local
-	@true >| "$(DEPEND_FILE)" # Empties $(DEPEND_FILE)
-	echo "Verycleaned CoCoALib/$(CWD)"
-
-
-# This target checks whether we should really build DEPEND_FILE
-.PHONY: dependencies
-dependencies:
-	@if [ \! -s "$(DEPEND_FILE)" -o \! "$(DEPEND_FILE)" -nt "$(COCOA_HDR)" ] ; \
-	then \
-	  $(MAKE) create-dependencies; \
-	fi
-
-# This is the target which really does rebuild the DEPEND_FILE
-.PHONY: create-dependencies
-create-dependencies:
-	@/bin/rm -rf $(DEPEND_FILE).new
-	@echo "Rebuilding dependencies in <CoCoALib>/$(CWD)"
-	@echo "##################################################################"   >> $(DEPEND_FILE).new
-	@echo "#        ---  CoCoALib version $(COCOALIB_VERSION)  ---"              >> $(DEPEND_FILE).new
-	@echo "# Dependencies for directory $(CWD)"                                  >> $(DEPEND_FILE).new
-	@echo "# DO NOT EDIT: this file is automatically generated; to regenerate"   >> $(DEPEND_FILE).new
-	@echo "# run \`make dependencies' in the CoCoALib root directory."           >> $(DEPEND_FILE).new
-	@echo "##################################################################"   >> $(DEPEND_FILE).new
-	@echo                                                                        >> $(DEPEND_FILE).new
-	for srcfile in $(SRCS); \
-	do \
-	  objfile=`basename $$srcfile .C`.o; \
-	  $(CXX) $(INCLUDE) -I. -I.. -MM "$$srcfile" -MQ "$$objfile" >> $(DEPEND_FILE).new; \
-	  echo >> $(DEPEND_FILE).new; \
-	done
-	@if [ -s "$(DEPEND_FILE)" ] ; \
-	then \
-	  /bin/mv -f "$(DEPEND_FILE)" "$(DEPEND_FILE).old" ; \
-	fi
-	@/bin/mv $(DEPEND_FILE).new  $(DEPEND_FILE)
-
-
-$(DEPEND_FILE):
-	@touch "$(DEPEND_FILE)"
-
-include $(DEPEND_FILE)
-
-$(OBJS): $(COCOA_ROOT)/configuration/autoconf.mk
+.c.o:
+	${CXX} ${CXXFLAGS} -o ${.TARGET} -c ${.IMPSRC}
