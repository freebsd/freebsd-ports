#! /bin/sh
# $FreeBSD$

/bin/rm -f ${PLIST} ${PLIST}.dirs

if [ "${LINGUAS}" ]; then
	set `echo $LINGUAS`
else
if [ "${BATCH}" ]; then
	set \"af\" \"az\" \"bg\" \"cs\" \"da\" \"el\" \"en_GB\" \"eo\" \"es\" \"et\" \"fi\" \"he\" \"hu\" \"is\" \"it\" \"lt\" \"lv\" \"mt\" \"nl\" \"no\" \"no_NY\" \"pl\" \"pt\" \"pt_BR\" \"ro\" \"sk\" \"sl\" \"sr\" \"sv\" \"ta\" \"th\" \"tr\" \"xh\" \"zh_TW.Big5\"
else
	/usr/bin/dialog --title "Select languages" --clear \
		--checklist "\n\
Please select desired languages:" -1 -1 16 \
af		"Afrikaans" OFF \
az		"Azerbaijani Turkish" OFF \
bg		"Bulgarisch" OFF \
cs		"Czech" OFF \
da		"Danish" OFF \
nl		"Dutch" OFF \
eo		"Esperanto" OFF \
et		"Estonian" OFF \
fi		"Finnish" ON \
fr		"French" ON \
de		"German" ON \
el		"Greek" OFF \
he		"Hebrew" OFF \
hu		"Hungarian" OFF \
is		"Icelandic" OFF \
it		"Italian" OFF \
ja		"Japanese" ON \
ko		"Korean" ON \
lt		"Lithuanian" ON \
lv		"Latvian" ON \
mt		"Maltese" ON \
no		"Norwegian" OFF \
no_NY		"Norwegian (Nynorsk)" OFF \
pl		"Polish" OFF \
pt		"Portuguese" OFF \
pt_BR		"Portuguese (Brazil)" OFF \
ro		"Romanian" OFF \
ru		"Russian" ON \
sr		"Serbian" OFF \
zh_CN.GB2312	"Simplified Chinese" ON \
sk		"Slovak" OFF \
sl		"Slovenian" OFF \
es		"Spanish" OFF \
sv		"Swedish" OFF \
ta		"Tamil" OFF \
th		"Thai" OFF \
zh_TW.Big5	"Traditional Chinese" ON \
tr		"Turkish" OFF \
en_GB		"UK English" OFF \
uk		"Ukrainian" ON \
xh		"Xhosa" OFF \
2> /tmp/chklist.tmp.$$

	retval=$?

	if [ -s /tmp/chklist.tmp.$$ ]; then
		set `cat /tmp/chklist.tmp.$$`
	fi
	rm -f /tmp/chklist.tmp.$$

	case $retval in
		0)	if [ -z "$*" ]; then
				echo "Nothing selected"
			fi
			;;
		1)	echo "Cancel pressed."
			exit 1
			;;
	esac
fi
fi

/bin/rm -f ${WRKSRC}/subdirs
#/usr/bin/grep "^[^@].*/en/.*" ${CURDIR}/pkg-plist > ${PLIST}
#/usr/bin/grep "^@.*/en/.*" ${CURDIR}/pkg-plist > ${PLIST}.dirs

while [ "$1" ]; do
	a=`echo -n $1 | /usr/bin/sed -e 's#\"##g'`
	echo $a >> ${WRKSRC}/subdirs
	/usr/bin/grep "^[^@].*/$a/.*" ${CURDIR}/pkg-plist >> ${PLIST}
	/usr/bin/grep "^[^@].*-$a\$" ${CURDIR}/pkg-plist >> ${PLIST}
	/usr/bin/grep "^@.*/$a/.*" ${CURDIR}/pkg-plist >> ${PLIST}.dirs
	/usr/bin/grep "^@.*/$a$" ${CURDIR}/pkg-plist >> ${PLIST}.dirs
	if [ x$a = xzh_TW.Big5 ]; then
	    /usr/bin/grep "^[^@].*/zh_TW/.*" ${CURDIR}/pkg-plist >> ${PLIST}
	    /usr/bin/grep "^[^@].*-zh_TW\$" ${CURDIR}/pkg-plist >> ${PLIST}
	    /usr/bin/grep "^@.*/zh_TW/.*" ${CURDIR}/pkg-plist >> ${PLIST}.dirs
	    /usr/bin/grep "^@.*/zh_TW$" ${CURDIR}/pkg-plist >> ${PLIST}.dirs
	fi
	shift
done

/bin/cat ${PLIST}.dirs >> ${PLIST}
/bin/cat ${FILESDIR}/pkg-plist.sub >> ${PLIST}
