*** mmv.c.old	Wed Mar  1 05:23:56 1995
--- mmv.c	Thu Jun 13 13:34:25 2002
***************
*** 88,94 ****
  #endif
  
  #include <stdio.h>
- #include <ctype.h>
  
  #ifdef MSDOS
  /* for MS-DOS (under Turbo C 1.5)*/
--- 88,93 ----
***************
*** 126,132 ****
  #include <sys/file.h>
  
  extern char *getenv();
- extern long lseek();
  extern char *malloc();
  
  #ifdef DIRENT
--- 125,130 ----
***************
*** 176,182 ****
  
  #else
  /* for System V and BSD */
- #include <string.h>
  #include <sys/signal.h>
  #include <fcntl.h>
  #endif
--- 174,179 ----
***************
*** 370,376 ****
  static int snap(/* REP *first, REP *p */);
  static void showdone(/* REP *fin */);
  static void breakout(/*  */);
! static int breakrep(/* */);
  static void breakstat(/* */);
  static void quit(/*  */);
  static int copymove(/* REP *p */);
--- 367,373 ----
  static int snap(/* REP *first, REP *p */);
  static void showdone(/* REP *fin */);
  static void breakout(/*  */);
! static void breakrep(/* */);
  static void breakstat(/* */);
  static void quit(/*  */);
  static int copymove(/* REP *p */);
***************
*** 389,395 ****
  static int getstat(/* char *full, FILEINFO *f */);
  static int dwritable(/* HANDLE *h */);
  static int fwritable(/* char *hname, FILEINFO *f */);
- static void memmove(/* void *to, void *from, int k */);
  #endif
  #ifndef RENAME
  static int rename(/* char *from, char *to */);
--- 386,391 ----
***************
*** 410,416 ****
  static SLICER slicer[2] = {{NULL, NULL, 0}, {NULL, NULL, 0}};
  
  static int badreps = 0, paterr = 0, direrr, failed = 0, gotsig = 0, repbad;
! static FILE *outfile = stdout;
  
  static char IDF[] = "$$mmvdid.";
  static char TEMP[] = "$$mmvtmp.";
--- 406,412 ----
  static SLICER slicer[2] = {{NULL, NULL, 0}, {NULL, NULL, 0}};
  
  static int badreps = 0, paterr = 0, direrr, failed = 0, gotsig = 0, repbad;
! static FILE *outfile;
  
  static char IDF[] = "$$mmvdid.";
  static char TEMP[] = "$$mmvtmp.";
***************
*** 471,476 ****
--- 467,473 ----
  {
  	char *frompat, *topat;
  
+ 	outfile = stdout;
  	init();
  	procargs(argc, argv, &frompat, &topat);
  	domatch(frompat, topat);
***************
*** 2550,2559 ****
  }
  
  
! static int breakrep()
  {
  	gotsig = 1;
- 	return(1);
  }
  
  
--- 2547,2555 ----
  }
  
  
! static void breakrep()
  {
  	gotsig = 1;
  }
  
  
***************
*** 2832,2838 ****
  }
  
  
! #ifndef MSDOS
  static void memmove(to, from, k)
  	char *to, *from;
  	unsigned k;
--- 2828,2834 ----
  }
  
  
! #if 0
  static void memmove(to, from, k)
  	char *to, *from;
  	unsigned k;
