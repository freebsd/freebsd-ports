% sed -i .orig 's|, "patches/[^"]*".freeze||g; s|, "ports/[^"]*".freeze||g; /mini_portile2/d' nokogiri.gemspec

--- nokogiri.gemspec.orig	2025-07-24 01:44:00 UTC
+++ nokogiri.gemspec
@@ -16,7 +16,7 @@ Gem::Specification.new do |s|
   s.executables = ["nokogiri".freeze]
   s.extensions = ["ext/nokogiri/extconf.rb".freeze]
   s.extra_rdoc_files = ["README.md".freeze, "ext/nokogiri/gumbo.c".freeze, "ext/nokogiri/html4_document.c".freeze, "ext/nokogiri/html4_element_description.c".freeze, "ext/nokogiri/html4_entity_lookup.c".freeze, "ext/nokogiri/html4_sax_parser.c".freeze, "ext/nokogiri/html4_sax_parser_context.c".freeze, "ext/nokogiri/html4_sax_push_parser.c".freeze, "ext/nokogiri/libxml2_polyfill.c".freeze, "ext/nokogiri/nokogiri.c".freeze, "ext/nokogiri/test_global_handlers.c".freeze, "ext/nokogiri/xml_attr.c".freeze, "ext/nokogiri/xml_attribute_decl.c".freeze, "ext/nokogiri/xml_cdata.c".freeze, "ext/nokogiri/xml_comment.c".freeze, "ext/nokogiri/xml_document.c".freeze, "ext/nokogiri/xml_document_fragment.c".freeze, "ext/nokogiri/xml_dtd.c".freeze, "ext/nokogiri/xml_element_content.c".freeze, "ext/nokogiri/xml_element_decl.c".freeze, "ext/nokogiri/xml_encoding_handler.c".freeze, "ext/nokogiri/xml_entity_decl.c".freeze, "ext/nokogiri/xml_entity_reference.c".freeze, "ext/nokogiri/xml_namespace.c".freeze, "ext/nokogiri/xml_node.c".freeze, "ext/nokogiri/xml_node_set.c".freeze, "ext/nokogiri/xml_processing_instruction.c".freeze, "ext/nokogiri/xml_reader.c".freeze, "ext/nokogiri/xml_relax_ng.c".freeze, "ext/nokogiri/xml_sax_parser.c".freeze, "ext/nokogiri/xml_sax_parser_context.c".freeze, "ext/nokogiri/xml_sax_push_parser.c".freeze, "ext/nokogiri/xml_schema.c".freeze, "ext/nokogiri/xml_syntax_error.c".freeze, "ext/nokogiri/xml_text.c".freeze, "ext/nokogiri/xml_xpath_context.c".freeze, "ext/nokogiri/xslt_stylesheet.c".freeze]
-  s.files = ["Gemfile".freeze, "LICENSE-DEPENDENCIES.md".freeze, "LICENSE.md".freeze, "README.md".freeze, "bin/nokogiri".freeze, "dependencies.yml".freeze, "ext/nokogiri/depend".freeze, "ext/nokogiri/extconf.rb".freeze, "ext/nokogiri/gumbo.c".freeze, "ext/nokogiri/html4_document.c".freeze, "ext/nokogiri/html4_element_description.c".freeze, "ext/nokogiri/html4_entity_lookup.c".freeze, "ext/nokogiri/html4_sax_parser.c".freeze, "ext/nokogiri/html4_sax_parser_context.c".freeze, "ext/nokogiri/html4_sax_push_parser.c".freeze, "ext/nokogiri/libxml2_polyfill.c".freeze, "ext/nokogiri/nokogiri.c".freeze, "ext/nokogiri/nokogiri.h".freeze, "ext/nokogiri/test_global_handlers.c".freeze, "ext/nokogiri/xml_attr.c".freeze, "ext/nokogiri/xml_attribute_decl.c".freeze, "ext/nokogiri/xml_cdata.c".freeze, "ext/nokogiri/xml_comment.c".freeze, "ext/nokogiri/xml_document.c".freeze, "ext/nokogiri/xml_document_fragment.c".freeze, "ext/nokogiri/xml_dtd.c".freeze, "ext/nokogiri/xml_element_content.c".freeze, "ext/nokogiri/xml_element_decl.c".freeze, "ext/nokogiri/xml_encoding_handler.c".freeze, "ext/nokogiri/xml_entity_decl.c".freeze, "ext/nokogiri/xml_entity_reference.c".freeze, "ext/nokogiri/xml_namespace.c".freeze, "ext/nokogiri/xml_node.c".freeze, "ext/nokogiri/xml_node_set.c".freeze, "ext/nokogiri/xml_processing_instruction.c".freeze, "ext/nokogiri/xml_reader.c".freeze, "ext/nokogiri/xml_relax_ng.c".freeze, "ext/nokogiri/xml_sax_parser.c".freeze, "ext/nokogiri/xml_sax_parser_context.c".freeze, "ext/nokogiri/xml_sax_push_parser.c".freeze, "ext/nokogiri/xml_schema.c".freeze, "ext/nokogiri/xml_syntax_error.c".freeze, "ext/nokogiri/xml_text.c".freeze, "ext/nokogiri/xml_xpath_context.c".freeze, "ext/nokogiri/xslt_stylesheet.c".freeze, "gumbo-parser/CHANGES.md".freeze, "gumbo-parser/Makefile".freeze, "gumbo-parser/THANKS".freeze, "gumbo-parser/src/Makefile".freeze, "gumbo-parser/src/README.md".freeze, "gumbo-parser/src/ascii.c".freeze, "gumbo-parser/src/ascii.h".freeze, "gumbo-parser/src/attribute.c".freeze, "gumbo-parser/src/attribute.h".freeze, "gumbo-parser/src/char_ref.c".freeze, "gumbo-parser/src/char_ref.h".freeze, "gumbo-parser/src/char_ref.rl".freeze, "gumbo-parser/src/error.c".freeze, "gumbo-parser/src/error.h".freeze, "gumbo-parser/src/foreign_attrs.c".freeze, "gumbo-parser/src/foreign_attrs.gperf".freeze, "gumbo-parser/src/insertion_mode.h".freeze, "gumbo-parser/src/macros.h".freeze, "gumbo-parser/src/nokogiri_gumbo.h".freeze, "gumbo-parser/src/parser.c".freeze, "gumbo-parser/src/parser.h".freeze, "gumbo-parser/src/replacement.h".freeze, "gumbo-parser/src/string_buffer.c".freeze, "gumbo-parser/src/string_buffer.h".freeze, "gumbo-parser/src/string_piece.c".freeze, "gumbo-parser/src/svg_attrs.c".freeze, "gumbo-parser/src/svg_attrs.gperf".freeze, "gumbo-parser/src/svg_tags.c".freeze, "gumbo-parser/src/svg_tags.gperf".freeze, "gumbo-parser/src/tag.c".freeze, "gumbo-parser/src/tag_lookup.c".freeze, "gumbo-parser/src/tag_lookup.gperf".freeze, "gumbo-parser/src/tag_lookup.h".freeze, "gumbo-parser/src/token_buffer.c".freeze, "gumbo-parser/src/token_buffer.h".freeze, "gumbo-parser/src/token_type.h".freeze, "gumbo-parser/src/tokenizer.c".freeze, "gumbo-parser/src/tokenizer.h".freeze, "gumbo-parser/src/tokenizer_states.h".freeze, "gumbo-parser/src/utf8.c".freeze, "gumbo-parser/src/utf8.h".freeze, "gumbo-parser/src/util.c".freeze, "gumbo-parser/src/util.h".freeze, "gumbo-parser/src/vector.c".freeze, "gumbo-parser/src/vector.h".freeze, "lib/nokogiri.rb".freeze, "lib/nokogiri/class_resolver.rb".freeze, "lib/nokogiri/css.rb".freeze, "lib/nokogiri/css/node.rb".freeze, "lib/nokogiri/css/parser.rb".freeze, "lib/nokogiri/css/parser.y".freeze, "lib/nokogiri/css/parser_extras.rb".freeze, "lib/nokogiri/css/selector_cache.rb".freeze, "lib/nokogiri/css/syntax_error.rb".freeze, "lib/nokogiri/css/tokenizer.rb".freeze, "lib/nokogiri/css/tokenizer.rex".freeze, "lib/nokogiri/css/xpath_visitor.rb".freeze, "lib/nokogiri/decorators/slop.rb".freeze, "lib/nokogiri/encoding_handler.rb".freeze, "lib/nokogiri/extension.rb".freeze, "lib/nokogiri/gumbo.rb".freeze, "lib/nokogiri/html.rb".freeze, "lib/nokogiri/html4.rb".freeze, "lib/nokogiri/html4/builder.rb".freeze, "lib/nokogiri/html4/document.rb".freeze, "lib/nokogiri/html4/document_fragment.rb".freeze, "lib/nokogiri/html4/element_description.rb".freeze, "lib/nokogiri/html4/element_description_defaults.rb".freeze, "lib/nokogiri/html4/encoding_reader.rb".freeze, "lib/nokogiri/html4/entity_lookup.rb".freeze, "lib/nokogiri/html4/sax/parser.rb".freeze, "lib/nokogiri/html4/sax/parser_context.rb".freeze, "lib/nokogiri/html4/sax/push_parser.rb".freeze, "lib/nokogiri/html5.rb".freeze, "lib/nokogiri/html5/builder.rb".freeze, "lib/nokogiri/html5/document.rb".freeze, "lib/nokogiri/html5/document_fragment.rb".freeze, "lib/nokogiri/html5/node.rb".freeze, "lib/nokogiri/jruby/dependencies.rb".freeze, "lib/nokogiri/jruby/nokogiri_jars.rb".freeze, "lib/nokogiri/syntax_error.rb".freeze, "lib/nokogiri/version.rb".freeze, "lib/nokogiri/version/constant.rb".freeze, "lib/nokogiri/version/info.rb".freeze, "lib/nokogiri/xml.rb".freeze, "lib/nokogiri/xml/attr.rb".freeze, "lib/nokogiri/xml/attribute_decl.rb".freeze, "lib/nokogiri/xml/builder.rb".freeze, "lib/nokogiri/xml/cdata.rb".freeze, "lib/nokogiri/xml/character_data.rb".freeze, "lib/nokogiri/xml/document.rb".freeze, "lib/nokogiri/xml/document_fragment.rb".freeze, "lib/nokogiri/xml/dtd.rb".freeze, "lib/nokogiri/xml/element_content.rb".freeze, "lib/nokogiri/xml/element_decl.rb".freeze, "lib/nokogiri/xml/entity_decl.rb".freeze, "lib/nokogiri/xml/entity_reference.rb".freeze, "lib/nokogiri/xml/namespace.rb".freeze, "lib/nokogiri/xml/node.rb".freeze, "lib/nokogiri/xml/node/save_options.rb".freeze, "lib/nokogiri/xml/node_set.rb".freeze, "lib/nokogiri/xml/notation.rb".freeze, "lib/nokogiri/xml/parse_options.rb".freeze, "lib/nokogiri/xml/pp.rb".freeze, "lib/nokogiri/xml/pp/character_data.rb".freeze, "lib/nokogiri/xml/pp/node.rb".freeze, "lib/nokogiri/xml/processing_instruction.rb".freeze, "lib/nokogiri/xml/reader.rb".freeze, "lib/nokogiri/xml/relax_ng.rb".freeze, "lib/nokogiri/xml/sax.rb".freeze, "lib/nokogiri/xml/sax/document.rb".freeze, "lib/nokogiri/xml/sax/parser.rb".freeze, "lib/nokogiri/xml/sax/parser_context.rb".freeze, "lib/nokogiri/xml/sax/push_parser.rb".freeze, "lib/nokogiri/xml/schema.rb".freeze, "lib/nokogiri/xml/searchable.rb".freeze, "lib/nokogiri/xml/syntax_error.rb".freeze, "lib/nokogiri/xml/text.rb".freeze, "lib/nokogiri/xml/xpath.rb".freeze, "lib/nokogiri/xml/xpath/syntax_error.rb".freeze, "lib/nokogiri/xml/xpath_context.rb".freeze, "lib/nokogiri/xslt.rb".freeze, "lib/nokogiri/xslt/stylesheet.rb".freeze, "lib/xsd/xmlparser/nokogiri.rb".freeze, "patches/libxml2/0001-Remove-script-macro-support.patch".freeze, "patches/libxml2/0002-Update-entities-to-remove-handling-of-ssi.patch".freeze, "patches/libxml2/0009-allow-wildcard-namespaces.patch".freeze, "patches/libxml2/0010-update-config.guess-and-config.sub-for-libxml2.patch".freeze, "patches/libxml2/0011-rip-out-libxml2-s-libc_single_threaded-support.patch".freeze, "patches/libxml2/0019-xpath-Use-separate-static-hash-table-for-standard-fu.patch".freeze, "patches/libxml2/0020-CVE-2025-6021-tree-Fix-integer-overflow-in-xmlBuildQ.patch".freeze, "patches/libxml2/0021-CVE-2025-6170-Fix-potential-buffer-overflows-of-inte.patch".freeze, "patches/libxml2/0022-CVE-2025-49795-schematron-Fix-null-pointer-dereferen.patch".freeze, "patches/libxml2/0023-CVE-2025-49794-CVE-2025-49796-schematron-Fix-xmlSche.patch".freeze, "patches/libxslt/0001-update-config.guess-and-config.sub-for-libxslt.patch".freeze, "ports/archives/libxml2-2.13.8.tar.xz".freeze, "ports/archives/libxslt-1.1.43.tar.xz".freeze]
+  s.files = ["Gemfile".freeze, "LICENSE-DEPENDENCIES.md".freeze, "LICENSE.md".freeze, "README.md".freeze, "bin/nokogiri".freeze, "dependencies.yml".freeze, "ext/nokogiri/depend".freeze, "ext/nokogiri/extconf.rb".freeze, "ext/nokogiri/gumbo.c".freeze, "ext/nokogiri/html4_document.c".freeze, "ext/nokogiri/html4_element_description.c".freeze, "ext/nokogiri/html4_entity_lookup.c".freeze, "ext/nokogiri/html4_sax_parser.c".freeze, "ext/nokogiri/html4_sax_parser_context.c".freeze, "ext/nokogiri/html4_sax_push_parser.c".freeze, "ext/nokogiri/libxml2_polyfill.c".freeze, "ext/nokogiri/nokogiri.c".freeze, "ext/nokogiri/nokogiri.h".freeze, "ext/nokogiri/test_global_handlers.c".freeze, "ext/nokogiri/xml_attr.c".freeze, "ext/nokogiri/xml_attribute_decl.c".freeze, "ext/nokogiri/xml_cdata.c".freeze, "ext/nokogiri/xml_comment.c".freeze, "ext/nokogiri/xml_document.c".freeze, "ext/nokogiri/xml_document_fragment.c".freeze, "ext/nokogiri/xml_dtd.c".freeze, "ext/nokogiri/xml_element_content.c".freeze, "ext/nokogiri/xml_element_decl.c".freeze, "ext/nokogiri/xml_encoding_handler.c".freeze, "ext/nokogiri/xml_entity_decl.c".freeze, "ext/nokogiri/xml_entity_reference.c".freeze, "ext/nokogiri/xml_namespace.c".freeze, "ext/nokogiri/xml_node.c".freeze, "ext/nokogiri/xml_node_set.c".freeze, "ext/nokogiri/xml_processing_instruction.c".freeze, "ext/nokogiri/xml_reader.c".freeze, "ext/nokogiri/xml_relax_ng.c".freeze, "ext/nokogiri/xml_sax_parser.c".freeze, "ext/nokogiri/xml_sax_parser_context.c".freeze, "ext/nokogiri/xml_sax_push_parser.c".freeze, "ext/nokogiri/xml_schema.c".freeze, "ext/nokogiri/xml_syntax_error.c".freeze, "ext/nokogiri/xml_text.c".freeze, "ext/nokogiri/xml_xpath_context.c".freeze, "ext/nokogiri/xslt_stylesheet.c".freeze, "gumbo-parser/CHANGES.md".freeze, "gumbo-parser/Makefile".freeze, "gumbo-parser/THANKS".freeze, "gumbo-parser/src/Makefile".freeze, "gumbo-parser/src/README.md".freeze, "gumbo-parser/src/ascii.c".freeze, "gumbo-parser/src/ascii.h".freeze, "gumbo-parser/src/attribute.c".freeze, "gumbo-parser/src/attribute.h".freeze, "gumbo-parser/src/char_ref.c".freeze, "gumbo-parser/src/char_ref.h".freeze, "gumbo-parser/src/char_ref.rl".freeze, "gumbo-parser/src/error.c".freeze, "gumbo-parser/src/error.h".freeze, "gumbo-parser/src/foreign_attrs.c".freeze, "gumbo-parser/src/foreign_attrs.gperf".freeze, "gumbo-parser/src/insertion_mode.h".freeze, "gumbo-parser/src/macros.h".freeze, "gumbo-parser/src/nokogiri_gumbo.h".freeze, "gumbo-parser/src/parser.c".freeze, "gumbo-parser/src/parser.h".freeze, "gumbo-parser/src/replacement.h".freeze, "gumbo-parser/src/string_buffer.c".freeze, "gumbo-parser/src/string_buffer.h".freeze, "gumbo-parser/src/string_piece.c".freeze, "gumbo-parser/src/svg_attrs.c".freeze, "gumbo-parser/src/svg_attrs.gperf".freeze, "gumbo-parser/src/svg_tags.c".freeze, "gumbo-parser/src/svg_tags.gperf".freeze, "gumbo-parser/src/tag.c".freeze, "gumbo-parser/src/tag_lookup.c".freeze, "gumbo-parser/src/tag_lookup.gperf".freeze, "gumbo-parser/src/tag_lookup.h".freeze, "gumbo-parser/src/token_buffer.c".freeze, "gumbo-parser/src/token_buffer.h".freeze, "gumbo-parser/src/token_type.h".freeze, "gumbo-parser/src/tokenizer.c".freeze, "gumbo-parser/src/tokenizer.h".freeze, "gumbo-parser/src/tokenizer_states.h".freeze, "gumbo-parser/src/utf8.c".freeze, "gumbo-parser/src/utf8.h".freeze, "gumbo-parser/src/util.c".freeze, "gumbo-parser/src/util.h".freeze, "gumbo-parser/src/vector.c".freeze, "gumbo-parser/src/vector.h".freeze, "lib/nokogiri.rb".freeze, "lib/nokogiri/class_resolver.rb".freeze, "lib/nokogiri/css.rb".freeze, "lib/nokogiri/css/node.rb".freeze, "lib/nokogiri/css/parser.rb".freeze, "lib/nokogiri/css/parser.y".freeze, "lib/nokogiri/css/parser_extras.rb".freeze, "lib/nokogiri/css/selector_cache.rb".freeze, "lib/nokogiri/css/syntax_error.rb".freeze, "lib/nokogiri/css/tokenizer.rb".freeze, "lib/nokogiri/css/tokenizer.rex".freeze, "lib/nokogiri/css/xpath_visitor.rb".freeze, "lib/nokogiri/decorators/slop.rb".freeze, "lib/nokogiri/encoding_handler.rb".freeze, "lib/nokogiri/extension.rb".freeze, "lib/nokogiri/gumbo.rb".freeze, "lib/nokogiri/html.rb".freeze, "lib/nokogiri/html4.rb".freeze, "lib/nokogiri/html4/builder.rb".freeze, "lib/nokogiri/html4/document.rb".freeze, "lib/nokogiri/html4/document_fragment.rb".freeze, "lib/nokogiri/html4/element_description.rb".freeze, "lib/nokogiri/html4/element_description_defaults.rb".freeze, "lib/nokogiri/html4/encoding_reader.rb".freeze, "lib/nokogiri/html4/entity_lookup.rb".freeze, "lib/nokogiri/html4/sax/parser.rb".freeze, "lib/nokogiri/html4/sax/parser_context.rb".freeze, "lib/nokogiri/html4/sax/push_parser.rb".freeze, "lib/nokogiri/html5.rb".freeze, "lib/nokogiri/html5/builder.rb".freeze, "lib/nokogiri/html5/document.rb".freeze, "lib/nokogiri/html5/document_fragment.rb".freeze, "lib/nokogiri/html5/node.rb".freeze, "lib/nokogiri/jruby/dependencies.rb".freeze, "lib/nokogiri/jruby/nokogiri_jars.rb".freeze, "lib/nokogiri/syntax_error.rb".freeze, "lib/nokogiri/version.rb".freeze, "lib/nokogiri/version/constant.rb".freeze, "lib/nokogiri/version/info.rb".freeze, "lib/nokogiri/xml.rb".freeze, "lib/nokogiri/xml/attr.rb".freeze, "lib/nokogiri/xml/attribute_decl.rb".freeze, "lib/nokogiri/xml/builder.rb".freeze, "lib/nokogiri/xml/cdata.rb".freeze, "lib/nokogiri/xml/character_data.rb".freeze, "lib/nokogiri/xml/document.rb".freeze, "lib/nokogiri/xml/document_fragment.rb".freeze, "lib/nokogiri/xml/dtd.rb".freeze, "lib/nokogiri/xml/element_content.rb".freeze, "lib/nokogiri/xml/element_decl.rb".freeze, "lib/nokogiri/xml/entity_decl.rb".freeze, "lib/nokogiri/xml/entity_reference.rb".freeze, "lib/nokogiri/xml/namespace.rb".freeze, "lib/nokogiri/xml/node.rb".freeze, "lib/nokogiri/xml/node/save_options.rb".freeze, "lib/nokogiri/xml/node_set.rb".freeze, "lib/nokogiri/xml/notation.rb".freeze, "lib/nokogiri/xml/parse_options.rb".freeze, "lib/nokogiri/xml/pp.rb".freeze, "lib/nokogiri/xml/pp/character_data.rb".freeze, "lib/nokogiri/xml/pp/node.rb".freeze, "lib/nokogiri/xml/processing_instruction.rb".freeze, "lib/nokogiri/xml/reader.rb".freeze, "lib/nokogiri/xml/relax_ng.rb".freeze, "lib/nokogiri/xml/sax.rb".freeze, "lib/nokogiri/xml/sax/document.rb".freeze, "lib/nokogiri/xml/sax/parser.rb".freeze, "lib/nokogiri/xml/sax/parser_context.rb".freeze, "lib/nokogiri/xml/sax/push_parser.rb".freeze, "lib/nokogiri/xml/schema.rb".freeze, "lib/nokogiri/xml/searchable.rb".freeze, "lib/nokogiri/xml/syntax_error.rb".freeze, "lib/nokogiri/xml/text.rb".freeze, "lib/nokogiri/xml/xpath.rb".freeze, "lib/nokogiri/xml/xpath/syntax_error.rb".freeze, "lib/nokogiri/xml/xpath_context.rb".freeze, "lib/nokogiri/xslt.rb".freeze, "lib/nokogiri/xslt/stylesheet.rb".freeze, "lib/xsd/xmlparser/nokogiri.rb".freeze]
   s.homepage = "https://nokogiri.org".freeze
   s.licenses = ["MIT".freeze]
   s.rdoc_options = ["--main".freeze, "README.md".freeze]
@@ -26,7 +26,6 @@ Gem::Specification.new do |s|
 
   s.specification_version = 4
 
-  s.add_runtime_dependency(%q<mini_portile2>.freeze, ["~> 2.8.2".freeze])
   s.add_runtime_dependency(%q<racc>.freeze, ["~> 1.4".freeze])
 end
 
