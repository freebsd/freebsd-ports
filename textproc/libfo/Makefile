# $FreeBSD$

PORTNAME=	libfo
PORTVERSION=	0.6.2
DISTVERSIONPREFIX=	v
CATEGORIES=	textproc

MAINTAINER=	hrs@FreeBSD.org
COMMENT=	XSL formatter library for xmlroff

LICENSE=	BSD3CLAUSE
LICENSE_FILE=	${WRKSRC}/COPYING

BUILD_DEPENDS=	${LOCALBASE}/share/xsl/docbook/catalog.xml:textproc/docbook-xsl \
		xmlcatmgr:textproc/xmlcatmgr
LIB_DEPENDS=	libcairo.so:graphics/cairo \
		libfreetype.so:print/freetype2

CONFLICTS_INSTALL=	xmlroff-0.6.[12] xmlroff-0.6.2_[12345]

USES=		autoreconf gettext gmake libtool pkgconfig pathfix
USE_GNOME=	libgnomeprint libxslt \
		libxml2 gtk20 glib20 pango \
		librsvg2 gdkpixbuf2
USE_GITHUB=	yes
GH_PROJECT=	xmlroff
GH_ACCOUNT=	xmlroff
USE_LDCONFIG=	yes
WRKSRC=		${WRKDIR}/xmlroff-${PORTVERSION}/xmlroff
GNU_CONFIGURE=	yes
CONFIGURE_ARGS= --disable-gtk-doc
CPPFLAGS+=	-I${LOCALBASE}/include
LDFLAGS+=	-L${LOCALBASE}/lib
INSTALL_TARGET=	install-strip

post-patch:
	${REINPLACE_CMD} -e 's|glib/.*\.h>|glib.h>|g' \
	    ${WRKSRC}/libfo/fo-libfo-basic.h

.include <bsd.port.mk>
