# Created by: Horia Racoviceanu <horia@racoviceanu.com>
# $FreeBSD$

PORTNAME=	cloud_sptheme
PORTVERSION=	1.7.1
PORTREVISION=	1
CATEGORIES=	textproc python
MASTER_SITES=	CHEESESHOP
PKGNAMEPREFIX=	${PYTHON_PKGNAMEPREFIX}
DIST_SUBDIR=	python

MAINTAINER=	ports@FreeBSD.org
COMMENT=	Sphinx theme

LICENSE=	BSD3CLAUSE

BUILD_DEPENDS=	${PYTHON_PKGNAMEPREFIX}sphinx>=1.3:textproc/py-sphinx
RUN_DEPENDS:=	${BUILD_DEPENDS}

USES=		python
USE_PYTHON=	distutils autoplist
PYDISTUTILS_BUILDARGS=	build_sphinx -E

PORTDOCS=	*

DOCSDIR=	${PREFIX}/share/doc/py-${PORTNAME}

DOCSRCDIR1=	${WRKSRC}
DOC_FILES1=	README CHANGES

DOCSDIR2=	${DOCSDIR}/html
DOCSRCDIR2=	${DOCSRCDIR1}/build/sphinx/html
DOC_FILES2=	${DOC_FILES3} *.js

DOCSDIR3=	${DOCSDIR2}/lib
DOCSRCDIR3=	${DOCSRCDIR2}/lib
DOC_FILES3=	*.html

DOCSDIR4=	${DOCSDIR2}/_static
DOCSRCDIR4=	${DOCSRCDIR2}/_static
DOC_FILES4=	*.css *.gif *.js *.png *.svg

OPTIONS_DEFINE=	DOCS

post-extract:
	@${CHMOD} -R a+rX ${WRKSRC}

post-install:
	@${MKDIR} ${STAGEDIR}${DOCSDIR} ${STAGEDIR}${DOCSDIR2}
	${INSTALL_DATA} ${DOC_FILES1:S|^|${DOCSRCDIR1}/|} ${STAGEDIR}${DOCSDIR}
	${INSTALL_DATA} ${DOC_FILES2:S|^|${DOCSRCDIR2}/|} ${STAGEDIR}${DOCSDIR2}
	@${MKDIR} ${STAGEDIR}${DOCSDIR3} ${STAGEDIR}${DOCSDIR4}
	${INSTALL_DATA} ${DOC_FILES3:S|^|${DOCSRCDIR3}/|} ${STAGEDIR}${DOCSDIR3}
	${INSTALL_DATA} ${DOC_FILES4:S|^|${DOCSRCDIR4}/|} ${STAGEDIR}${DOCSDIR4}

.include <bsd.port.mk>
