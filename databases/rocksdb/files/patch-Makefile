--- Makefile.orig	2021-06-25 21:15:04 UTC
+++ Makefile
@@ -231,16 +231,16 @@ AM_SHARE = $(AM_V_CCLD) $(CXX) $(PLATFORM_SHARED_LDFLA
 # Detect what platform we're building on.
 # Export some common variables that might have been passed as Make variables
 # instead of environment variables.
-dummy := $(shell (export ROCKSDB_ROOT="$(CURDIR)"; \
-                  export CXXFLAGS="$(EXTRA_CXXFLAGS)"; \
-                  export LDFLAGS="$(EXTRA_LDFLAGS)"; \
-                  export COMPILE_WITH_ASAN="$(COMPILE_WITH_ASAN)"; \
-                  export COMPILE_WITH_TSAN="$(COMPILE_WITH_TSAN)"; \
-                  export COMPILE_WITH_UBSAN="$(COMPILE_WITH_UBSAN)"; \
-                  export PORTABLE="$(PORTABLE)"; \
-                  export ROCKSDB_NO_FBCODE="$(ROCKSDB_NO_FBCODE)"; \
-                  export USE_CLANG="$(USE_CLANG)"; \
-                  "$(CURDIR)/build_tools/build_detect_platform" "$(CURDIR)/make_config.mk"))
+#dummy := $(shell (export ROCKSDB_ROOT="$(CURDIR)"; \
+#                  export CXXFLAGS="$(EXTRA_CXXFLAGS)"; \
+#                  export LDFLAGS="$(EXTRA_LDFLAGS)"; \
+#                  export COMPILE_WITH_ASAN="$(COMPILE_WITH_ASAN)"; \
+#                  export COMPILE_WITH_TSAN="$(COMPILE_WITH_TSAN)"; \
+#                  export COMPILE_WITH_UBSAN="$(COMPILE_WITH_UBSAN)"; \
+#                  export PORTABLE="$(PORTABLE)"; \
+#                  export ROCKSDB_NO_FBCODE="$(ROCKSDB_NO_FBCODE)"; \
+#                  export USE_CLANG="$(USE_CLANG)"; \
+#                  "$(CURDIR)/build_tools/build_detect_platform" "$(CURDIR)/make_config.mk"))
 # this file is generated by the previous line to set build flags and sources
 include make_config.mk
 
@@ -715,7 +715,7 @@ endif  # PLATFORM_SHARED_EXT
 	blackbox_crash_test_with_ts whitebox_crash_test_with_ts
 
 
-all: $(LIBRARY) $(BENCHMARKS) tools tools_lib test_libs $(TESTS)
+all: $(LIBRARY) $(BENCHMARKS) tools tools_lib test_libs # $(TESTS)
 
 all_but_some_tests: $(LIBRARY) $(BENCHMARKS) tools tools_lib test_libs $(ROCKSDBTESTS_SUBSET)
 
