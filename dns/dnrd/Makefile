# Created by: George Reid <greid@ukug.uk.freebsd.org>
# $FreeBSD$

PORTNAME=	dnrd
PORTVERSION=	2.20.3
PORTREVISION=	1
CATEGORIES=	dns
MASTER_SITES=	SF

MAINTAINER=	ports@FreeBSD.org
COMMENT=	Proxy DNS daemon

LICENSE=	GPLv2+
LICENSE_FILE=	${WRKSRC}/COPYING

USES=		gmake
USE_RC_SUBR=	${PORTNAME}
GNU_CONFIGURE=	yes

USERS=		dnrd
GROUPS=		dnrd

PORTDOCS=	AUTHORS COPYING ChangeLog INSTALL NEWS README
PORTEXAMPLES=	README-cache README-cygwin README-master TODO master.sample

OPTIONS_DEFINE=	TCP MASTER DEBUG RANDOM DOCS EXAMPLES
OPTIONS_DEFAULT=MASTER

TCP_DESC=	TCP support
MASTER_DESC=	Master file support
RANDOM_DESC=	Random source port

TCP_CONFIGURE_ENABLE=		tcp
MASTER_CONFIGURE_ENABLE=	master
DEBUG_CONFIGURE_ENABLE=		enable-debug
RANDOM_CONFIGURE_ENABLE=	random-src

do-install:
	@${MKDIR} ${STAGEDIR}${ETCDIR}
	${INSTALL_PROGRAM} ${WRKSRC}/src/dnrd ${STAGEDIR}${PREFIX}/sbin/
	${INSTALL_MAN} ${WRKSRC}/doc/dnrd.8 ${STAGEDIR}${MAN8PREFIX}/man/man8/
	${INSTALL_DATA} ${WRKSRC}/doc/master.sample ${STAGEDIR}${ETCDIR}/

do-install-DOCS-on:
	@${MKDIR} ${STAGEDIR}${DOCSDIR}
	${INSTALL_DATA} ${PORTDOCS:S,^,${WRKSRC}/,} ${STAGEDIR}${DOCSDIR}/

do-install-EXAMPLES-on:
	@${MKDIR} ${STAGEDIR}${EXAMPLESDIR}
	${INSTALL_DATA} ${PORTEXAMPLES:S,^,${WRKSRC}/doc/,} ${STAGEDIR}${EXAMPLESDIR}/

.include <bsd.port.mk>
