--- CMakeLists.txt.orig	2016-11-10 07:28:01 UTC
+++ CMakeLists.txt
@@ -93,7 +93,7 @@ endif (NOT CMAKE_BUILD_TYPE OR CMAKE_BUILD_TYPE STREQU
 if(CMAKE_BUILD_TYPE STREQUAL "Debug")
   set(WL_DEBUG_FLAGS "-g -DDEBUG")
 elseif(CMAKE_BUILD_TYPE STREQUAL "Release")
-  set(WL_OPTIMIZE_FLAGS "-O3")
+  set(WL_OPTIMIZE_FLAGS "-O3" CACHE STRING "")
   set(WL_DEBUG_FLAGS "-DNDEBUG -DNOPARACHUTE")
 elseif(CMAKE_BUILD_TYPE STREQUAL "RelWithDebInfo")
   set(WL_OPTIMIZE_FLAGS "-O3")
@@ -179,8 +179,8 @@ endif()
 # Turn some warnings into errors.
 wl_add_flag(WL_COMPILE_DIAGNOSTICS "-Werror=format-security")
 wl_add_flag(WL_COMPILE_DIAGNOSTICS "-Werror=return-type")
-wl_add_flag(WL_COMPILE_DIAGNOSTICS "-Werror=shadow")
-wl_add_flag(WL_COMPILE_DIAGNOSTICS "-Werror=uninitialized")
+wl_add_flag(WL_COMPILE_DIAGNOSTICS "-Wshadow")
+wl_add_flag(WL_COMPILE_DIAGNOSTICS "-Wuninitialized")
 
 IF (WIN32)
   add_definitions(-DMINGW_HAS_SECURE_API)
@@ -225,7 +225,7 @@ if (NOT DEFINED WL_VERSION)
 else (NOT DEFINED WL_VERSION)
   add_custom_target (
     InputRevision ALL
-    COMMAND ${CMAKE_COMMAND -DWL_INSTALL_BASEDIR=${WL_INSTALL_BASEDIR} -DWL_VERSION=${WL_VERSION} -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DSOURCE_DIR=${CMAKE_CURRENT_SOURCE_DIR} -DBINARY_DIR=${CMAKE_CURRENT_BINARY_DIR} -P ${CMAKE_CURRENT_SOURCE_DIR}/cmake/InputRevision.cmake
+    COMMAND ${CMAKE_COMMAND} -DWL_INSTALL_BASEDIR=${WL_INSTALL_BASEDIR} -DWL_VERSION=${WL_VERSION} -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DSOURCE_DIR=${CMAKE_CURRENT_SOURCE_DIR} -DBINARY_DIR=${CMAKE_CURRENT_BINARY_DIR} -P ${CMAKE_CURRENT_SOURCE_DIR}/cmake/InputRevision.cmake
   )
 endif (NOT DEFINED WL_VERSION)
 
@@ -244,7 +244,7 @@ add_custom_target(_run_all_tests ALL
 
 install (
   FILES ${CMAKE_CURRENT_BINARY_DIR}/VERSION
-  DESTINATION ${WL_INSTALL_BASEDIR}
+  DESTINATION ${WL_INSTALL_DOCDIR}
   CONFIGURATIONS Debug;Release
   COMPONENT CoreVersionFile
 )
@@ -294,7 +294,7 @@ install(
     COPYING
     CREDITS
     ChangeLog
-  DESTINATION ${WL_INSTALL_BASEDIR}
+  DESTINATION ${WL_INSTALL_DOCDIR}
   CONFIGURATIONS Debug;Release
   COMPONENT CoreLicenseFiles
 )
@@ -302,7 +302,7 @@ install(
 install(
   DIRECTORY
     doc
-  DESTINATION ${WL_INSTALL_BASEDIR}
+  DESTINATION ${WL_INSTALL_DOCDIR}
   CONFIGURATIONS Debug
   COMPONENT DocFiles
   PATTERN "CMakeLists.txt" EXCLUDE
