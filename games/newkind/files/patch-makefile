--- makefile.orig	Fri Jul  6 21:29:04 2001
+++ makefile	Sat Nov 23 16:06:24 2002
@@ -2,26 +2,23 @@
 # Makefile for Elite - The New Kind.
 #
 
-CC	=	gcc
+CC	?=	gcc
 WRES	=	windres
 
-LIBS	=	-s -mwindows -lalleg_s -lkernel32 -lgdi32 -lcomdlg32 -luser32 -lole32 -lddraw -ldxguid -lwinmm -ldsound -ldinput
-CFLAGS	=	-mpentium -O2 -funroll-loops -Wall -DALLEGRO_STATICLINK
+LIBS	=	-L$(LOCALBASE)/lib -L$(LOCALBASE)/lib/allegro/4.0 -lalleg `$(LOCALBASE)/bin/allegro-config --libs`
+CFLAGS	+=	-funroll-loops -Wall -DALLEGRO_STATICLINK
+CFLAGS	+=	-I$(LOCALBASE)/include -I$(LOCALBASE)/include/allegro
 
 OBJS	= alg_gfx.o alg_main.o docked.o elite.o\
 	intro.o planet.o shipdata.o shipface.o sound.o space.o\
 	swat.o threed.o vector.o random.o trade.o options.o \
-	stars.o missions.o nkres.o pilot.o file.o keyboard.o
+	stars.o missions.o pilot.o file.o keyboard.o
 
 .c.o:
 	$(CC) $(CFLAGS) -c $<
 
 newkind.exe: $(OBJS)
 	$(CC) -o newkind.exe $(OBJS) $(LIBS)
-
-nkres.o: nkres.rc
-	$(WRES) nkres.rc nkres.o
-
 
 alg_gfx.o: alg_gfx.c alg_data.h config.h elite.h planet.h gfx.h
 
