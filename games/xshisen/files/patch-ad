
$FreeBSD$

--- main.C.orig
+++ main.C
@@ -44,53 +44,53 @@
 
 static XtResource gres[] = {
     { "aboutString", "AboutString", XtRString, sizeof (char *),
-      0, XtRString, "XShisen " XSHISEN_VERSION " by Masaoki Kobayashi" },
+      0, XtRString, (XtPointer)"XShisen " XSHISEN_VERSION " by Masaoki Kobayashi" },
     { "tedumari", "Tedumari", XtRString, sizeof (char *),
-      offsetof(GlobRes, tedumari), XtRString, "You can get no more pieces." },
+      offsetof(GlobRes, tedumari), XtRString, (XtPointer)"You can get no more pieces." },
     { "width", "Width", XtRInt, sizeof (int),
-      offsetof(GlobRes, Width), XtRString, "640" },
+      offsetof(GlobRes, Width), XtRString, (XtPointer)"640" },
     { "height", "Height", XtRInt, sizeof (int),
-      offsetof(GlobRes, Height), XtRString, "400" },
+      offsetof(GlobRes, Height), XtRString, (XtPointer)"400" },
     { "timeFormat", "TimeFormat", XtRString, sizeof (char *),
-      offsetof(GlobRes, timeFormat), XtRString, "Your time is %2.2d:%2.2d." },
+      offsetof(GlobRes, timeFormat), XtRString, (XtPointer)"Your time is %2.2d:%2.2d." },
     { "displayFormat1", "DisplayFormat1", XtRString, sizeof (char *),
-      offsetof(GlobRes, displayFormat1), XtRString, "Rest: " },
+      offsetof(GlobRes, displayFormat1), XtRString, (XtPointer)"Rest: " },
     { "displayFormat2", "DisplayFormat2", XtRString, sizeof (char *),
-      offsetof(GlobRes, displayFormat2), XtRString, "Time: " },
+      offsetof(GlobRes, displayFormat2), XtRString, (XtPointer)"Time: " },
     { "scoreFile", "ScoreFile", XtRString, sizeof (char *),
-      offsetof(GlobRes, scoreFile), XtRString, "%s/xshisen-scores" },
+      offsetof(GlobRes, scoreFile), XtRString, (XtPointer)"%s/xshisen-scores" },
     { "personalScore", "PersonalScore", XtRString, sizeof (char *),
-      offsetof(GlobRes, personalScoreFile), XtRString, ".xshisen-scores" },
+      offsetof(GlobRes, personalScoreFile), XtRString, (XtPointer)".xshisen-scores" },
     { "scoreOnly", "ScoreOnly", XtRBoolean, sizeof (Boolean),
-      offsetof(GlobRes, scoreOnly), XtRString, "False" },
+      offsetof(GlobRes, scoreOnly), XtRString, (XtPointer)"False" },
     { "connectLineColor", "ConnectLineColor", XtRPixel, sizeof (Pixel),
-      offsetof(GlobRes, connLineColor), XtRString, "blue" },
+      offsetof(GlobRes, connLineColor), XtRString, (XtPointer)"blue" },
     { "connectLineTime", "ConnectLineTime", XtRInt, sizeof (int),
-      offsetof(GlobRes, connLineTime), XtRString, "1000" },
+      offsetof(GlobRes, connLineTime), XtRString, (XtPointer)"1000" },
     { "connectLineWidth", "ConnectLineWidth", XtRInt, sizeof (int),
-      offsetof(GlobRes, connLineWidth), XtRString, "6" },
+      offsetof(GlobRes, connLineWidth), XtRString, (XtPointer)"6" },
     { "autoDemo", "AutoDemo", XtRBoolean, sizeof (Boolean),
-      offsetof(GlobRes, autoDemo), XtRString, "False" },
+      offsetof(GlobRes, autoDemo), XtRString, (XtPointer)"False" },
     { "libraryDirectory", "LibraryDirectory", XtRString, sizeof (char *),
-      offsetof(GlobRes, libDir), XtRString, LIB_DIR },
+      offsetof(GlobRes, libDir), XtRString, (XtPointer)LIB_DIR },
     { "magnifyFactor", "MagnifyFactor", XtRFloat, sizeof (float),
-      offsetof(GlobRes, magFactor), XtRString, "1.0" },
+      offsetof(GlobRes, magFactor), XtRString, (XtPointer)"1.0" },
     { "fitPixmap", "FitPixmap", XtRBoolean, sizeof (Boolean),
-      offsetof(GlobRes, fitPixmap), XtRString, "True" },
+      offsetof(GlobRes, fitPixmap), XtRString, (XtPointer)"True" },
     { "colorCloseness", "ColorCloseness", XtRInt, sizeof (int),
-      offsetof(GlobRes, colorCloseness), XtRString, "40000" },
+      offsetof(GlobRes, colorCloseness), XtRString, (XtPointer)"40000" },
     { "gameSize", "GameSize", XtRInt, sizeof (int),
-      offsetof(GlobRes, gameSize), XtRString, "0" },
+      offsetof(GlobRes, gameSize), XtRString, (XtPointer)"0" },
     { "trialMode", "TrialMode", XtRBoolean, sizeof (Boolean),
-      offsetof(GlobRes, trialMode), XtRString, "False" },
+      offsetof(GlobRes, trialMode), XtRString, (XtPointer)"False" },
     { "gravityMode", "GravityMode", XtRBoolean, sizeof (Boolean),
-      offsetof(GlobRes, gravityMode), XtRString, "False" },
+      offsetof(GlobRes, gravityMode), XtRString, (XtPointer)"False" },
     { "idleTime", "IdleTime", XtRInt, sizeof (int),
-      offsetof(GlobRes, idleTime), XtRString, "100000" },
+      offsetof(GlobRes, idleTime), XtRString, (XtPointer)"100000" },
     { "kanjiCode", "KanjiCode", XtRString, sizeof (char *),
-      offsetof(GlobRes, kanjiCode), XtRString, KANJICODE },
+      offsetof(GlobRes, kanjiCode), XtRString, (XtPointer)KANJICODE },
     { "kanjiConvert", "KanjiConvert", XtRBoolean, sizeof (Boolean),
-      offsetof(GlobRes, kanjiConv), XtRString, "False" }
+      offsetof(GlobRes, kanjiConv), XtRString, (XtPointer)"False" }
 };
 GlobRes globRes;
 
@@ -194,9 +194,9 @@
     char buffer[100], *p;
     char *(*codeconv)(const char*);
 
-    strcpy(buffer, operation);
+    strlcpy(buffer, operation, sizeof(buffer));
     if (strchr(buffer, '-') == NULL) {
-        strcat(buffer, "-" KANJICODE);
+        strlcat(buffer, "-" KANJICODE, sizeof(buffer));
     }
     if (strncasecmp(buffer, "jis-euc", 7) == 0)
         codeconv = jis_to_euc;
