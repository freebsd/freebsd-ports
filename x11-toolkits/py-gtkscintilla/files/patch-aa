--- Makefile.orig	Thu Feb  7 08:34:54 2002
+++ Makefile	Mon Mar 15 04:10:30 2004
@@ -1,14 +1,16 @@
 NAME = PyGtkScintilla
 VERSION = 0.8.2
 
-CC = gcc
+CC ?= gcc
 
-PYTHON_PREFIX = $(shell python -c "import sys ; print '%s/lib/python%s' % (sys.exec_prefix,sys.version[:3])")
-PYTHON_SITE = $(PYTHON_PREFIX)/site-packages
-PYTHON_INCLUDE = $(shell python -c "import sys ; print '%s/include/python%s' % (sys.exec_prefix,sys.version[:3])")
+#PYTHON_PREFIX = $(shell python -c "import sys ; print '%s/lib/python%s' % (sys.exec_prefix,sys.version[:3])")
+#PYTHON_SITE = $(PYTHON_PREFIX)/site-packages
+#PYTHON_INCLUDE = $(shell python -c "import sys ; print '%s/include/python%s' % (sys.exec_prefix,sys.version[:3])")
 
-LDFLAGS = -shared `gtk-config --libs` -lgtkscintilla
-CFLAGS = `gtk-config --cflags` -I$(PYTHON_INCLUDE)
+GTK_LDFLAGS != $(GTK_CONFIG) --libs
+GTK_CFLAGS != $(GTK_CONFIG) --cflags
+LDFLAGS = -pthread -shared $(GTK_LDFLAGS) -lgtkscintilla
+CFLAGS += -D_THREAD_SAFE -fPIC $(GTK_CFLAGS) -I$(PYTHON_INCLUDE) -I${X11BASE}/include/scintilla
 
 all: _gtkscintillamodule.so
 
