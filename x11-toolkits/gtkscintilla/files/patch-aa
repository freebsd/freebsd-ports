
$FreeBSD$

--- Makefile.orig	Sun Jun 10 12:03:21 2001
+++ Makefile	Sun Jun 10 15:41:45 2001
@@ -2,18 +2,18 @@
 
 NAME = GtkScintilla
 LIB_NAME = gtkscintilla
-VERSION = 0.7.2
-PREFIX = $(shell gtk-config --prefix)
+VERSION = 0
+PREFIX = $(shell $(GTK_CONFIG) --prefix)
 
 SCINTILLA_DIR = ./scintilla
-SCINTILLA_INCLUDE = $(SCINTILLA_DIR)/include
-SCINTILLA_LIB = $(SCINTILLA_DIR)/bin/scintilla.a
-SCINTILLA_IFACE = $(SCINTILLA_INCLUDE)/Scintilla.iface
-LEXERS = $(wildcard $(SCINTILLA_DIR)/gtk/Lex*.o)
-CFLAGS = $(shell gtk-config --cflags) -g -Wall -DGTK -DSCI_LEXER
-LDFLAGS = $(shell gtk-config --libs) $(SCINTILLA_LIB) $(LEXERS)
-CC = gcc
-LD = gcc
+SCINTILLA_INCLUDE = $(X11BASE)/include/scintilla
+SCINTILLA_LIB = -lscintilla
+SCINTILLA_IFACE = scintilla/include/Scintilla.iface
+LEXERS = -lscintilla_lexers
+CFLAGS += $(shell $(GTK_CONFIG) --cflags) -Wall -DGTK -DSCI_LEXER
+LDFLAGS = $(shell $(GTK_CONFIG) --libs) $(SCINTILLA_LIB) $(LEXERS)
+CC ?= gcc
+LD = $(CC)
 AR = ar
 
 STATIC_LIB = lib$(LIB_NAME).a
@@ -24,10 +24,10 @@
 
 all: $(STATIC_LIB) $(SHARED_LIB)
 
-$(STATIC_LIB): $(SCINTILLA_LIB) gtkscintilla.o
+$(STATIC_LIB): gtkscintilla.o
 	$(AR) -rs $@ $^
 
-$(SHARED_LIB): $(SCINTILLA_LIB) gtkscintilla.o
+$(SHARED_LIB): gtkscintilla.o
 	$(LD) -o $@ $^ -shared $(LDFLAGS)
 
 gtkscintilla.o: gtkscintilla.h gtkscintilla.c
@@ -35,8 +35,8 @@
 $(SCINTILLA_LIB):
 	cd $(SCINTILLA_DIR)/gtk ; $(MAKE)
 
-gtkscintilla.h gtkscintilla.c: scigen.py $(SCINTILLA_IFACE)
-	python scigen.py
+#gtkscintilla.h gtkscintilla.c: scigen.py $(SCINTILLA_IFACE)
+#	python scigen.py
 
 install: all
 	install -D --mode=755 $(SHARED_LIB) $(DESTDIR)/$(LIB_DIR)/$(SHARED_LIB)
