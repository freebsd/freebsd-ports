# Created by: Dave Glowacki <dglo@ssec.wisc.edu>
# $FreeBSD$

PORTNAME=	checkstyle
PORTVERSION=	6.19
CATEGORIES=	java devel
MASTER_SITES=	SF
PKGNAMEPREFIX=	java-
DISTNAME=	${PORTNAME}-${PORTVERSION}-bin

MAINTAINER=	bofh@FreeBSD.org
COMMENT=	Java style checker

LICENSE=	LGPL21 APACHE20
LICENSE_COMB=	dual

USE_JAVA=	yes
JAVA_VERSION=	1.6+
NO_BUILD=	yes
WRKSRC=		${WRKDIR}/${PORTNAME}-${PORTVERSION}

JAR_FILE=	${PORTNAME}-${PORTVERSION}-all.jar

PLIST_FILES=	bin/${PORTNAME} \
		%%JAVAJARDIR%%/${PORTNAME}.jar
PORTDOCS=	*
PORTEXAMPLES=	*

SUB_FILES=	${PORTNAME}.sh

OPTIONS_DEFINE=	DOCS EXAMPLES
NO_ARCH=	yes

do-install:
	@-${MKDIR} ${STAGEDIR}${JAVAJARDIR}
	${INSTALL_DATA} ${WRKSRC}/${JAR_FILE} \
		${STAGEDIR}${JAVAJARDIR}/${PORTNAME}.jar
	${INSTALL_SCRIPT} ${WRKDIR}/${PORTNAME}.sh \
		${STAGEDIR}${PREFIX}/bin/${PORTNAME}

do-install-DOCS-on:
	@-${MKDIR} ${STAGEDIR}${DOCSDIR}
	(cd ${WRKSRC} && ${INSTALL_DATA} LICENSE* RIGHTS.antlr \
		${STAGEDIR}${DOCSDIR})

do-install-EXAMPLES-on:
	@-${MKDIR} ${STAGEDIR}${EXAMPLESDIR}
.for EXAMPLEFILE in checkstyle_checks import-control suppressions
	${INSTALL_DATA} ${WRKSRC}/config/${EXAMPLEFILE}.xml ${STAGEDIR}${EXAMPLESDIR}
.endfor

.include <bsd.port.mk>
