--- include/iconv.h.in.orig	2011-08-07 17:48:03 UTC
+++ include/iconv.h.in
@@ -21,8 +21,10 @@
 #ifndef _LIBICONV_H
 #define _LIBICONV_H
 
+#ifndef LIBICONV_PLUG
 #define _LIBICONV_VERSION 0x010E    /* version number: (major<<8) + minor */
 extern @DLL_VARIABLE@ int _libiconv_version; /* Likewise */
+#endif
 
 /* We would like to #include any system header file which could define
    iconv_t, 1. in order to eliminate the risk that the user gets compilation
@@ -94,7 +96,6 @@ extern int iconv_close (iconv_t cd);
 #endif
 
 
-#ifndef LIBICONV_PLUG
 
 /* Nonstandard extensions. */
 
@@ -127,12 +128,16 @@ typedef struct {
 /* Allocates descriptor for code conversion from encoding ‘fromcode’ to
    encoding ‘tocode’ into preallocated memory. Returns an error indicator
    (0 or -1 with errno set). */
+#ifndef LIBICONV_PLUG
 #define iconv_open_into libiconv_open_into
+#endif
 extern int iconv_open_into (const char* tocode, const char* fromcode,
                             iconv_allocation_t* resultp);
 
 /* Control of attributes. */
+#ifndef LIBICONV_PLUG
 #define iconvctl libiconvctl
+#endif
 extern int iconvctl (iconv_t cd, int request, void* argument);
 
 /* Hook performed after every successful conversion of a Unicode character. */
@@ -210,9 +215,15 @@ struct iconv_fallbacks {
 #define ICONV_SET_DISCARD_ILSEQ   4  /* const int *argument */
 #define ICONV_SET_HOOKS           5  /* const struct iconv_hooks *argument */
 #define ICONV_SET_FALLBACKS       6  /* const struct iconv_fallbacks *argument */
+#ifdef LIBICONV_PLUG
+#define ICONV_GET_ILSEQ_INVALID 128
+#define ICONV_SET_ILSEQ_INVALID 129
+#endif
 
 /* Listing of locale independent encodings. */
+#ifndef LIBICONV_PLUG
 #define iconvlist libiconvlist
+#endif
 extern void iconvlist (int (*do_one) (unsigned int namescount,
                                       const char * const * names,
                                       void* data),
@@ -224,6 +235,7 @@ extern const char * iconv_canonicalize (const char * n
 
 /* Support for relocatable packages.  */
 
+#ifndef LIBICONV_PLUG
 /* Sets the original and the current installation prefix of the package.
    Relocation simply replaces a pathname starting with the original prefix
    by the corresponding pathname with the current prefix instead.  Both
@@ -231,12 +243,12 @@ extern const char * iconv_canonicalize (const char * n
    instead of "/").  */
 extern void libiconv_set_relocation_prefix (const char *orig_prefix,
                                             const char *curr_prefix);
+#endif
 
 #ifdef __cplusplus
 }
 #endif
 
-#endif
 
 
 #endif /* _LIBICONV_H */
