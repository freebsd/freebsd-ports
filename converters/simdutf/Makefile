PORTNAME=	simdutf
DISTVERSIONPREFIX=	v
DISTVERSION=	4.0.8
CATEGORIES=	converters textproc

MAINTAINER=	fuz@FreeBSD.org
COMMENT=	Unicode validation and transcoding with SIMD
WWW=		https://simdutf.github.io/simdutf/

LICENSE=	APACHE20 MIT
LICENSE_COMB=	dual
LICENSE_FILE_APACHE20=	${WRKSRC}/LICENSE-APACHE
LICENSE_FILE_MIT=	${WRKSRC}/LICENSE-MIT

USES=		cmake:testing
USE_GITHUB=	yes
USE_LDCONFIG=	yes

CMAKE_ON=	BUILD_SHARED_LIBS

OPTIONS_DEFINE=	BENCHMARKS ICONV TEST TOOLS
OPTIONS_DEFAULT=	ICONV TOOLS
OPTIONS_SUB=		yes
BENCHMARKS_DESC=	Build benchmarks
TOOLS_DESC=		Build tools

BENCHMARKS_IMPLIES=	TEST
BENCHMARKS_LIB_DEPENDS=	libicuuc.so:devel/icu
BENCHMARKS_CMAKE_BOOL=	SIMDUTF_BENCHMARKS
ICONV_USES=	iconv
ICONV_CMAKE_BOOL=	SIMDUTF_ICONV
TEST_CMAKE_BOOL=	SIMDUTF_TESTS
TOOLS_CMAKE_BOOL=	SIMDUTF_TOOLS

pre-test-TEST-off:
	@echo Enable option TEST to run the full test suite

.include <bsd.port.mk>
